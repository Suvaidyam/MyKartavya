var H=(U,b,F)=>new Promise((g,_)=>{var c=h=>{try{M(F.next(h))}catch(i){_(i)}},u=h=>{try{M(F.throw(h))}catch(i){_(i)}},M=h=>h.done?g(h.value):Promise.resolve(h.value).then(c,u);M((F=F.apply(U,b)).next())});import{_ as le,r as y,l as z,c as r,a as e,m,b as V,u as O,i as D,e as J,F as T,g as N,p as I,q as X,t as f,v as q,x as Z,f as K,n as re,A as ie,B as Ae,h as a,E as oe,o as ne,G as Be,C as Fe,w as Ie,D as He,T as Pe,z as Oe,H as Me,I as Ue,J as Ve,j as ae,k as qe,K as Te}from"./index-DlK6QVW2.js";import{R as ze,C as De,_ as Je,a as Re}from"./refresh-cw-Ctz8OBXw.js";import{l as P}from"./index-DWLT9acb.js";/* empty css              */import{R as Ee}from"./ReqForApproval-4nvAjjsZ.js";import{_ as Ne,C as Ze}from"./NotFound-DrJ5OE-z.js";import{F as Ge,T as We,L as Ye,M as Ke}from"./twitter-BN2nT-96.js";import{S as Xe}from"./share-2-CuYY0h80.js";import"./Dialog-B-8Awv88.js";const Qe={class:"bg-white rounded-lg"},et={class:"bg-white p-6 rounded-lg w-full relative"},tt={class:"flex justify-between items-center mb-4"},st={class:"relative border-gray-300 pl-3"},ot={key:1},at={key:0,class:"w-4 h-4 flex items-center justify-center"},rt={key:1,class:"w-4 h-4 flex items-center justify-center"},lt={key:2,class:"w-4 h-4 flex items-center justify-center"},nt={key:3,class:"w-4 h-4 flex items-center justify-center"},it=["onClick"],ut={class:"text-[19px] font-medium px-6 py-2"},ct={class:"text-gray-600 text-xs font-normal ml-6 mt-0"},dt=["onClick"],pt=["onClick"],mt=["onClick"],vt={key:0,class:"fixed inset-0 flex items-center justify-center z-[100]"},ft={key:1,class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50"},gt={class:"bg-white rounded-lg shadow-lg w-full max-w-md"},bt={class:"flex justify-between items-center border-b p-4"},yt={class:"p-4"},ht={class:"flex justify-center gap-6 my-3"},xt=["onClick"],wt={key:2,class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50"},_t={class:"bg-white rounded-lg shadow-lg w-full max-w-md p-6 text-center"},Ct={class:"mb-6"},kt={class:"text-gray-600"},$t={class:"flex justify-center"},Lt=["disabled"],jt={key:0,class:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"},St={key:3,class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50"},Mt={class:"bg-white rounded-lg shadow-lg p-6 w-[500px]"},At={class:"flex justify-between items-center border-b pb-2 mb-4"},Ft={class:"mb-6"},Ot={class:"relative"},Rt={class:"flex gap-2"},Et={class:"flex gap-2 items-center relative"},Bt={class:"flex gap-2 items-center relative"},It={key:0,class:"text-red-500 absolute text-xs -bottom-5"},Ht={class:"mb-4 relative"},Pt={class:"flex items-center gap-2"},Ut={class:"h-8 w-16 flex items-center justify-center border rounded-sm text-base font-normal text-center"},Vt={key:0,class:"text-red-500 absolute text-xs -bottom-2"},qt={class:"mb-4 relative"},Tt={class:"border-dashed border-2 border-gray-300 p-6 rounded-lg text-center relative"},zt={key:0,class:"text-red-500 absolute text-xs -bottom-2"},Dt={class:"flex gap-2 mt-3"},Jt=["src"],Nt={class:"flex justify-end"},Zt={key:0,class:"h-5 w-5"},Gt={__name:"Stepper",props:{activity:{type:Object,required:!1,default:()=>({})}},setup(U){const b=y(0),F=y(!1),g=y(!1),_=y(!1),c=y(!1),u=y(!1),M=D("call"),h=D("auth"),i=D("store");D("socket");const C=ie(),B=Ae(),R=y(!1),E=y({rating:null,comments:""});let S=U;const w=y({hours:0,minutes:0,progress:0}),v=y({time:!1,progress:!1,image:!1}),p=y([]),$=y(!1);y(!1);const k=y([{title:"Activity Approval",description:"Is your application to volunteer for the activity approved?",button:"Request for Approval",completed:!1},{title:"Get Started",description:"Click the button below once you are ready to start the activity",button:"Start Activity",completed:!1},{title:"Activity Report",description:"Click the button below once you have finished the activity & submit a small report",button:"Submit Report",completed:!1},{title:"Feedback & Karma Points",description:"Click the button to register the feedback & collect your karma points",button:"Submit Feedback",completed:!1}]),G=n=>H(this,null,function*(){var t,s;if(n>b.value){c.value=!0;return}try{if(n===0){const o=((t=C==null?void 0:C.params)==null?void 0:t.activity)||((s=C==null?void 0:C.params)==null?void 0:s.name);if(!o){P.error("Activity ID not found",{autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0});return}const x=yield M("mykartavya.controllers.api.act_now",{activity:o,volunteer:h.cookie.user_id});if((x==null?void 0:x.status)===200)S.activity.workflow_state="Applied",k.value[n].completed=!0,b.value++,P.success("Activity approval request submitted successfully",{autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0}),setTimeout(()=>{i.refresh_step=!0},2e3);else if((x==null?void 0:x.status)===201){u.value=!0;return}else{P.error((x==null?void 0:x.msg)||"Something went wrong",{autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0});return}}n===3&&(F.value=!0),n===2&&(_.value=!0)}catch(o){console.error(o),P.error("Something went wrong",{autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0})}}),Q=()=>{let n=!1;return v.value={time:!1,progress:!1,image:!1},w.value.hours===0&&w.value.minutes===0&&(v.value.time=!0,n=!0),w.value.progress==S.activity.com_percent&&(v.value.progress=!0,n=!0),p.value.length===0&&S.activity.require_feedback_images&&(v.value.image=!0,n=!0),n},ee=()=>H(this,null,function*(){if(!Q()){_.value=!1,$.value=!0,S.activity.completion_wf_state=="Submitted"&&(k.value[2].completed=!0,b.value++);try{let n=yield M("mykartavya.controllers.api.submit_activity_report",{name:S.activity.name,data:{duration:w.value.hours*3600+w.value.minutes*60,percent:w.value.progress-S.activity.com_percent,images:p.value}});if(n.status===400){P.error(n.error,{autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0}),$.value=!1;return}n&&(w.value.progress=n.com_percent,P.success("Activity report submitted successfully",{autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0}),$.value=!1,w.value={hours:0,minutes:0,progress:0},i.refresh_step=!0)}catch(n){$.value=!1,P.error("Something went wrong",{autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0})}}}),Y=()=>H(this,null,function*(){(yield M("mykartavya.controllers.api.submit_feedback",{name:S.activity.name,volunteer:h.cookie.user_id,rating:E.value.rating,comments:E.value.comments})).rating&&(F.value=!1,g.value=!0,k.value[3].completed=!0,S.activity.need_certificate!=="Yes"&&setTimeout(()=>{g.value=!1},3e3))}),W=y(!1),d=()=>H(this,null,function*(){W.value=!0,(yield M("mykartavya.controllers.api.view_certificate",{activity:S.activity.activity}))&&(W.value=!1,P.success("Certificate visible in your profile after few minutes",{autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0}),g.value=!1,setTimeout(()=>{g.value=!1,B.push("/profile")},3e3))}),l=n=>{const t=n.target.files;if(t.length)for(let s of t){const o=new FileReader;o.onload=x=>{p.value.push({file:s,preview:o.result})},o.readAsDataURL(s)}},A=y([{icon:"ðŸ˜ž",label:1},{icon:"ðŸ˜",label:2},{icon:"ðŸ˜Š",label:3},{icon:"ðŸ™‚",label:4},{icon:"ðŸ™‚",label:5}]);return z(()=>S.activity,(n,t)=>{n.com_percent&&(w.value.progress=n.com_percent),n.is_assigned&&(n.workflow_state=="Applied"?(k.value[0].completed=!0,b.value=1):n.workflow_state=="Approved"&&n.completion_wf_state=="Pending"?(k.value[0].completed=!0,k.value[1].completed=!0,b.value=2):n.workflow_state=="Approved"&&["Submitted","Approved"].includes(n.completion_wf_state)&&!(n.rating!=null&&n.rating!=0)?(k.value[0].completed=!0,n.completion_wf_state=="Submitted"?(k.value[1].completed=!0,b.value=2):(k.value[1].completed=!0,k.value[2].completed=!0,b.value=3)):n.rating!=null&&n.rating!=0&&n.completion_wf_state=="Approved"?(k.value[0].completed=!0,k.value[1].completed=!0,k.value[2].completed=!0,k.value[3].completed=!0,b.value=4):n.completion_wf_state=="Rejected"&&(k.value[0].completed=!0,k.value[1].completed=!1,k.value[1].button="Request Resubmission",b.value=1,R.value=!0))},{immediate:!0,deep:!0}),z(()=>w.value.progress,(n,t)=>{S.activity.com_percent<=n||(w.value.progress=S.activity.com_percent)}),z(()=>g,n=>{n&&S.activity.need_certificate==="No"&&setTimeout(()=>{g.value=!1},3e3)}),z(p,n=>{n.length>0&&(v.value.image=!1)},{deep:!0}),(n,t)=>(a(),r("div",null,[e("div",Qe,[e("div",et,[e("div",tt,[t[12]||(t[12]=e("h2",{class:"text-heading4 font-medium"},"Timeline",-1)),e("button",{onClick:t[0]||(t[0]=s=>O(i).refresh_step=!0),class:"text-pink-500 flex items-center text-base font-normal w-[107px] justify-center h-8 rounded-sm border refresh-button"},[t[11]||(t[11]=J(" Refresh ")),V(O(ze),{class:"w-4 h-4 ml-1"})])]),e("div",st,[(a(!0),r(T,null,N(k.value,(s,o)=>(a(),r("div",{key:o,class:"mb-6 relative"},[e("div",{class:I(["absolute left-0 top-0 h-full w-[1px]",[s.completed?"bg-[#22C55E]":"bg-[#E5E7EB]",o>b.value?"blur-sm opacity-50":""]])},null,2),e("div",{class:I(["absolute -left-4 w-7 h-7 min-w-7 max-h-7 rounded-full flex items-center justify-center",[s.completed?"border-green-500 bg-white border-2 text-green-600":"bg-[#FF5722] text-white",o>b.value?"blur-sm opacity-50":""]])},[s.completed?(a(),X(O(De),{key:0,class:"w-4 h-4"})):(a(),r("div",ot,[s.title=="Activity Approval"?(a(),r("div",at,t[13]||(t[13]=[e("img",{src:Je,alt:"",class:"w-4 h-4"},null,-1)]))):m("",!0),s.title=="Get Started"?(a(),r("div",rt,t[14]||(t[14]=[e("svg",{width:"19",height:"19",viewBox:"0 0 19 19",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M12.4688 10.292C12.4688 10.1345 12.4062 9.9835 12.2948 9.87215C12.1835 9.7608 12.0325 9.69824 11.875 9.69824H7.125C6.96753 9.69824 6.81651 9.7608 6.70516 9.87215C6.59381 9.9835 6.53125 10.1345 6.53125 10.292C6.53125 10.4495 6.59381 10.6005 6.70516 10.7118C6.81651 10.8232 6.96753 10.8857 7.125 10.8857H11.875C12.0325 10.8857 12.1835 10.8232 12.2948 10.7118C12.4062 10.6005 12.4688 10.4495 12.4688 10.292ZM12.4688 13.4587C12.4688 13.3012 12.4062 13.1502 12.2948 13.0388C12.1835 12.9275 12.0325 12.8649 11.875 12.8649H7.125C6.96753 12.8649 6.81651 12.9275 6.70516 13.0388C6.59381 13.1502 6.53125 13.3012 6.53125 13.4587C6.53125 13.6161 6.59381 13.7672 6.70516 13.8785C6.81651 13.9899 6.96753 14.0524 7.125 14.0524H11.875C12.0325 14.0524 12.1835 13.9899 12.2948 13.8785C12.4062 13.7672 12.4688 13.6161 12.4688 13.4587Z",fill:"white"}),e("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M5.54183 1.78125C4.96443 1.78125 4.41068 2.01062 4.0024 2.4189C3.59412 2.82719 3.36475 3.38093 3.36475 3.95833V15.0417C3.36475 15.6191 3.59412 16.1728 4.0024 16.5811C4.41068 16.9894 4.96443 17.2188 5.54183 17.2188H13.4585C14.0359 17.2188 14.5896 16.9894 14.9979 16.5811C15.4062 16.1728 15.6356 15.6191 15.6356 15.0417V6.308C15.6356 6.00637 15.5374 5.71346 15.3553 5.47279L12.9819 2.33146C12.8528 2.16055 12.6858 2.02192 12.494 1.92645C12.3022 1.83098 12.091 1.78128 11.8767 1.78125H5.54183ZM4.55225 3.95833C4.55225 3.41208 4.99558 2.96875 5.54183 2.96875H11.2814V6.44971C11.2814 6.77746 11.5474 7.04346 11.8752 7.04346H14.4481V15.0417C14.4481 15.5879 14.0047 16.0312 13.4585 16.0312H5.54183C4.99558 16.0312 4.55225 15.5879 4.55225 15.0417V3.95833Z",fill:"white"})],-1)]))):m("",!0),s.title=="Activity Report"?(a(),r("div",lt,t[15]||(t[15]=[e("svg",{width:"19",height:"19",viewBox:"0 0 19 19",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M14.3927 6.36444L14.7592 5.9971C15.0511 5.70515 15.4469 5.54109 15.8598 5.54102C16.2726 5.54094 16.6685 5.70486 16.9605 5.99671C17.2524 6.28856 17.4165 6.68443 17.4165 7.09724C17.4166 7.51005 17.2527 7.90598 16.9608 8.19794L16.5943 8.56527M14.3927 6.36444C14.3927 6.36444 14.4386 7.14344 15.1266 7.83139C15.8145 8.51935 16.5943 8.56527 16.5943 8.56527M14.3927 6.36444L11.0202 9.73694C10.7906 9.96494 10.6766 10.0797 10.5784 10.2056C10.4623 10.3544 10.3636 10.5144 10.2823 10.6854C10.2135 10.8294 10.1628 10.9822 10.0607 11.2886L9.73372 12.2703L9.62764 12.5877M16.5943 8.56527L13.2218 11.9378C12.9922 12.1674 12.8782 12.2814 12.7523 12.3795C12.6035 12.4956 12.4436 12.5943 12.2726 12.6756C12.1285 12.7445 11.9757 12.7951 11.6693 12.8973L10.6877 13.2242L10.3702 13.3303M9.62764 12.5877L9.52235 12.906C9.49782 12.9798 9.49433 13.0591 9.51226 13.1348C9.53019 13.2106 9.56883 13.2798 9.62387 13.3349C9.67891 13.3899 9.74817 13.4286 9.82391 13.4465C9.89966 13.4644 9.97889 13.4609 10.0528 13.4364L10.3702 13.3303M9.62764 12.5877L10.3702 13.3303",stroke:"white"}),e("path",{d:"M6.33333 10.2913H8.3125M6.33333 7.12467H11.4792M6.33333 13.458H7.52083M15.6972 2.51084C14.7701 1.58301 13.277 1.58301 10.2917 1.58301H8.70833C5.72296 1.58301 4.22987 1.58301 3.30283 2.51084C2.37579 3.43867 2.375 4.93097 2.375 7.91634V11.083C2.375 14.0684 2.375 15.5615 3.30283 16.4885C4.23067 17.4155 5.72296 17.4163 8.70833 17.4163H10.2917C13.277 17.4163 14.7701 17.4163 15.6972 16.4885C16.4445 15.742 16.5894 14.6297 16.6179 12.6663",stroke:"white","stroke-linecap":"round"})],-1)]))):m("",!0),s.title=="Feedback & Karma Points"?(a(),r("div",nt,t[16]||(t[16]=[e("svg",{width:"19",height:"19",viewBox:"0 0 19 19",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M6.21125 6.98373C6.54929 6.17069 7.70037 6.17069 8.03842 6.98373L8.9995 9.29461L11.494 9.49411C12.3712 9.56536 12.7275 10.6594 12.0585 11.2318L10.1585 12.8603L10.7388 15.2947C10.943 16.1504 10.012 16.8273 9.26075 16.3689L7.12483 15.0643L4.98892 16.3689C4.23762 16.8281 3.30662 16.1504 3.51087 15.2947L4.09117 12.8603L2.19117 11.2318C1.52221 10.6594 1.87846 9.56457 2.75562 9.49411L5.24937 9.29461L6.21125 6.98373ZM7.12483 7.87911L6.29992 9.86223C6.23004 10.0303 6.11518 10.1758 5.96797 10.2828C5.82076 10.3897 5.64689 10.4541 5.4655 10.4687L3.32483 10.6397L4.95567 12.0369C5.2375 12.2784 5.361 12.6576 5.27471 13.0186L4.77596 15.107L6.60866 13.9876C6.76407 13.8926 6.94268 13.8423 7.12483 13.8423C7.30698 13.8423 7.48559 13.8926 7.641 13.9876L9.47371 15.107L8.97496 13.0186C8.93265 12.8415 8.94005 12.6561 8.99635 12.4829C9.05264 12.3097 9.15564 12.1554 9.294 12.0369L10.9248 10.6397L8.78417 10.4687C8.60277 10.4541 8.42891 10.3897 8.2817 10.2828C8.13449 10.1758 8.01963 10.0303 7.94975 9.86223L7.12483 7.87911ZM10.3525 2.30973C10.6224 1.65978 11.5439 1.65978 11.8139 2.30973L12.1939 3.22173L13.1779 3.3009C13.8793 3.35632 14.1643 4.23269 13.6292 4.69107L12.8795 5.33311L13.109 6.29419C13.2721 6.97898 12.5272 7.52048 11.9263 7.15315L11.0832 6.63857L10.24 7.15315C9.63917 7.52048 8.89421 6.97898 9.05729 6.29419L9.28687 5.33311L8.53717 4.69107C8.002 4.23269 8.28621 3.35711 8.98842 3.30011L9.97325 3.22094L10.3525 2.30973ZM11.4624 3.52573L11.0832 2.61373L10.7032 3.52573C10.6474 3.66005 10.5556 3.7764 10.438 3.86201C10.3204 3.94762 10.1816 3.99918 10.0366 4.01103L9.05175 4.09019L9.80146 4.73144C9.91223 4.82613 9.99472 4.94955 10.0398 5.08812C10.085 5.22669 10.091 5.37502 10.0572 5.51678L9.82758 6.47786L10.6707 5.96328C10.7949 5.88746 10.9376 5.84734 11.0832 5.84734C11.2287 5.84734 11.3714 5.88746 11.4956 5.96328L12.3387 6.47786L12.1092 5.51678C12.0755 5.37514 12.0816 5.22697 12.1267 5.08856C12.1718 4.95014 12.2542 4.82685 12.3649 4.73223L13.1146 4.0894L12.1305 4.01023C11.9854 3.99874 11.8462 3.94742 11.7283 3.86195C11.6104 3.77647 11.5184 3.66013 11.4624 3.52573ZM14.6829 7.89257C14.7147 7.82435 14.7654 7.76663 14.8289 7.7262C14.8925 7.68576 14.9662 7.66428 15.0415 7.66428C15.1168 7.66428 15.1905 7.68576 15.2541 7.7262C15.3176 7.76663 15.3683 7.82435 15.4001 7.89257L15.7366 8.61298C15.7757 8.69726 15.8433 8.76508 15.9274 8.80457L16.6478 9.14103C16.716 9.1729 16.7737 9.22357 16.8142 9.28709C16.8546 9.35061 16.8761 9.42435 16.8761 9.49965C16.8761 9.57495 16.8546 9.64869 16.8142 9.71221C16.7737 9.77573 16.716 9.8264 16.6478 9.85828L15.9274 10.1947C15.8434 10.234 15.7759 10.3015 15.7366 10.3855L15.4001 11.1059C15.3683 11.1742 15.3176 11.2319 15.2541 11.2723C15.1905 11.3128 15.1168 11.3342 15.0415 11.3342C14.9662 11.3342 14.8925 11.3128 14.8289 11.2723C14.7654 11.2319 14.7147 11.1742 14.6829 11.1059L14.3464 10.3855C14.3071 10.3015 14.2396 10.234 14.1556 10.1947L13.4352 9.85828C13.367 9.8264 13.3093 9.77573 13.2688 9.71221C13.2284 9.64869 13.2069 9.57495 13.2069 9.49965C13.2069 9.42435 13.2284 9.35061 13.2688 9.28709C13.3093 9.22357 13.367 9.1729 13.4352 9.14103L14.1556 8.80457C14.2396 8.76528 14.3071 8.69775 14.3464 8.61378L14.6829 7.89257Z",fill:"white"})],-1)]))):m("",!0)]))],2),e("div",{class:I(o>b.value?"blur-sm opacity-50 pointer-events-auto relative":"relative"),onClick:x=>o>b.value&&(c.value=!0)},[e("p",{class:I(["text-[10px] font-normal px-6",s.completed?"text-[#FF5722]":"text-[#999999]"])}," STEP "+f(o+1),3),e("h3",ut,f(s.title),1),e("p",ct,f(s.description),1),!s.completed&&!(["Get Started","Activity Report"].includes(s.title)&&(U.activity.workflow_state=="Applied"||U.activity.completion_wf_state=="Submitted"))?(a(),r("button",{key:0,onClick:x=>G(o),class:"mt-3 h-[28px] px-3 uppercase rounded-sm text-caption font-medium text-white ml-6 bg-[#FF5722] button-animation"},f(s.button),9,dt)):m("",!0),!s.completed&&["Get Started"].includes(s.title)&&["Applied"].includes(U.activity.workflow_state)?(a(),r("button",{key:1,disabled:"",onClick:x=>G(o),class:"mt-3 h-[28px] uppercase cursor-not-allowed px-3 rounded-sm text-caption font-medium text-white ml-6 bg-[#FF5722] button-animation"},f(s.title=="Get Started"?"Approval in Progress":"Review under Admin"),9,pt)):m("",!0),!s.completed&&["Activity Report"].includes(s.title)&&["Approved"].includes(U.activity.workflow_state)&&U.activity.completion_wf_state=="Submitted"?(a(),r("button",{key:2,disabled:"",onClick:x=>G(o),class:"mt-2 h-[28px] uppercase cursor-not-allowed px-3 rounded-sm text-caption font-medium text-white ml-2 bg-[#FF5722] button-animation"},f(s.title=="Get Started"?"Approval in Progress":"Review under Admin"),9,mt)):m("",!0)],10,it)]))),128))]),c.value?(a(),r("div",vt,[e("div",{class:"fixed inset-0 bg-black/50",onClick:t[1]||(t[1]=s=>c.value=!1)}),t[17]||(t[17]=e("div",{class:"bg-white rounded-lg p-4 relative z-[101] flex items-center gap-3 shadow-lg max-w-md mx-4"},[e("img",{src:"",alt:"chat star",class:"w-6 h-6"}),e("p",{class:"text-base text-[#111111] font-normal"},"Finish the current step to move forward!")],-1))])):m("",!0),F.value?(a(),r("div",ft,[e("div",gt,[e("div",bt,[t[18]||(t[18]=e("h2",{class:"text-lg font-semibold"},"Share Feedback",-1)),e("button",{onClick:t[2]||(t[2]=s=>F.value=!1),class:"text-gray-500 hover:text-gray-700 text-xl button-animation"}," Ã— ")]),e("div",yt,[t[19]||(t[19]=e("label",{class:"block font-normal text-lg mb-2 text-[#0B0B0B]"},"How would you rate your experience with the activity?",-1)),e("div",ht,[(a(!0),r(T,null,N(A.value,(s,o)=>(a(),r("button",{key:o,onClick:x=>E.value.rating=s.label,class:I(["text-3xl focus:outline-none transition duration-200",E.value.rating===s.label?"text-orange-500":"text-gray-400 opacity-30"])},f(s.icon),11,xt))),128))]),t[20]||(t[20]=e("label",{class:"block font-normal text-lg mb-2 text-[#0B0B0B]"},"Comments (Optional)",-1)),q(e("textarea",{"onUpdate:modelValue":t[3]||(t[3]=s=>E.value.comments=s),class:"w-full border rounded p-2 h-20 resize-none"},null,512),[[Z,E.value.comments]])]),e("div",{class:"p-4"},[e("button",{onClick:Y,class:"w-full bg-[#FF5722] text-white py-2 rounded font-semibold hover:bg-orange-600 button-animation"}," SUBMIT FEEDBACK ")])])])):m("",!0),g.value?(a(),r("div",wt,[e("div",_t,[e("div",Ct,[t[21]||(t[21]=e("div",{class:"w-48 h-36 mx-auto text-[#FF5722]"},[e("img",{src:Re,alt:"karma points"})],-1)),t[22]||(t[22]=e("h2",{class:"text-2xl font-semibold mb-2"},"Congratulations!",-1)),e("p",kt,"You've earned "+f(O(S).activity.karma_points)+" karma points",1)]),e("div",$t,[O(S).activity.need_certificate==="Yes"?(a(),r("button",{key:0,onClick:d,class:"bg-[#FF5722] text-white py-2 px-6 rounded font-semibold hover:bg-orange-600 flex items-center gap-2 button-animation",disabled:W.value},[W.value?(a(),r("span",jt)):m("",!0),J(" "+f(W.value?"GENERATING...":"VIEW CERTIFICATE"),1)],8,Lt)):m("",!0)])])])):m("",!0),_.value?(a(),r("div",St,[e("div",Mt,[e("div",At,[t[23]||(t[23]=e("h2",{class:"text-lg font-semibold"},"Activity Completion",-1)),e("button",{onClick:t[4]||(t[4]=s=>_.value=!1),class:"text-gray-500 hover:text-gray-700 button-animation",style:{"font-size":"28px"}}," Ã— ")]),e("div",Ft,[t[26]||(t[26]=e("label",{class:"block font-normal text-lg text-[#0B0B0B] pb-3"},"How much time you donated while working on the activity?",-1)),e("div",Ot,[e("div",Rt,[e("div",Et,[t[24]||(t[24]=e("label",{class:"text-base font-normal"},"Hours",-1)),q(e("input",{type:"number","onUpdate:modelValue":t[5]||(t[5]=s=>w.value.hours=s),class:"w-24 border rounded-sm px-2 h-8",onInput:t[6]||(t[6]=s=>w.value.hours=Math.max(0,w.value.hours))},null,544),[[Z,w.value.hours]]),V(O(K),{class:"absolute right-2 top-2 size-4",name:"clock"})]),e("div",Bt,[t[25]||(t[25]=e("label",{class:"text-base font-normal"},"Minutes",-1)),q(e("input",{type:"number","onUpdate:modelValue":t[7]||(t[7]=s=>w.value.minutes=s),onInput:t[8]||(t[8]=s=>w.value.minutes=Math.max(0,w.value.minutes)),class:"w-24 border rounded-sm px-2 h-8"},null,544),[[Z,w.value.minutes]]),V(O(K),{class:"absolute right-2 top-2 size-4",name:"clock"})])]),v.value.time?(a(),r("p",It,"Donation time cannot be 0. ")):m("",!0)])]),e("div",Ht,[t[27]||(t[27]=e("label",{class:"block text-lg font-normal mb-1"},"How much percent work has completed?",-1)),e("div",Pt,[q(e("input",{type:"range",min:"0",max:"100","onUpdate:modelValue":t[9]||(t[9]=s=>w.value.progress=s),class:"w-full h-[6px] accent-green-500"},null,512),[[Z,w.value.progress]]),e("span",Ut,f(w.value.progress)+"% ",1)]),v.value.progress?(a(),r("p",Vt," Please update the current progress before proceeding. ")):m("",!0)]),e("div",qt,[t[29]||(t[29]=e("label",{class:"block font-medium mb-2"},"Upload Media",-1)),e("div",Tt,[e("input",{type:"file",multiple:"",onChange:l,class:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"},null,32),t[28]||(t[28]=re('<div class="flex flex-col items-center text-gray-500" data-v-422f0b71><svg width="70" height="60" viewBox="0 0 70 60" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-422f0b71></svg><p class="mt-2 text-lg font-normal" data-v-422f0b71> Drag &amp; drop files or <span class="text-[#FF5722] cursor-pointer" data-v-422f0b71>Browse</span></p><p class="text-xs font-normal pt-2 text-[#999999]" data-v-422f0b71>Supported formats: JPEG, PNG</p></div>',1))]),v.value.image?(a(),r("p",zt," Image upload is required. Please upload an image to continue. ")):m("",!0),e("div",Dt,[(a(!0),r(T,null,N(p.value,(s,o)=>(a(),r("img",{key:o,src:s.preview,alt:"img",class:"w-16 h-16 rounded object-cover"},null,8,Jt))),128))])]),e("div",Nt,[e("button",{onClick:ee,class:"bg-[#FF5722] flex items-center justify-center text-white h-[38px] text-base w-48 rounded-sm text-center font-medium hover:bg-orange-600 button-animation"},[t[31]||(t[31]=e("p",null,"MARK AS COMPLETE",-1)),$.value?(a(),r("div",Zt,t[30]||(t[30]=[e("div",{class:"animate-spin h-full w-full rounded-full border-[2px] flex justify-center items-center border-dotted border-[#fff]"},[e("div",{class:"w-3 h-3 rounded-full border-dashed border-[1px] border-[#fff]"})],-1)]))):m("",!0)])])])])):m("",!0),V(Ee,{modelValue:u.value,"onUpdate:modelValue":t[10]||(t[10]=s=>u.value=s)},null,8,["modelValue"])])])]))}},Wt=le(Gt,[["__scopeId","data-v-422f0b71"]]),Yt={class:"bg-white rounded-lg"},Kt={class:"bg-white p-6 rounded-lg w-full relative"},Xt={class:"bg-white rounded-lg shadow-lg p-6 w-full"},Qt={class:"mb-6"},es={class:"relative"},ts={class:"flex flex-col sm:flex-row gap-4"},ss={class:"flex gap-2 items-center relative w-full sm:w-auto"},os={class:"flex gap-2 items-center relative w-full sm:w-auto"},as={key:0,class:"text-red-500 absolute text-xs -bottom-5"},rs={class:"mb-4 relative"},ls={class:"flex items-center gap-2"},ns={class:"h-8 w-16 flex items-center justify-center border rounded-sm text-base font-normal text-center"},is={class:"mt-1 space-y-1"},us={key:0,class:"text-red-500 text-xs"},cs={key:1,class:"text-red-500 text-xs"},ds={class:"mb-4 relative"},ps={class:"border-dashed border-2 border-gray-300 p-4 sm:p-6 rounded-lg text-center relative min-h-[120px] sm:min-h-[150px]"},ms={key:0,class:"text-red-500 absolute text-xs py-2 pl-1"},vs={class:"flex flex-wrap gap-2 mt-3"},fs=["src"],gs={class:"flex justify-end"},bs=["disabled"],ys={key:0,class:"h-5 w-5"},hs={key:0,class:"text-red-500 text-sm mt-2 text-center"},xs={key:0,class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50"},ws={__name:"SubmitFeedback",props:{activity:{type:Object,required:!1,default:()=>({})},opportunity_activity:{type:Object,required:!1,default:()=>({})},isOpportunityApproved:{type:Boolean,required:!1,default:!0}},setup(U){const b=y(!1),F=D("call");D("auth");const g=ie(),_=D("store"),c=Ae(),u=U,M=y([]),h=y(!1),i=y({hours:0,minutes:0,progress:u.activity.com_percent||0}),C=y({time:!1,progress:!1,image:!1,progress_less:!1}),B=()=>{i.value.progress<0&&(i.value.progress=0),i.value.progress<u.activity.com_percent?(i.value.progress=u.activity.com_percent,C.value.progress_less=!0):C.value.progress_less=!1},R=()=>{let v=!1;return C.value={time:!1,progress:!1,image:!1,progress_less:!1},i.value.hours===0&&i.value.minutes===0&&(C.value.time=!0,v=!0),(i.value.progress===0||i.value.progress===u.activity.com_percent)&&(C.value.progress=!0,v=!0),M.value.length===0&&u.activity.required_feedback_images&&(C.value.image=!0,v=!0),i.value.progress<u.activity.com_percent&&(C.value.progress_less=!0,v=!0),v},E=()=>H(this,null,function*(){if(!R()){h.value=!0;try{let v=yield F("mykartavya.controllers.api.submit_opportunity_activity_report",{name:u.opportunity_activity,data:{duration:i.value.hours*3600+i.value.minutes*60,percent:i.value.progress-(u.activity.com_percent||0),images:M.value}});if(console.log(u.opportunity_activity),v&&v.status==="success"){if(i.value.progress=v.data.com_percent,P.success(v.message||"Activity report submitted successfully",{autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0}),h.value=!1,i.value={hours:0,minutes:0,progress:v.data.com_percent},_.refresh_step=!0,v.data.com_percent===100){const p=g.params.name;c.push(`/opportunity/${p}/`)}}else v&&v.error&&P.error(v.error,{autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0})}catch(v){h.value=!1,P.error(v.message||"Something went wrong while submitting the report",{autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0})}finally{h.value=!1}}}),S=()=>{b.value=!1,c.push("/profile")},w=v=>{const p=v.target.files;if(p.length)for(let $ of p){const k=new FileReader;k.onload=G=>{M.value.push({file:$,preview:k.result})},k.readAsDataURL($)}};return z(()=>i.value.progress,(v,p)=>{u.activity.com_percent<=v&&(C.value.progress=!1)}),z(()=>i.value.hours,(v,p)=>{u.activity.hours<=v&&(C.value.hours=!1)}),z(M,v=>{v.length>0&&(C.value.image=!1)},{deep:!0}),(v,p)=>(a(),r("div",null,[e("div",Yt,[e("div",Kt,[p[13]||(p[13]=e("div",{class:"flex justify-between items-center mb-4"},[e("h2",{class:"text-[19px] font-medium"},"Submit Report")],-1)),e("div",Xt,[e("div",Qt,[p[7]||(p[7]=e("label",{class:"block font-normal text-lg text-[#0B0B0B] pb-3"},"How much time you donated while working on the activity?",-1)),e("div",es,[e("div",ts,[e("div",ss,[p[5]||(p[5]=e("label",{class:"text-base font-normal"},"Hours",-1)),q(e("input",{type:"number","onUpdate:modelValue":p[0]||(p[0]=$=>i.value.hours=$),class:"w-full sm:w-24 border rounded-sm px-2 h-8 sm:h-8",onInput:p[1]||(p[1]=$=>i.value.hours=Math.max(0,i.value.hours))},null,544),[[Z,i.value.hours]]),V(O(K),{class:"absolute right-2 top-2 size-4",name:"clock"})]),e("div",os,[p[6]||(p[6]=e("label",{class:"text-base font-normal"},"Minutes",-1)),q(e("input",{type:"number","onUpdate:modelValue":p[2]||(p[2]=$=>i.value.minutes=$),onInput:p[3]||(p[3]=$=>i.value.minutes=Math.max(0,i.value.minutes)),class:"w-full sm:w-24 border rounded-sm px-2 h-8 sm:h-8"},null,544),[[Z,i.value.minutes]]),V(O(K),{class:"absolute right-2 top-2 size-4",name:"clock"})])]),C.value.time?(a(),r("p",as,"Donation time cannot be 0. ")):m("",!0)])]),e("div",rs,[p[8]||(p[8]=e("label",{class:"block text-lg font-normal mb-1"},"How much percent work has completed?",-1)),e("div",ls,[q(e("input",{type:"range",min:"0",max:"100","onUpdate:modelValue":p[4]||(p[4]=$=>i.value.progress=$),class:"w-full h-[6px] accent-green-500",onInput:B},null,544),[[Z,i.value.progress]]),e("span",ns,f(i.value.progress)+"% ",1)]),e("div",is,[C.value.progress?(a(),r("p",us," Please update the current progress before proceeding. ")):m("",!0),C.value.progress_less?(a(),r("p",cs," Progress cannot be less than current progress ("+f(u.activity.com_percent)+"%). ",1)):m("",!0)])]),e("div",ds,[p[10]||(p[10]=e("label",{class:"block font-medium mb-2"},"Upload Media",-1)),e("div",ps,[e("input",{type:"file",multiple:"",onChange:w,class:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"},null,32),p[9]||(p[9]=re('<div class="flex flex-col items-center text-gray-500" data-v-f0f02bca><svg width="70" height="60" viewBox="0 0 70 60" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-12 h-12 sm:w-16 sm:h-16" data-v-f0f02bca></svg><p class="mt-2 text-base sm:text-lg font-normal" data-v-f0f02bca> Drag &amp; drop files or <span class="text-[#FF5722] cursor-pointer" data-v-f0f02bca>Browse</span></p><p class="text-xs font-normal pt-2 text-[#999999]" data-v-f0f02bca>Supported formats: JPEG, PNG</p></div>',1))]),C.value.image?(a(),r("p",ms," Image upload is required. Please upload an image to continue. ")):m("",!0),e("div",vs,[(a(!0),r(T,null,N(M.value,($,k)=>(a(),r("img",{key:k,src:$.preview,alt:"img",class:"w-12 h-12 sm:w-16 sm:h-16 rounded object-cover"},null,8,fs))),128))])]),e("div",gs,[e("button",{onClick:E,disabled:u.activity.com_percent===100||!u.isOpportunityApproved,class:"bg-[#FF5722] flex items-center justify-center text-white h-[38px] text-sm sm:text-base w-full sm:w-48 rounded-sm text-center font-medium hover:bg-orange-600 transition-all duration-200 active:scale-95 disabled:transform-none disabled:cursor-not-allowed disabled:bg-gray-400"},[e("p",null,f(u.activity.com_percent===100?"COMPLETE":"MARK AS COMPLETE"),1),h.value?(a(),r("div",ys,p[11]||(p[11]=[e("div",{class:"animate-spin h-full w-full rounded-full border-[2px] flex justify-center items-center border-dotted border-[#fff]"},[e("div",{class:"w-3 h-3 rounded-full border-dashed border-[1px] border-[#fff]"})],-1)]))):m("",!0)],8,bs)]),u.isOpportunityApproved?m("",!0):(a(),r("p",hs," This opportunity is not approved yet. You cannot submit feedback until it is approved. "))]),b.value?(a(),r("div",xs,[e("div",{class:"bg-white rounded-lg shadow-lg w-full max-w-[90%] sm:max-w-md p-4 sm:p-6 text-center"},[p[12]||(p[12]=re('<div class="mb-4 sm:mb-6" data-v-f0f02bca><div class="w-32 sm:w-48 h-24 sm:h-36 mx-auto text-[#FF5722]" data-v-f0f02bca><img src="'+Re+'" alt="completion" class="w-full h-full object-contain" data-v-f0f02bca></div><h2 class="text-xl sm:text-2xl font-semibold mb-2" data-v-f0f02bca>Thank You!</h2><p class="text-sm sm:text-base text-gray-600" data-v-f0f02bca>Your activity has been marked as complete</p></div>',1)),e("div",{class:"flex justify-center"},[e("button",{onClick:S,class:"bg-[#FF5722] text-white py-2 px-4 sm:px-6 rounded font-semibold hover:bg-orange-600 flex items-center gap-2 transition-all duration-200 active:scale-95"}," CLOSE ")])])])):m("",!0)])])]))}},_s=le(ws,[["__scopeId","data-v-f0f02bca"]]),Cs={class:"mx-auto py-2"},ks={key:0,class:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md"},$s={class:"text-sm text-red-800"},Ls={key:1,class:"bg-white rounded-lg shadow-md p-6 text-center"},js={key:2,class:"rounded-md border border-gray-200 overflow-visible transition-all duration-300"},Ss={class:"text-lg font-bold text-gray-800 flex items-center font-poppins tracking-wide"},Ms={class:"text-gray-500 hover:text-orange-600 focus:outline-none"},As={class:"px-6 pb-5 pt-2 bg-white rounded-b-md border-t-0 border border-orange-100",style:{overflow:"hidden"}},Fs={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Os={key:0,class:""},Rs={class:"block text-[14px] font-normal text-gray-800 mb-4"},Es={class:"font-bold mr-2"},Bs={class:"font-bold"},Is={key:0,class:"text-red-500 ml-1"},Hs=["onUpdate:modelValue","required","readonly"],Ps={key:0,class:"mt-1 text-sm text-red-600"},Us={key:1,class:""},Vs={class:"block text-[14px] font-normal text-gray-800 mb-4"},qs={class:"font-bold mr-2"},Ts={class:"font-bold"},zs={key:0,class:"text-red-500 ml-1"},Ds=["onUpdate:modelValue","required","readonly"],Js={key:0,class:"mt-1 text-sm text-red-600"},Ns={key:2,class:"relative"},Zs={class:"block text-[14px] font-normal text-gray-800 mb-4"},Gs={class:"font-bold mr-2"},Ws={class:"font-bold"},Ys={key:0,class:"text-red-500 ml-1"},Ks={class:"relative"},Xs=["onUpdate:modelValue","onClick","required","readonly"],Qs=["onClick"],eo={key:0,class:"w-4 h-4 text-orange-600",fill:"currentColor",viewBox:"0 0 20 20"},to={key:0,class:"mt-1 text-sm text-red-600"},so={key:3,class:"mt-2"},oo={class:"block text-[14px] font-normal text-gray-800 mb-4"},ao={class:"font-bold mr-2"},ro={class:"font-bold"},lo={key:0,class:"text-red-500 ml-1"},no={class:"flex gap-2 cursor-pointer pl-0"},io=["id","value","onUpdate:modelValue","disabled"],uo=["for"],co={key:0,class:"mt-1 text-sm text-red-600"},po={key:0,disabled:"",class:"w-full md:w-44 bg-gray-400 text-white font-medium py-2 px-4 rounded-md flex items-center justify-center font-poppins cursor-not-allowed opacity-70"},mo=["disabled"],vo={key:2,class:"text-gray-500 text-sm"},fo={__name:"Survey",props:{formJson:[String,Object,Array],title:String,autoLoad:{type:Boolean,default:!0},surveyId:{type:String,required:!0},userId:{type:String,default:null},activityId:{type:String,default:null}},setup(U){const b=U,F=y([]),g=oe({}),_=oe({}),c=y(""),u=y(!1),M=y(!1),h=D("call"),i=oe({}),C=oe({}),B=y(null),R=y(!1),E=y(!1),S=t=>{B.value=B.value===t?null:t},w=t=>t.mandatory===1||t.mandatory===!0,v=t=>t?t.split(`
`).filter(s=>s.trim()).map(s=>s.trim()):[],p=t=>t?Array.isArray(t)?t:t.split(`
`).filter(s=>s.trim()):[],$=t=>`w-full px-3 py-2 border rounded-md shadow-sm transition duration-200 focus:outline-none focus:ring-0 focus:border-blue-500 ${_[t.name]?"border-red-500":"border-gray-300"}`,k=t=>{R.value||(Object.keys(i).forEach(s=>{s!==t&&(i[s]=!1)}),i[t]=!i[t])},G=(t,s)=>{g[t]=s,i[t]=!1,_[t]&&delete _[t]},Q=t=>{let s=!1;Object.keys(C).forEach(o=>{var x;(x=C[o])!=null&&x.contains(t.target)&&(s=!0)}),s||Object.keys(i).forEach(o=>i[o]=!1)},ee=()=>{if(b.formJson){c.value="",u.value=!1;try{let t=[];typeof b.formJson=="string"?t=Y(JSON.parse(b.formJson)):Array.isArray(b.formJson)?t=b.formJson:typeof b.formJson=="object"&&(t=Y(b.formJson));const s=W(t);s.length>0&&(F.value=s,d(s),u.value=!0)}catch(t){c.value=`Error loading form: ${t.message}`}}},Y=t=>{if(Array.isArray(t))return t;if(t.form_json)return typeof t.form_json=="string"?JSON.parse(t.form_json):t.form_json;if(t.name&&t.label&&t.fieldtype)return[t];throw new Error("Invalid form_json structure")},W=t=>t.filter(s=>s.name&&s.label&&s.fieldtype),d=t=>{Object.keys(g).forEach(s=>delete g[s]),Object.keys(_).forEach(s=>delete _[s]),Object.keys(i).forEach(s=>delete i[s]),t.forEach(s=>{g[s.name]=s.fieldtype==="Check"?[]:"",s.fieldtype==="Select"&&(i[s.name]=!1)})},l=()=>{Object.keys(_).forEach(s=>delete _[s]);const t=[];return F.value.forEach(s=>{const o=g[s.name];w(s)&&(s.fieldtype==="Check"&&(!o||!o.length)?(_[s.name]="Please select at least one option",t.push(s.label)):(!o||o.toString().trim()==="")&&(_[s.name]="This field is required",t.push(s.label)))}),t},A=()=>H(this,null,function*(){M.value=!0;try{const t=l();if(t.length>0){P.error(`Please fill in the following required fields: ${t.join(", ")}`),M.value=!1;return}const s=F.value.map(x=>({question_id:x.name,question_label:x.label,question_type:x.fieldtype,answer:x.fieldtype==="Check"?JSON.stringify(g[x.name]||[]):g[x.name]||""})),o=yield h("mykartavya.controllers.survey.submit_volunteer_survey",{data:JSON.stringify({survey_id:b.surveyId,activity_id:b.activityId,user:b.userId,answers:s})});(o==null?void 0:o.status)==="success"?(P.success("Survey submitted successfully!",{autoClose:2e3}),R.value=!0):P.error("Submission failed: "+((o==null?void 0:o.message)||"Unknown error"),{autoClose:2e3}),M.value=!1}catch(t){console.error("Error submitting form",t),setTimeout(()=>{P.error("Error submitting form",{autoClose:2e3}),M.value=!1},2e3)}});ne(()=>H(this,null,function*(){b.formJson&&b.autoLoad?ee():d(F.value),document.addEventListener("click",Q);try{const t=yield h("mykartavya.controllers.survey.has_submitted_survey",{survey_id:b.surveyId,user:b.userId});if(R.value=t===!0,R.value){yield Be();const s=yield h("mykartavya.controllers.survey.get_volunteer_survey_answers",{survey_id:b.surveyId});for(const o in s){const x=F.value.find(L=>L.name===o);if(x&&x.fieldtype==="Check")try{g[o]=Array.isArray(s[o])?s[o]:JSON.parse(s[o])}catch(L){g[o]=[]}else g[o]=s[o]}}}catch(t){console.error("Check submit status error",t),R.value=!1}finally{E.value=!0}})),Fe(()=>{document.removeEventListener("click",Q)}),z(()=>b.formJson,t=>{t&&b.autoLoad&&ee()},{deep:!0}),z(g,()=>{for(const t of Object.keys(_))g[t]&&_[t]&&delete _[t]},{deep:!0});const n=t=>{const s=C[t];if(!s)return{};const o=s.getBoundingClientRect();return{position:"absolute",left:`${o.left+window.scrollX}px`,top:`${o.bottom+window.scrollY}px`,width:`${o.width}px`,zIndex:9999}};return(t,s)=>(a(),r("div",Cs,[c.value?(a(),r("div",ks,[e("p",$s,f(c.value),1)])):m("",!0),F.value.length===0?(a(),r("div",Ls,s[1]||(s[1]=[e("p",{class:"text-gray-500"},"No form fields available.",-1)]))):m("",!0),F.value.length>0?(a(),r("div",js,[e("div",{class:I(["flex justify-between items-center cursor-pointer px-6 py-3 bg-orange-50 rounded-t-md transition-colors duration-300 group hover:bg-orange-50 focus:outline-none",B.value===0?"bg-orange-50 ":""]),onClick:s[0]||(s[0]=o=>S(0))},[e("p",Ss,f(U.title),1),e("button",Ms,[(a(),r("svg",{class:I(["w-5 h-5 transition-transform duration-300 transform",B.value===0?"rotate-180 text-orange-500":"text-gray-400"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},s[2]||(s[2]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))])],2),V(Ve,{name:"collapse"},{default:Ie(()=>[q(e("div",As,[e("form",{onSubmit:He(A,["prevent"]),class:"space-y-6"},[e("div",Fs,[(a(!0),r(T,null,N(F.value,(o,x)=>(a(),r("div",{key:o.name,class:"form-field"},[o.fieldtype==="Text"?(a(),r("div",Os,[e("label",Rs,[e("span",Es,f(x+1)+".",1),s[3]||(s[3]=J()),e("span",Bs,f(o.label),1),w(o)?(a(),r("span",Is,"*")):m("",!0)]),q(e("input",{"onUpdate:modelValue":L=>g[o.name]=L,type:"text",class:I(["form-input",$(o)]),required:w(o),readonly:R.value},null,10,Hs),[[Z,g[o.name]]]),_[o.name]?(a(),r("div",Ps,f(_[o.name]),1)):m("",!0)])):m("",!0),o.fieldtype==="Small Text"?(a(),r("div",Us,[e("label",Vs,[e("span",qs,f(x+1)+".",1),s[4]||(s[4]=J()),e("span",Ts,f(o.label),1),w(o)?(a(),r("span",zs,"*")):m("",!0)]),q(e("textarea",{"onUpdate:modelValue":L=>g[o.name]=L,class:I(["form-input",$(o)]),required:w(o),readonly:R.value},null,10,Ds),[[Z,g[o.name]]]),_[o.name]?(a(),r("div",Js,f(_[o.name]),1)):m("",!0)])):o.fieldtype==="Select"?(a(),r("div",Ns,[e("label",Zs,[e("span",Gs,f(x+1)+".",1),s[5]||(s[5]=J()),e("span",Ws,f(o.label),1),w(o)?(a(),r("span",Ys,"*")):m("",!0)]),e("div",{class:"relative",ref_for:!0,ref:L=>C[o.name]=L},[e("div",Ks,[q(e("input",{"onUpdate:modelValue":L=>g[o.name]=L,type:"text",class:I(["form-input w-full pr-10 cursor-pointer",$(o)]),onClick:L=>k(o.name),required:w(o),readonly:R.value},null,10,Xs),[[Z,g[o.name]]]),(a(),r("svg",{class:I(["w-4 h-4 text-gray-400 absolute right-3 top-1/2 transform -translate-y-1/2 pointer-events-none transition-transform duration-200",i[o.name]?"rotate-180":""]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},s[6]||(s[6]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))]),(a(),X(Pe,{to:"body"},[q(e("div",{style:Oe(n(o.name)),class:"absolute z-50 w-72 md:w-96 mt-1 bg-white border border-gray-300 rounded-md shadow-xl max-h-40 overflow-auto animate-slideDown"},[(a(!0),r(T,null,N(v(o.options),L=>(a(),r("div",{key:L,onClick:se=>G(o.name,L),class:I(["px-3 py-2 cursor-pointer hover:bg-orange-50 flex items-center justify-between transition-all",g[o.name]===L?"bg-orange-100 text-orange-900 font-medium":"text-gray-900"])},[e("span",null,f(L),1),g[o.name]===L?(a(),r("svg",eo,s[7]||(s[7]=[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"},null,-1)]))):m("",!0)],10,Qs))),128))],4),[[Me,i[o.name]]])]))],512),_[o.name]?(a(),r("div",to,f(_[o.name]),1)):m("",!0)])):o.fieldtype==="Check"?(a(),r("div",so,[e("label",oo,[e("span",ao,f(x+1)+".",1),s[8]||(s[8]=J()),e("span",ro,f(o.label),1),w(o)?(a(),r("span",lo,"*")):m("",!0)]),e("div",no,[(a(!0),r(T,null,N(p(o.options),L=>(a(),r("div",{key:L,class:"flex items-center mb-0"},[q(e("input",{id:`${o.name}-${L}`,type:"checkbox",value:L,"onUpdate:modelValue":se=>g[o.name]=se,class:"h-5 w-5 mt-4 text-secondary cursor-pointer border-gray-300 transition duration-200 focus:outline-none focus:ring-0 focus:border-secondary mr-2",disabled:R.value},null,8,io),[[Ue,g[o.name]]]),e("label",{for:`${o.name}-${L}`,class:"text-md text-gray-700 cursor-pointer m-0 leading-4 align-middle ml-2",style:{display:"inline","vertical-align":"middle"}},f(L),9,uo)]))),128))]),_[o.name]?(a(),r("div",co,f(_[o.name]),1)):m("",!0)])):m("",!0)]))),128))]),E.value&&R.value?(a(),r("button",po," Submitted ")):E.value?(a(),r("button",{key:1,type:"submit",disabled:M.value,class:"w-full md:w-44 bg-orange-600 hover:bg-orange-700 disabled:bg-gray-400 text-white font-medium py-2 px-4 rounded-md transition duration-200 transform hover:scale-105 disabled:transform-none flex items-center justify-center font-poppins"},[M.value?(a(),r(T,{key:0},[s[9]||(s[9]=e("span",null,"Submitting",-1)),s[10]||(s[10]=e("svg",{class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})],-1))],64)):(a(),r(T,{key:1},[J(" Submit ")],64))],8,mo)):(a(),r("div",vo,"Checking submission status..."))],32)],512),[[Me,B.value===0]])]),_:1})])):m("",!0)]))}},go=le(fo,[["__scopeId","data-v-5b67aabc"]]),bo={class:"h-screen w-full"},yo={key:0,class:"w-full bg-orange-100"},ho={class:"max-w-7xl mx-auto py-2 px-4 sm:px-6 lg:px-8"},xo={class:"flex items-center justify-between"},wo={class:"max-w-7xl mx-auto py-3 px-4 sm:px-6 lg:px-8"},_o={class:"flex items-center gap-3"},Co={class:"flex-1"},ko={class:"text-sm text-red-700 mt-1 line-clamp-2"},$o=["src"],Lo={class:"absolute top-20 left-5 sm:left-10 max-w-sm w-[448px] h-[312px] bg-white shadow-lg rounded-lg p-4 border border-gray-200 flex flex-col gap-4 justify-center"},jo={class:"border-b pb-2"},So={class:"text-heading3 font-normal font-poppins mt-1"},Mo={class:"text-secondary font-medium text-caption"},Ao={class:"flex gap-1 items-center",style:{color:"#666666"}},Fo={class:"flex items-center text-bodyh2 font-normal mr-4",style:{color:"#0b0b0b"}},Oo={class:"flex items-center text-gray-600 text-bodyh2 font-normal justify-between border-b pb-2"},Ro={class:"flex justify-center items-center gap-1",style:{color:"#0b0b0b"}},Eo={key:0,class:"flex items-center gap-2 justify-center",style:{color:"#0b0b0b"}},Bo={class:"text-bodyh2 font-normal"},Io={class:"flex space-x-2 border-b pb-2"},Ho=["src"],Po={key:1,class:"w-8 h-8 flex items-center justify-center bg-gray-50"},Uo={class:""},Vo={class:"w-full bg-gray-200 rounded-full h-[5px]"},qo={class:"flex items-center justify-between gap-2"},To={class:"text-caption font-normal mt-1",style:{color:"#0b0b0b"}},zo={class:"flex items-center gap-2 text-xs font-normal"},Do={class:"bg-gray-100 px-4 md:px-10 pt-4"},Jo={key:0,class:"w-full bg-red-50/50"},No={class:"reason-box"},Zo={class:"w-full bg-gray-700"},Go={class:"px-6 md:p-10 bg-gray-100"},Wo={class:"grid gap-6 lg:grid-cols-3 pb-4"},Yo={class:"lg:col-span-2 flex flex-col justify-between items-start"},Ko=["innerHTML"],Xo={class:"flex items-center gap-[12px] flex-col justify-self-start mt-[220px]"},Qo={class:"text-gray-700 font-medium flex items-center space-x-2"},ea={class:"flex items-center gap-3 justify-start w-[230px]"},ta=["aria-label","onClick"],sa={key:0,class:"border px-4 py-4 bg-white rounded-md"},oa={class:"text-heading4 font-medium font-poppins",style:{color:"#0b0b0b"}},aa={class:"mt-10"},ra={class:"flex justify-between"},la={class:"flex items-center"},na={key:0,class:"flex items-center gap-4"},ia={key:1,class:"w-full h-[330px]"},ua=320,ca={__name:"Empower",setup(U){const b=D("auth"),F=[{name:"Facebook",svg:Ge,shareUrl:ae(()=>{var d;return`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(window.location.href)}&quote=${encodeURIComponent((d=c.value)==null?void 0:d.title)}`})},{name:"X",svg:We,shareUrl:ae(()=>{var A,n;const d=`Check out ${(A=c.value)==null?void 0:A.title}`,l=(n=c.value)!=null&&n.sdgs?JSON.parse(c.value.sdgs).map(t=>{var s;return(s=t.sdgs_name)==null?void 0:s.replace(/\s+/g,"")}).join(","):"";return`https://twitter.com/intent/tweet?url=${encodeURIComponent(window.location.href)}&text=${encodeURIComponent(d)}&hashtags=${l}`})},{name:"LinkedIn",svg:Ye,shareUrl:ae(()=>`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(window.location.href)}`)},{name:"WhatsApp",svg:Ke,shareUrl:ae(()=>{var l;const d=`${(l=c.value)==null?void 0:l.title}
${window.location.href}`;return`https://wa.me/?text=${encodeURIComponent(d)}`})}],g=D("call"),_=D("store"),c=y([]),u=ie(),M=D("formatDate"),h=y(null),i=y(!0),C=y(!1),B=y(!1),R=y(!1),E=y(null),S=y([]),w=()=>H(this,null,function*(){var d;try{if(u.params.name){const l=yield g("mykartavya.controllers.survey.get_survey",{name:(d=u==null?void 0:u.params)==null?void 0:d.name});l&&(S.value=l)}}catch(l){console.error("Error fetching survey data:",l)}}),v=()=>H(this,null,function*(){var d,l;try{if(u.params.activity){const A=yield g("mykartavya.controllers.api.opportunity_activity_details",{name:(d=u==null?void 0:u.params)==null?void 0:d.activity});A&&(c.value=A)}else if(u.params.name){const A=yield g("mykartavya.controllers.api.activity_details",{name:(l=u==null?void 0:u.params)==null?void 0:l.name});A&&(c.value=A)}else console.log("No name or activity")}catch(A){console.error("Error fetching activity data:",A)}}),p=y([]),$=()=>H(this,null,function*(){var d;try{let l=(d=c==null?void 0:c.value)==null?void 0:d.sdgs;typeof l=="string"&&(l=JSON.parse(l));let A={sdgs:l==null?void 0:l.map(t=>t.sdgs_name)};const n=yield g("mykartavya.controllers.api.public_opportunities",{filter:A});n&&(p.value=n)}catch(l){console.error("Error fetching activity data:",l)}}),k=()=>H(this,null,function*(){var d;try{const l=yield g("mykartavya.controllers.api.sva_user_data");l&&l.length>0&&(E.value=l[0],B.value=((d=l[0])==null?void 0:d.workflow_state)==="Approved")}catch(l){console.error("Error checking user approval status:",l)}});ne(()=>H(this,null,function*(){yield k(),yield v(),yield $()})),z(()=>_.refresh_step,d=>{d&&(v(),_.refresh_step=!1)},{immediate:!0,deep:!0}),z(()=>{var d;return(d=u==null?void 0:u.params)==null?void 0:d.name},(d,l)=>H(this,null,function*(){d!=l&&(yield v(),yield $())}),{immediate:!0,deep:!0}),z(()=>{var d;return(d=u==null?void 0:u.params)==null?void 0:d.activity},(d,l)=>H(this,null,function*(){d!=l&&(yield v(),yield $())}),{immediate:!0,deep:!0});const G=ua,Q=()=>{h.value&&h.value.scrollTo({left:Math.max(0,h.value.scrollLeft-G),behavior:"smooth"})},ee=()=>{if(h.value){const d=h.value.scrollWidth-h.value.clientWidth;h.value.scrollTo({left:Math.min(d,h.value.scrollLeft+G),behavior:"smooth"})}},Y=()=>{if(!h.value)return;const{scrollLeft:d,scrollWidth:l,clientWidth:A}=h.value;i.value=d<=0;const n=l>A;C.value=!n||d+A>=l};qe(()=>{h.value&&(h.value.addEventListener("scroll",Y),Y())}),ne(()=>{const d=new ResizeObserver(()=>{Y()});h.value&&d.observe(h.value),Fe(()=>{d.disconnect()}),w()}),window.addEventListener("resize",()=>{});const W=d=>{const n=(window.innerWidth-600)/2,t=(window.innerHeight-400)/2;window.open(d.shareUrl.value,"social-share",`width=600,height=400,left=${n},top=${t}`)};return z(()=>R,d=>{},{deep:!0}),(d,l)=>{var A,n,t,s,o,x,L,se,ue,ce,de,pe,me,ve,fe,ge,be,ye,he,xe,we,_e,Ce,ke,$e,Le,je,Se;return a(),r("div",bo,[!B.value&&((A=E.value)==null?void 0:A.workflow_state)!=="Rejected"?(a(),r("div",yo,[e("div",ho,[e("div",xo,[l[5]||(l[5]=re('<div class="flex items-center" data-v-20bcda64><span class="flex p-1.5 rounded-lg bg-orange-100" data-v-20bcda64><svg class="h-4 w-4 text-orange-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-20bcda64><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" data-v-20bcda64></path></svg></span><p class="ml-2 text-sm font-medium text-orange-800" data-v-20bcda64><span class="md:hidden" data-v-20bcda64>Account pending approval</span><span class="hidden md:inline" data-v-20bcda64>Your account is pending approval. Some features may be limited.</span></p></div>',1)),e("button",{onClick:l[0]||(l[0]=j=>R.value=!0),class:"bg-orange-100 hover:bg-orange-200 px-4 py-1.5 rounded-sm text-sm font-medium text-orange-800 flex items-center gap-1.5 transition-all duration-200 button-animation"},l[4]||(l[4]=[J(" Request for Approval "),e("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M6 12L10 8L6 4",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]))])])])):m("",!0),((n=E.value)==null?void 0:n.workflow_state)==="Rejected"&&((t=E.value)!=null&&t.custom_remarks)?(a(),r("div",{key:1,class:I(["w-full bg-red-50/50",{"mt-16":!B.value}])},[e("div",wo,[e("div",_o,[l[7]||(l[7]=e("div",{class:"w-8 h-8 min-w-8 min-h-8 bg-red-100 rounded-full flex items-center justify-center flex-shrink-0"},[e("svg",{class:"w-4 h-4 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",Co,[l[6]||(l[6]=e("div",{class:"flex items-center gap-2"},[e("h3",{class:"text-sm font-medium text-red-800"},"Rejection Reason"),e("span",{class:"text-xs text-red-600 bg-red-100 px-2 py-0.5 rounded-full"},"Account Rejected")],-1)),e("p",ko,f(E.value.custom_remark),1)])])])],2)):m("",!0),V(Ee,{modelValue:R.value,"onUpdate:modelValue":l[1]||(l[1]=j=>R.value=j)},null,8,["modelValue"]),e("section",{class:I({"mt-[8px]":!B.value})},[c.value?(a(),r("div",{key:0,class:I(["w-full relative h-[456px] md:h-[456px] back-img flex items-center",{"mt-[8px]":!B.value,"mt-[60px]":B.value}])},[(s=c.value)!=null&&s.activity_image?(a(),r("img",{key:0,src:((o=c.value)==null?void 0:o.activity_image)||"https://via.placeholder.com/456x456",class:"w-full h-full",alt:""},null,8,$o)):m("",!0),e("div",Lo,[e("div",jo,[e("h2",So,f((x=c.value)==null?void 0:x.title),1),e("span",Mo,f((L=c.value)==null?void 0:L.activity_type),1)]),e("div",Ao,[l[8]||(l[8]=e("svg",{width:"16",height:"15",viewBox:"0 0 16 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M1.33331 7.00033C1.33331 4.48633 1.33331 3.22899 2.11465 2.44833C2.89598 1.66766 4.15265 1.66699 6.66665 1.66699H9.33331C11.8473 1.66699 13.1046 1.66699 13.8853 2.44833C14.666 3.22966 14.6666 4.48633 14.6666 7.00033V8.33366C14.6666 10.8477 14.6666 12.105 13.8853 12.8857C13.104 13.6663 11.8473 13.667 9.33331 13.667H6.66665C4.15265 13.667 2.89531 13.667 2.11465 12.8857C1.33398 12.1043 1.33331 10.8477 1.33331 8.33366V7.00033Z",stroke:"#666666","stroke-width":"0.75"}),e("path",{d:"M4.66666 1.66699V0.666992M11.3333 1.66699V0.666992M1.66666 5.00033H14.3333",stroke:"#666666","stroke-width":"0.75","stroke-linecap":"round"}),e("path",{d:"M12 10.3333C12 10.5101 11.9298 10.6797 11.8047 10.8047C11.6797 10.9298 11.5101 11 11.3333 11C11.1565 11 10.987 10.9298 10.8619 10.8047C10.7369 10.6797 10.6667 10.5101 10.6667 10.3333C10.6667 10.1565 10.7369 9.98695 10.8619 9.86193C10.987 9.7369 11.1565 9.66667 11.3333 9.66667C11.5101 9.66667 11.6797 9.7369 11.8047 9.86193C11.9298 9.98695 12 10.1565 12 10.3333ZM12 7.66667C12 7.84348 11.9298 8.01305 11.8047 8.13807C11.6797 8.2631 11.5101 8.33333 11.3333 8.33333C11.1565 8.33333 10.987 8.2631 10.8619 8.13807C10.7369 8.01305 10.6667 7.84348 10.6667 7.66667C10.6667 7.48986 10.7369 7.32029 10.8619 7.19526C10.987 7.07024 11.1565 7 11.3333 7C11.5101 7 11.6797 7.07024 11.8047 7.19526C11.9298 7.32029 12 7.48986 12 7.66667ZM8.66667 10.3333C8.66667 10.5101 8.59643 10.6797 8.4714 10.8047C8.34638 10.9298 8.17681 11 8 11C7.82319 11 7.65362 10.9298 7.5286 10.8047C7.40357 10.6797 7.33333 10.5101 7.33333 10.3333C7.33333 10.1565 7.40357 9.98695 7.5286 9.86193C7.65362 9.7369 7.82319 9.66667 8 9.66667C8.17681 9.66667 8.34638 9.7369 8.4714 9.86193C8.59643 9.98695 8.66667 10.1565 8.66667 10.3333ZM8.66667 7.66667C8.66667 7.84348 8.59643 8.01305 8.4714 8.13807C8.34638 8.2631 8.17681 8.33333 8 8.33333C7.82319 8.33333 7.65362 8.2631 7.5286 8.13807C7.40357 8.01305 7.33333 7.84348 7.33333 7.66667C7.33333 7.48986 7.40357 7.32029 7.5286 7.19526C7.65362 7.07024 7.82319 7 8 7C8.17681 7 8.34638 7.07024 8.4714 7.19526C8.59643 7.32029 8.66667 7.48986 8.66667 7.66667ZM5.33333 10.3333C5.33333 10.5101 5.2631 10.6797 5.13807 10.8047C5.01305 10.9298 4.84348 11 4.66667 11C4.48986 11 4.32029 10.9298 4.19526 10.8047C4.07024 10.6797 4 10.5101 4 10.3333C4 10.1565 4.07024 9.98695 4.19526 9.86193C4.32029 9.7369 4.48986 9.66667 4.66667 9.66667C4.84348 9.66667 5.01305 9.7369 5.13807 9.86193C5.2631 9.98695 5.33333 10.1565 5.33333 10.3333ZM5.33333 7.66667C5.33333 7.84348 5.2631 8.01305 5.13807 8.13807C5.01305 8.2631 4.84348 8.33333 4.66667 8.33333C4.48986 8.33333 4.32029 8.2631 4.19526 8.13807C4.07024 8.01305 4 7.84348 4 7.66667C4 7.48986 4.07024 7.32029 4.19526 7.19526C4.32029 7.07024 4.48986 7 4.66667 7C4.84348 7 5.01305 7.07024 5.13807 7.19526C5.2631 7.32029 5.33333 7.48986 5.33333 7.66667Z",fill:"#666666"})],-1)),e("span",Fo,f(O(M)((se=c.value)==null?void 0:se.start_date))+" - "+f(O(M)((ue=c.value)==null?void 0:ue.end_date)),1)]),e("div",Oo,[e("span",Ro,[V(O(K),{name:"clock",class:"size-4 text-[#666666]"}),J(" "+f((de=(ce=c.value)==null?void 0:ce.hours)!=null?de:"0")+" hr ",1)]),(pe=c.value)!=null&&pe.karma_points?(a(),r("span",Eo,[l[9]||(l[9]=e("svg",{width:"16",height:"14",viewBox:"0 0 16 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M15.5002 3.66602C15.5002 2.28518 12.8885 1.16602 9.66683 1.16602C6.44516 1.16602 3.8335 2.28518 3.8335 3.66602M15.5002 3.66602V6.99935C15.5002 7.84935 14.5118 8.59935 13.0002 9.05102C12.0552 9.33435 10.906 9.49935 9.66683 9.49935C8.42766 9.49935 7.2785 9.33352 6.3335 9.05102C4.82266 8.59935 3.8335 7.84935 3.8335 6.99935V3.66602M15.5002 3.66602C15.5002 4.51602 14.5118 5.26602 13.0002 5.71768C12.0552 6.00102 10.906 6.16602 9.66683 6.16602C8.42766 6.16602 7.2785 6.00018 6.3335 5.71768C4.82266 5.26602 3.8335 4.51602 3.8335 3.66602",stroke:"#FF5722","stroke-linecap":"round","stroke-linejoin":"round"}),e("path",{d:"M0.5 6.9994V10.3327C0.5 11.1827 1.48917 11.9327 3 12.3844C3.945 12.6677 5.09417 12.8327 6.33333 12.8327C7.5725 12.8327 8.72167 12.6669 9.66667 12.3844C11.1775 11.9327 12.1667 11.1827 12.1667 10.3327V9.4994M0.5 6.9994C0.5 6.0019 1.8625 5.14107 3.83333 4.74023M0.5 6.9994C0.5 7.8494 1.48917 8.5994 3 9.05107C3.945 9.3344 5.09417 9.4994 6.33333 9.4994C6.9125 9.4994 7.47167 9.46357 8 9.39607",stroke:"#FF5722","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),e("span",Bo,f((ve=(me=c.value)==null?void 0:me.karma_points)==null?void 0:ve.toLocaleString())+" Points",1)])):m("",!0)]),e("div",Io,[(fe=c.value)!=null&&fe.sdgs?(a(!0),r(T,{key:0},N(JSON.parse((ge=c.value)==null?void 0:ge.sdgs),j=>{var te;return a(),r("div",null,[j!=null&&j.image?(a(),r("img",{key:0,src:j.image,class:"w-8 h-8"},null,8,Ho)):(a(),r("span",Po,f((te=j==null?void 0:j.sdgs_name)==null?void 0:te.charAt(0)),1))])}),256)):m("",!0)]),e("div",Uo,[e("div",Vo,[e("div",{class:"bg-green-500 h-[5px] rounded-full",style:Oe(`width:${(ye=(be=c.value)==null?void 0:be.com_percent)!=null?ye:0}%`)},null,4)]),e("div",qo,[e("p",To,f((xe=(he=c.value)==null?void 0:he.com_percent)!=null?xe:0)+" % completed ",1),e("div",zo,[V(O(K),{name:"clock",class:"size-4 text-[#666666]"}),J(" "+f((we=c.value)!=null&&we.donet_hours?(((_e=c.value)==null?void 0:_e.donet_hours)/60/60).toFixed(2):"0")+" hr ",1)])])])])],2)):m("",!0)],2),e("div",Do,[O(b).isLoggedIn&&((Ce=c.value)==null?void 0:Ce.completion_wf_state)=="Rejected"?(a(),r("div",Jo,[e("div",No,[l[10]||(l[10]=e("strong",null,"Reason for Rejection:",-1)),J(" "+f((ke=c.value)==null?void 0:ke.remarks),1)])])):m("",!0)]),e("section",Zo,[e("div",Go,[e("div",Wo,[e("div",Yo,[e("div",{class:"text-[14px] text-[#666666] text-justify font-normal",innerHTML:($e=c.value)==null?void 0:$e.activity_description},null,8,Ko),e("div",Xo,[e("span",Qo,[V(O(Xe),{class:"w-4 h-4 text-[#666666]"}),l[11]||(l[11]=e("span",{class:"text-bodyh1 font-medium font-poppins",style:{color:"#0b0b0b"}},"Share activity with others",-1))]),e("div",ea,[(a(),r(T,null,N(F,j=>e("button",{key:j.name,"aria-label":j.name,onClick:te=>W(j),class:"p-1.5 bg-white rounded-full hover:bg-gray-300"},[(a(),X(Te(j.svg),{class:"w-5 h-5 text-gray-600"}))],8,ta)),64))])])]),e("div",null,[O(u).params.name&&O(u).params.activity?(a(),X(_s,{activity:c.value,opportunity_activity:O(u).params.activity,isOpportunityApproved:B.value,key:"feedback-"+((Le=c.value)==null?void 0:Le.activity)},null,8,["activity","opportunity_activity","isOpportunityApproved"])):(a(),X(Wt,{activity:c.value,key:"stepper-"+((je=c.value)==null?void 0:je.activity)},null,8,["activity"]))])]),S.value.length>0?(a(),r("div",sa,[e("h2",oa,f(S.value.length>0?"Survey":""),1),!O(u).params.activity&&S.value.length>0?(a(!0),r(T,{key:0},N(S.value,j=>{var te;return a(),X(go,{key:j.name,formJson:j.form_json,title:j.title,surveyId:j.name,userId:(te=d.user)==null?void 0:te.email,activityId:O(u).params.name,deadline:j.deadline},null,8,["formJson","title","surveyId","userId","activityId","deadline"])}),128)):m("",!0)])):m("",!0),e("div",aa,[e("div",ra,[l[12]||(l[12]=e("h2",{class:"text-heading4 font-medium font-poppins",style:{color:"#0b0b0b"}}," Related Opportunities ",-1)),e("div",la,[V(O(K),{onClick:l[2]||(l[2]=j=>!i.value&&Q),class:I(["size-5",i.value?"text-gray-500 cursor-not-allowed opacity-50":"text-gray-700 cursor-pointer"]),name:"chevron-left",disabled:i.value},null,8,["class","disabled"]),V(O(K),{onClick:l[3]||(l[3]=j=>!C.value&&ee),class:I(["size-5",C.value?"text-gray-500 cursor-not-allowed opacity-50":"text-gray-700 cursor-pointer"]),name:"chevron-right",disabled:C.value},null,8,["class","disabled"])])]),e("div",{ref_key:"scrollContainer",ref:h,class:"py-4 w-full overflow-x-scroll"},[((Se=p.value)==null?void 0:Se.length)>0?(a(),r("div",na,[(a(!0),r(T,null,N(p.value,j=>(a(),X(Ze,{key:j.name,item:j,mode:"opportunity",class:"w-[320px] min-w-[320px] max-w-[320px]"},null,8,["item"]))),128))])):(a(),r("div",ia,[V(Ne)]))],512)])])])])}}},wa=le(ca,[["__scopeId","data-v-20bcda64"]]);export{wa as default};
