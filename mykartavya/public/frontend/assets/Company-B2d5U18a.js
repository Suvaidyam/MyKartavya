var f=(X,y,v)=>new Promise((i,a)=>{var o=p=>{try{x(v.next(p))}catch(c){a(c)}},w=p=>{try{x(v.throw(p))}catch(c){a(c)}},x=p=>p.done?i(p.value):Promise.resolve(p.value).then(o,w);x((v=v.apply(X,y)).next())});import{_ as E,r as b,o as F,c as m,a as e,n as S,A as R,m as M,t as h,s as n,f as s,v as u,ae as _,F as P,h as V,i as D,z as I,j as g}from"./index-B6yJHTYC.js";import{l as d}from"./index-3hA_OXWC.js";/* empty css              */const $={class:"max-w-[1920px] mx-auto px-10 pt-[82px] pb-4 bg-gray-50"},A={class:"bg-white rounded-lg shadow mt-4"},L={class:"p-6"},T={key:0,class:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded relative",role:"alert"},Y={class:"block sm:inline"},j={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},z={class:"md:col-span-2"},H=["value"],G=["value"],J=["value"],K={class:"mt-6"},O=["disabled"],Q={__name:"Company",setup(X){const y=D("call"),v=I(),i=b(!1),a=b(null);b(null);const o=b({registration_type:"Self Registration",registration_date:"",company_name:"",first_name:"",last_name:"",email:"",designation:"",phone:"",mobile_number:"",address:"",country:"India",state:"",city:"",pincode:"",number_of_employees:"",clear_vision:"Yes",volunteering_csr_activities:"",employee_engagement:""}),w=()=>{a.value=null;const r=["company_name","registration_date","first_name","last_name","email","designation","mobile_number","address","country","state","city","pincode","number_of_employees","clear_vision","volunteering_csr_activities","employee_engagement"];for(const k of r)if(!o.value[k])return a.value=`Please fill in ${k.replace(/_/g," ")}.`,d.error(a.value,{position:"top-right",autoClose:3e3,hideProgressBar:!1}),!1;if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o.value.email))return a.value="Please enter a valid email address.",d.error(a.value,{position:"top-right",autoClose:3e3,hideProgressBar:!1}),!1;if(!/^\d{10}$/.test(o.value.mobile_number))return this.error="Mobile number must be exactly 10 digits.",this.toast.error(this.error,{position:"top-right",autoClose:3e3,hideProgressBar:!1}),!1;if(o.value.phone&&!phoneRegex.test(o.value.phone))return a.value="Phone number must be exactly 10 digits.",d.error(a.value,{position:"top-right",autoClose:3e3,hideProgressBar:!1}),!1;if(!/^\d{6}$/.test(o.value.pincode))return a.value="Pincode must be exactly 6 digits.",d.error(a.value,{position:"top-right",autoClose:3e3,hideProgressBar:!1}),!1;if(parseInt(o.value.number_of_employees)<1)return a.value="Number of employees must be at least 1.",d.error(a.value,{position:"top-right",autoClose:3e3,hideProgressBar:!1}),!1;const l=["volunteering_csr_activities","employee_engagement"];for(const k of l){const C=parseFloat(o.value[k]);if(isNaN(C)||C<0||C>100)return a.value=`${k.replace(/_/g," ")} must be between 0 and 100.`,d.error(a.value,{position:"top-right",autoClose:3e3,hideProgressBar:!1}),!1}return!0},x=()=>f(this,null,function*(){try{if(!w())return;i.value=!0;const r=yield y("mykartavya.mykartavya.api.register_company",{registration_type:o.value.registration_type,registration_date:o.value.registration_date,company_name:o.value.company_name,first_name:o.value.first_name,last_name:o.value.last_name,email:o.value.email,designation:o.value.designation,phone:o.value.phone,mobile_number:o.value.mobile_number,address:o.value.address,country:o.value.country,state:o.value.state,city:o.value.city,pincode:o.value.pincode,number_of_employees:o.value.number_of_employees,clear_vision:o.value.clear_vision,volunteering_csr_activities:o.value.volunteering_csr_activities,employee_engagement:o.value.employee_engagement});if(r.status==="error")throw new Error(r.message);d.success("Company Registration Successful! Please check your email for login credentials.",{position:"top-right",autoClose:5e3,hideProgressBar:!1}),setTimeout(()=>{v.push("/")},2e3)}catch(r){console.error("Error submitting form:",r),d.error(r.message||"Failed to register company. Please try again.",{position:"top-right",autoClose:5e3,hideProgressBar:!1})}finally{i.value=!1}}),p=b([]),c=b([]),q=b([]),U=()=>f(this,null,function*(){try{i.value=!0;const r=yield y("mykartavya.controllers.api.country_data");p.value=r||[]}catch(r){console.error("Error fetching countries:",r),d.error("Failed to load countries. Please try again.",{position:"top-right",autoClose:3e3,hideProgressBar:!1})}finally{i.value=!1}}),N=()=>f(this,null,function*(){try{if(!o.value.country)return;i.value=!0;const r=yield y("mykartavya.controllers.api.state_data",{country:o.value.country});c.value=r||[],o.value.state="",o.value.city=""}catch(r){console.error("Error fetching states:",r),d.error("Failed to load states. Please try again.",{position:"top-right",autoClose:3e3,hideProgressBar:!1})}finally{i.value=!1}}),B=()=>f(this,null,function*(){try{if(!o.value.state)return;i.value=!0;const r=yield y("mykartavya.controllers.api.city_data",{state:o.value.state});q.value=r||[],o.value.city=""}catch(r){console.error("Error fetching cities:",r),d.error("Failed to load cities. Please try again.",{position:"top-right",autoClose:3e3,hideProgressBar:!1})}finally{i.value=!1}});return F(()=>f(this,null,function*(){yield U(),o.value.country&&(yield N())})),(r,t)=>(g(),m("div",$,[e("div",A,[e("div",L,[t[38]||(t[38]=e("h2",{class:"text-xl font-semibold text-gray-700 mb-4"},"Company Registration",-1)),e("form",{onSubmit:R(x,["prevent"]),class:S(["space-y-8",{loading:i.value}])},[a.value?(g(),m("div",T,[e("span",Y,h(a.value),1)])):M("",!0),e("div",j,[e("div",null,[t[17]||(t[17]=e("label",{class:"block text-bodyh1 font-normal text-gray-700 mb-1"},[s(" Company Name "),e("span",{class:"text-red-500 pt-2"},"*")],-1)),n(e("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>o.value.company_name=l),type:"text",placeholder:"Enter Company Name",required:"",class:"block w-full border border-gray-300 text-bodyh2 rounded py-2 px-3 focus:outline-none focus:ring focus:ring-orange-200"},null,512),[[u,o.value.company_name]])]),e("div",null,[t[18]||(t[18]=e("label",{class:"block text-bodyh1 font-normal text-gray-700 mb-1"},[s(" Registration Date "),e("span",{class:"text-red-500 pt-2"},"*")],-1)),n(e("input",{"onUpdate:modelValue":t[1]||(t[1]=l=>o.value.registration_date=l),type:"date",required:"",class:"block w-full border border-gray-300 text-bodyh2 rounded py-2 px-3 focus:outline-none focus:ring focus:ring-orange-200"},null,512),[[u,o.value.registration_date]])]),e("div",null,[t[19]||(t[19]=e("label",{class:"block text-bodyh1 font-normal text-gray-700 mb-1"},[s(" Email "),e("span",{class:"text-red-500 pt-2"},"*")],-1)),n(e("input",{"onUpdate:modelValue":t[2]||(t[2]=l=>o.value.email=l),type:"email",placeholder:"company@example.com",required:"",class:"block w-full border border-gray-300 text-bodyh2 rounded py-2 px-3 focus:outline-none focus:ring focus:ring-orange-200"},null,512),[[u,o.value.email]])]),e("div",null,[t[20]||(t[20]=e("label",{class:"block text-bodyh1 font-normal text-gray-700 mb-1"},[s(" First Name "),e("span",{class:"text-red-500 pt-2"},"*")],-1)),n(e("input",{"onUpdate:modelValue":t[3]||(t[3]=l=>o.value.first_name=l),type:"text",placeholder:"First Name",required:"",class:"block w-full border border-gray-300 text-bodyh2 rounded py-2 px-3 focus:outline-none focus:ring focus:ring-orange-200"},null,512),[[u,o.value.first_name]])]),e("div",null,[t[21]||(t[21]=e("label",{class:"block text-bodyh1 font-normal text-gray-700 mb-1"},[s(" Last Name "),e("span",{class:"text-red-500 pt-2"},"*")],-1)),n(e("input",{"onUpdate:modelValue":t[4]||(t[4]=l=>o.value.last_name=l),type:"text",placeholder:"Last Name",required:"",class:"block w-full border border-gray-300 text-bodyh2 rounded py-2 px-3 focus:outline-none focus:ring focus:ring-orange-200"},null,512),[[u,o.value.last_name]])]),e("div",null,[t[22]||(t[22]=e("label",{class:"block text-bodyh1 font-normal text-gray-700 mb-1"},[s(" Designation "),e("span",{class:"text-red-500 pt-2"},"*")],-1)),n(e("input",{"onUpdate:modelValue":t[5]||(t[5]=l=>o.value.designation=l),type:"text",placeholder:"e.g., Director, Manager",required:"",class:"block w-full border border-gray-300 text-bodyh2 rounded py-2 px-3 focus:outline-none focus:ring focus:ring-orange-200"},null,512),[[u,o.value.designation]])]),e("div",null,[t[23]||(t[23]=e("label",{class:"block text-bodyh1 font-normal text-gray-700 mb-1"},[s(" Mobile Number "),e("span",{class:"text-red-500 pt-2"},"*")],-1)),n(e("input",{"onUpdate:modelValue":t[6]||(t[6]=l=>o.value.mobile_number=l),type:"tel",placeholder:"+91 XXXXX XXXXXr",maxlength:"10",pattern:"\\d{10}",class:"block w-full border border-gray-300 text-bodyh2 rounded py-2 px-3 focus:outline-none focus:ring focus:ring-orange-200"},null,512),[[u,o.value.mobile_number]])]),e("div",null,[t[24]||(t[24]=e("label",{class:"block text-bodyh1 font-normal text-gray-700 mb-1"}," Phone ",-1)),n(e("input",{"onUpdate:modelValue":t[7]||(t[7]=l=>o.value.phone=l),type:"tel",placeholder:"+91 XXXXX XXXXX",class:"block w-full border border-gray-300 text-bodyh2 rounded py-2 px-3 focus:outline-none focus:ring focus:ring-orange-200"},null,512),[[u,o.value.phone]])]),e("div",z,[t[25]||(t[25]=e("label",{class:"block text-bodyh1 font-normal text-gray-700 mb-1"},[s(" India Headquarters Address "),e("span",{class:"text-red-500 pt-2"},"*")],-1)),n(e("textarea",{"onUpdate:modelValue":t[8]||(t[8]=l=>o.value.address=l),rows:"3",placeholder:"Enter complete address with landmarks",required:"",class:"block w-full border border-gray-300 text-bodyh2 rounded py-2 px-3 focus:outline-none focus:ring focus:ring-orange-200"},null,512),[[u,o.value.address]])]),e("div",null,[t[27]||(t[27]=e("label",{class:"block text-bodyh1 font-normal text-gray-700 mb-1"},[s(" Country "),e("span",{class:"text-red-500 pt-2"},"*")],-1)),n(e("select",{"onUpdate:modelValue":t[9]||(t[9]=l=>o.value.country=l),onChange:N,required:"",class:"block w-full border border-gray-300 text-bodyh2 rounded py-2 px-3 focus:outline-none focus:ring focus:ring-orange-200"},[t[26]||(t[26]=e("option",{value:"",disabled:""},"Select Country",-1)),(g(!0),m(P,null,V(p.value,l=>(g(),m("option",{key:l.name,value:l.name},h(l.label||l.name),9,H))),128))],544),[[_,o.value.country]])]),e("div",null,[t[29]||(t[29]=e("label",{class:"block text-bodyh1 font-normal text-gray-700 mb-1"},[s(" State "),e("span",{class:"text-red-500 pt-2"},"*")],-1)),n(e("select",{"onUpdate:modelValue":t[10]||(t[10]=l=>o.value.state=l),onChange:B,required:"",class:"block w-full border border-gray-300 text-bodyh2 rounded py-2 px-3 focus:outline-none focus:ring focus:ring-orange-200"},[t[28]||(t[28]=e("option",{value:"",disabled:""},"Select State",-1)),(g(!0),m(P,null,V(c.value,l=>(g(),m("option",{key:l.name,value:l.name},h(l.state_name||l.name),9,G))),128))],544),[[_,o.value.state]])]),e("div",null,[t[31]||(t[31]=e("label",{class:"block text-bodyh1 font-normal text-gray-700 mb-1"},[s(" City "),e("span",{class:"text-red-500 pt-2"},"*")],-1)),n(e("select",{"onUpdate:modelValue":t[11]||(t[11]=l=>o.value.city=l),required:"",class:"block w-full border border-gray-300 text-bodyh2 rounded py-2 px-3 focus:outline-none focus:ring focus:ring-orange-200"},[t[30]||(t[30]=e("option",{value:"",disabled:""},"Select City",-1)),(g(!0),m(P,null,V(q.value,l=>(g(),m("option",{key:l.name,value:l.name},h(l.district_name||l.name),9,J))),128))],512),[[_,o.value.city]])]),e("div",null,[t[32]||(t[32]=e("label",{class:"block text-bodyh1 font-normal text-gray-700 mb-1"},[s(" Pincode "),e("span",{class:"text-red-500 pt-2"},"*")],-1)),n(e("input",{"onUpdate:modelValue":t[12]||(t[12]=l=>o.value.pincode=l),type:"text",placeholder:"Enter PIN code",maxlength:"6",pattern:"\\d{6}",required:"",oninput:"this.value=this.value.replace(/[^0-9]/g,'').slice(0,6)",class:"block w-full border border-gray-300 text-bodyh2 rounded py-2 px-3 focus:outline-none focus:ring focus:ring-orange-200"},null,512),[[u,o.value.pincode]])]),e("div",null,[t[33]||(t[33]=e("label",{class:"block text-bodyh1 font-normal text-gray-700 mb-1"},[s(" Number of Employees "),e("span",{class:"text-red-500 pt-2"},"*")],-1)),n(e("input",{"onUpdate:modelValue":t[13]||(t[13]=l=>o.value.number_of_employees=l),type:"number",min:"1",required:"",class:"block w-full border border-gray-300 text-bodyh2 rounded py-2 px-3 focus:outline-none focus:ring focus:ring-orange-200"},null,512),[[u,o.value.number_of_employees]])]),e("div",null,[t[35]||(t[35]=e("label",{class:"block text-bodyh1 font-normal text-gray-700 mb-1"},[s(" Clear Vision "),e("span",{class:"text-red-500 pt-2"},"*")],-1)),n(e("select",{"onUpdate:modelValue":t[14]||(t[14]=l=>o.value.clear_vision=l),required:"",class:"block w-full border border-gray-300 text-bodyh2 rounded py-2 px-3 focus:outline-none focus:ring focus:ring-orange-200"},t[34]||(t[34]=[e("option",{value:"Yes"},"Yes",-1),e("option",{value:"No"},"No",-1)]),512),[[_,o.value.clear_vision]])]),e("div",null,[t[36]||(t[36]=e("label",{class:"block text-bodyh1 font-normal text-gray-700 mb-1"},[s(" Volunteering CSR Activities Cost (%) "),e("span",{class:"text-red-500 pt-2"},"*")],-1)),n(e("input",{"onUpdate:modelValue":t[15]||(t[15]=l=>o.value.volunteering_csr_activities=l),type:"number",min:"0",max:"100",required:"",class:"block w-full border border-gray-300 text-bodyh2 rounded py-2 px-3 focus:outline-none focus:ring focus:ring-orange-200"},null,512),[[u,o.value.volunteering_csr_activities]])]),e("div",null,[t[37]||(t[37]=e("label",{class:"block text-bodyh1 font-normal text-gray-700 mb-1"},[s(" Employee Engagement Coverage (%) "),e("span",{class:"text-red-500 pt-2"},"*")],-1)),n(e("input",{"onUpdate:modelValue":t[16]||(t[16]=l=>o.value.employee_engagement=l),type:"number",min:"0",max:"100",required:"",class:"block w-full border border-gray-300 text-bodyh2 rounded py-2 px-3 focus:outline-none focus:ring focus:ring-orange-200"},null,512),[[u,o.value.employee_engagement]])])]),e("div",K,[e("button",{type:"submit",class:"bg-orange-500 text-white font-semibold py-2 px-4 rounded-sm hover:bg-orange-600 transition",disabled:i.value},h(i.value?"Registering...":"Register Company"),9,O)])],34)])])]))}},oe=E(Q,[["__scopeId","data-v-03122736"]]);export{oe as default};
