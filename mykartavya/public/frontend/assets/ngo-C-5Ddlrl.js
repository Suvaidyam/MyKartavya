var C=(z,b,p)=>new Promise((x,a)=>{var d=r=>{try{m(p.next(r))}catch(i){a(i)}},v=r=>{try{m(p.throw(r))}catch(i){a(i)}},m=r=>r.done?x(r.value):Promise.resolve(r.value).then(d,v);m((p=p.apply(z,b)).next())});import{r as y,s as k,o as Y,C as Z,c as l,a as e,b as ee,l as c,v as j,x as $,t as u,n as N,F as L,g as O,e as w,i as te,A as se,B as oe,h as n}from"./index-CuugkmVJ.js";import{F as ae}from"./Footer-BKIatK0r.js";import"./index-CKTJhSSS.js";/* empty css              */const re={class:"min-h-screen bg-gray-50"},le={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},ne={class:"pt-12 md:pt-20 pb-4 space-y-6"},ie={class:"flex flex-wrap gap-4 items-center justify-center md:justify-start"},ue={class:"flex items-center border rounded-lg px-3 bg-white shadow-sm hover:shadow-md transition-shadow w-full md:w-auto"},ce={class:"relative w-full md:w-auto"},de={class:"text-sm"},ve={key:0,class:"absolute top-full left-0 right-0 mt-1 border border-gray-300 bg-white rounded-lg shadow-lg z-20 max-h-60 overflow-hidden"},me={class:"p-2 border-b border-gray-200"},ye={class:"max-h-48 overflow-auto"},fe=["onClick"],pe={key:0,class:"px-4 py-2 text-gray-500 text-sm"},xe={class:"relative w-full md:w-auto"},he={class:"text-sm"},ge={key:0,class:"absolute top-full left-0 right-0 mt-1 border border-gray-300 bg-white rounded-lg shadow-lg z-20 max-h-60 overflow-hidden"},we={class:"p-2 border-b border-gray-200"},be={class:"max-h-48 overflow-auto"},_e=["onClick"],Ce={key:0,class:"px-4 py-2 text-gray-500 text-sm"},ke={class:"relative w-full md:w-auto"},Ne={class:"text-sm"},Le={key:0,class:"absolute top-full left-0 right-0 mt-1 border border-gray-300 bg-white rounded-lg shadow-lg z-20 max-h-60 overflow-hidden"},Se={class:"p-2 border-b border-gray-200"},je={class:"max-h-48 overflow-auto"},$e=["onClick"],Oe={key:0,class:"px-4 py-2 text-gray-500 text-sm"},Ee={key:0,class:"flex flex-wrap gap-2 mt-4 justify-center md:justify-start"},Ge={key:0,class:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-xs flex items-center"},Ve={key:1,class:"px-3 py-1 bg-green-100 text-green-800 rounded-full text-xs flex items-center"},Fe={key:2,class:"px-3 py-1 bg-yellow-100 text-yellow-800 rounded-full text-xs flex items-center"},ze={key:3,class:"px-3 py-1 bg-purple-100 text-purple-800 rounded-full text-xs flex items-center"},Te={class:"pb-4 text-center md:text-left"},Ue={class:"text-sm text-gray-600"},Ae={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 py-4"},Be={class:"p-4 bg-gray-50 flex justify-center"},De=["src"],Re={class:"p-4"},Me={class:"mb-3 text-lg font-semibold tracking-tight text-gray-900 line-clamp-2"},qe={class:"mb-6 text-[14px] text-gray-600 line-clamp-2"},Ie=["onClick"],Pe={key:0,class:"text-center py-12"},Xe={__name:"ngo",setup(z){const b=se(),p=oe(),x=te("call"),a=y({name:"",country:"",state:"",city:""}),d=y(""),v=y(""),m=y(""),r=y({country:!1,state:!1,city:!1}),i=y({country:"",state:"",city:""}),S=y([]),h=y([]),g=y([]),_=y([]),T=k(()=>i.value.country?S.value.filter(s=>s.name.toLowerCase().includes(i.value.country.toLowerCase())):S.value),U=k(()=>i.value.state?h.value.filter(s=>s.state_name.toLowerCase().includes(i.value.state.toLowerCase())):h.value),A=k(()=>i.value.city?g.value.filter(s=>s.district_name.toLowerCase().includes(i.value.city.toLowerCase())):g.value),E=k(()=>_.value.filter(s=>{const t=!a.value.name||s.name.toLowerCase().includes(a.value.name.toLowerCase()),o=!a.value.country||s.country&&s.country.toLowerCase().includes(a.value.country.toLowerCase()),f=!a.value.state||s.address&&s.address.toLowerCase().includes(a.value.state.toLowerCase()),X=!a.value.city||s.address&&s.address.toLowerCase().includes(a.value.city.toLowerCase());return t&&o&&f&&X})),D=k(()=>a.value.name||d.value||v.value||m.value);function G(s){Object.keys(r.value).forEach(t=>{t!==s&&(r.value[t]=!1)}),r.value[s]=!r.value[s]}function R(s){d.value=s.name,a.value.country=s.name,r.value.country=!1,i.value.country="",V(),J()}function M(s){v.value=s.state_name,a.value.state=s.state_name,r.value.state=!1,i.value.state="",F(),K()}function q(s){m.value=s.district_name,a.value.city=s.district_name,r.value.city=!1,i.value.city=""}function I(){d.value="",a.value.country="",V()}function V(){v.value="",a.value.state="",h.value=[],F()}function F(){m.value="",a.value.city="",g.value=[]}function P(){a.value={name:"",country:"",state:"",city:""},d.value="",v.value="",m.value="",h.value=[],g.value=[],i.value={country:"",state:"",city:""},r.value={country:!1,state:!1,city:!1}}const H=()=>C(this,null,function*(){try{const s=yield x("mykartavya.controllers.api.country_data");S.value=s||[]}catch(s){console.error("Error fetching countries:",s),S.value=[]}}),J=()=>C(this,null,function*(){if(a.value.country)try{const s=yield x("mykartavya.controllers.api.state_data",{country:a.value.country});h.value=s||[]}catch(s){console.error("Error fetching states:",s),h.value=[]}}),K=()=>C(this,null,function*(){if(a.value.state)try{const s=yield x("mykartavya.controllers.api.cities_data",{state:a.value.state});g.value=s||[]}catch(s){console.error("Error fetching cities:",s),g.value=[]}});function Q(){return C(this,null,function*(){var s;try{const t=yield x("mykartavya.controllers.state.get_ngos_by_state",{state_name:(s=b==null?void 0:b.params)==null?void 0:s.name});t&&(console.log("Response from get_ngos_by_state:",t),_.value=t,console.log("NGOs fetched successfully:",_.value))}catch(t){console.error("Error fetching NGOs:",t),_.value=[]}})}const W=s=>{p.push({name:"Ngodetails",params:{name:s.name}})};function B(s){const t=document.querySelectorAll(".relative");let o=!1;t.forEach(f=>{f.contains(s.target)&&(o=!0)}),o||(r.value={country:!1,state:!1,city:!1})}return Y(()=>{Q(),H(),document.addEventListener("click",B)}),Z(()=>{document.removeEventListener("click",B)}),(s,t)=>(n(),l(L,null,[e("div",re,[t[17]||(t[17]=e("div",{class:"relative text-white px-4 md:px-8 lg:px-72 py-24 md:py-32 flex flex-col md:flex-row justify-between items-center mt-[50px] bg-cover bg-center bg-no-repeat",style:{"background-image":"url('https://prod-mkcmsapi.s3.ap-south-1.amazonaws.com/cms/images/Media-20200813160839/1366-300.png')"}},[e("div",{class:"container text-center md:text-left mb-6 md:mb-0"},[e("h1",{class:"text-3xl md:text-4xl lg:text-5xl font-bold mb-3"},"NGOs"),e("div",{class:"flex items-center justify-center md:justify-start space-x-2 text-sm"})])],-1)),e("div",le,[e("div",ne,[e("div",ie,[t[13]||(t[13]=e("label",{class:"font-semibold text-gray-700"},"Search by:",-1)),e("div",ue,[j(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>a.value.name=o),type:"text",placeholder:"NGO Name",class:"border-none inputs border-white outline-none bg-transparent text-sm flex-1 min-w-[150px] py-2"},null,512),[[$,a.value.name]]),t[11]||(t[11]=e("i",{class:"fas fa-search text-gray-500 ml-2"},null,-1))]),e("div",ce,[e("div",{onClick:t[1]||(t[1]=o=>G("country")),class:"border border-gray-300 py-2 px-4 rounded-lg cursor-pointer bg-white shadow-sm hover:shadow-md transition-shadow min-w-[180px] flex justify-between items-center"},[e("span",de,u(d.value||"Select a country"),1),e("i",{class:N(["fas fa-chevron-down text-gray-500 text-xs transition-transform",{"transform rotate-180":r.value.country}])},null,2)]),r.value.country?(n(),l("div",ve,[e("div",me,[j(e("input",{"onUpdate:modelValue":t[2]||(t[2]=o=>i.value.country=o),type:"text",placeholder:"Search countries...",class:"w-full px-3 py-1 border border-gray-300 rounded text-sm outline-none focus:border-blue-500"},null,512),[[$,i.value.country]])]),e("ul",ye,[(n(!0),l(L,null,O(T.value,o=>(n(),l("li",{key:o.id||o.name,onClick:f=>R(o),class:"px-4 py-2 hover:bg-red-500 hover:text-white cursor-pointer text-sm transition-colors"},u(o.name),9,fe))),128)),T.value.length===0?(n(),l("li",pe," No countries found ")):c("",!0)])])):c("",!0)]),e("div",xe,[e("div",{onClick:t[3]||(t[3]=o=>G("state")),class:N(["border border-gray-300 py-2 px-4 rounded-lg cursor-pointer bg-white shadow-sm hover:shadow-md transition-shadow min-w-[160px] flex justify-between items-center",{"opacity-50 cursor-not-allowed":!d.value}])},[e("span",he,u(v.value||"Select a state"),1),e("i",{class:N(["fas fa-chevron-down text-gray-500 text-xs transition-transform",{"transform rotate-180":r.value.state}])},null,2)],2),r.value.state&&d.value?(n(),l("div",ge,[e("div",we,[j(e("input",{"onUpdate:modelValue":t[4]||(t[4]=o=>i.value.state=o),type:"text",placeholder:"Search states...",class:"w-full px-3 py-1 border border-gray-300 rounded text-sm outline-none focus:border-blue-500"},null,512),[[$,i.value.state]])]),e("ul",be,[(n(!0),l(L,null,O(U.value,o=>(n(),l("li",{key:o.id||o.state_name,onClick:f=>M(o),class:"px-4 py-2 hover:bg-red-500 hover:text-white cursor-pointer text-sm transition-colors"},u(o.state_name),9,_e))),128)),U.value.length===0?(n(),l("li",Ce," No states found ")):c("",!0)])])):c("",!0)]),e("div",ke,[e("div",{onClick:t[5]||(t[5]=o=>G("city")),class:N(["border border-gray-300 py-2 px-4 rounded-lg cursor-pointer bg-white shadow-sm hover:shadow-md transition-shadow min-w-[160px] flex justify-between items-center",{"opacity-50 cursor-not-allowed":!v.value}])},[e("span",Ne,u(m.value||"Select a city"),1),e("i",{class:N(["fas fa-chevron-down text-gray-500 text-xs transition-transform",{"transform rotate-180":r.value.city}])},null,2)],2),r.value.city&&v.value?(n(),l("div",Le,[e("div",Se,[j(e("input",{"onUpdate:modelValue":t[6]||(t[6]=o=>i.value.city=o),type:"text",placeholder:"Search cities...",class:"w-full px-3 py-1 border border-gray-300 rounded text-sm outline-none focus:border-blue-500"},null,512),[[$,i.value.city]])]),e("ul",je,[(n(!0),l(L,null,O(A.value,o=>(n(),l("li",{key:o.name||o.district_name,onClick:f=>q(o),class:"px-4 py-2 hover:bg-red-500 hover:text-white cursor-pointer text-sm transition-colors"},u(o.district_name),9,$e))),128)),A.value.length===0?(n(),l("li",Oe," No cities found ")):c("",!0)])])):c("",!0)]),e("button",{onClick:P,class:"w-full md:w-auto px-4 py-2 border border-gray-300 rounded-lg text-sm bg-white hover:bg-gray-50 transition-colors shadow-sm hover:shadow-md"},t[12]||(t[12]=[e("i",{class:"fas fa-times mr-1"},null,-1),w(" Clear ")]))]),D.value?(n(),l("div",Ee,[t[14]||(t[14]=e("span",{class:"text-sm text-gray-600"},"Active filters:",-1)),a.value.name?(n(),l("span",Ge,[w(" Name: "+u(a.value.name)+" ",1),e("i",{onClick:t[7]||(t[7]=o=>a.value.name=""),class:"fas fa-times ml-1 cursor-pointer hover:text-blue-600"})])):c("",!0),d.value?(n(),l("span",Ve,[w(" Country: "+u(d.value)+" ",1),e("i",{onClick:t[8]||(t[8]=o=>I()),class:"fas fa-times ml-1 cursor-pointer hover:text-green-600"})])):c("",!0),v.value?(n(),l("span",Fe,[w(" State: "+u(v.value)+" ",1),e("i",{onClick:t[9]||(t[9]=o=>V()),class:"fas fa-times ml-1 cursor-pointer hover:text-yellow-600"})])):c("",!0),m.value?(n(),l("span",ze,[w(" City: "+u(m.value)+" ",1),e("i",{onClick:t[10]||(t[10]=o=>F()),class:"fas fa-times ml-1 cursor-pointer hover:text-purple-600"})])):c("",!0)])):c("",!0)]),e("div",Te,[e("p",Ue," Showing "+u(E.value.length)+" of "+u(_.value.length)+" NGOs ",1)]),e("div",Ae,[(n(!0),l(L,null,O(E.value,o=>(n(),l("div",{key:o.name,class:"bg-white border border-gray-200 rounded-lg shadow-sm hover:shadow-md transition-shadow overflow-hidden"},[e("div",Be,[o.ngo_logo?(n(),l("img",{key:0,src:o.ngo_logo,alt:"NGO Logo",class:"h-16 w-16 object-contain rounded-full border-2 border-white shadow-sm"},null,8,De)):c("",!0)]),e("div",Re,[e("h5",Me,u(o.ngo_name),1),e("p",qe,[t[15]||(t[15]=e("span",{class:"inline-block mr-1"},"📍",-1)),w(" "+u(o.location),1)]),e("button",{onClick:f=>W(o),class:"w-full px-4 py-2 text-white bg-[#fe5726] rounded-lg hover:bg-red-600 transition-colors shadow-sm hover:shadow-md"}," Read more ",8,Ie)])]))),128))]),E.value.length===0?(n(),l("div",Pe,t[16]||(t[16]=[e("i",{class:"fas fa-search text-4xl text-gray-300 mb-4"},null,-1),e("h3",{class:"text-xl font-semibold text-gray-600 mb-2"},"No NGOs found",-1),e("p",{class:"text-gray-500"},"Try adjusting your search filters or clear all filters to see more results.",-1)]))):c("",!0)])]),ee(ae)],64))}};export{Xe as default};
