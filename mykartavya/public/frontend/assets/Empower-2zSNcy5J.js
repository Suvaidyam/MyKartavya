var C=(_,f,b)=>new Promise((R,r)=>{var j=v=>{try{u(b.next(v))}catch(w){r(w)}},A=v=>{try{u(b.throw(v))}catch(w){r(w)}},u=v=>v.done?R(v.value):Promise.resolve(v.value).then(j,A);u((b=b.apply(_,f)).next())});import{j as W,r as m,l as z,c as i,d as e,m as k,u as h,i as I,f as O,e as S,F as L,h as E,n as $,p as U,t as p,s as T,v as D,g as Z,x as Q,b as l,o as q,k as X,_ as N,A as K,B as V}from"./index-Dw8UFGzE.js";import{l as H}from"./index-Cx-M-NdO.js";import{c as Y,S as J,F as ee,T as te,L as se,M as oe}from"./twitter-r-4MjMYQ.js";import{N as le,C as ae}from"./NotFound-B_oY33Pm.js";const ie="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAByUDbMAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAD4SURBVHgBvZThEYIwDIWDxwBsICOwgSuwAXUCzwl0AzqCToIbyAZ0A9ggpmd6xFpr+0Pf3bsmtP1o2gLAP4SILflArjmvyCeyghxZAHnCVQN55ti2VSrIrqDHuPookMuaME93WfZG8Gp2jhpyFYItkKYreS9yE4JtIQFUFIWidhQv372MoLq7hP258NgG15N16iTM79S8uSkgq1nClOzA5z2rGPgNZKX8UrXonBwwAXQOHcBNxDV5INvVNS6GsIwLSg8AISB8BgFE7tkYAMZABsTK3sQbrzEujZkfu/xLDP7hhOaVoYd0yxeacOQyNec2bm1ZlBv4tR6cZ+qoej++mwAAAABJRU5ErkJggg==";/**
 * @license lucide-vue-next v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=Y("CheckIcon",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-vue-next v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=Y("RefreshCwIcon",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),ce={class:"bg-white rounded-lg"},de={class:"bg-white p-6 rounded-lg w-full relative"},ue={class:"flex justify-between items-center mb-4"},me={class:"relative border-gray-300 pl-6"},pe={key:1,src:ie,alt:"",class:"w-4 h-4"},ve={class:"text-sm font-semibold text-gray-900 m-4"},fe={class:"text-lg font-semibold m-4"},be={class:"text-gray-600 text-sm ml-4 mt-0"},ge=["onClick"],ye=["onClick"],he=["onClick"],xe={key:0,class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50"},_e={class:"bg-white rounded-lg shadow-lg w-full max-w-md"},we={class:"flex justify-between items-center border-b p-4"},ke={class:"p-4"},Ae={class:"flex justify-center gap-6 my-3"},Ce=["onClick"],Se={key:1,class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50"},$e={class:"bg-white rounded-lg shadow-lg p-6 w-[500px]"},je={class:"flex justify-between items-center border-b pb-2 mb-4"},Me={class:"mb-4"},Re={class:"flex gap-2"},Be={class:"flex gap-2 items-center"},Ie={class:"flex gap-2 items-center"},Le={class:"mb-4"},Ee={class:"flex items-center gap-2"},Pe={class:"h-8 w-16 flex items-center justify-center border rounded-sm text-base font-normal text-center"},Fe={class:"mb-4"},Ne={class:"border-dashed border-2 border-gray-300 p-6 rounded-lg text-center relative"},Te={class:"flex gap-2 mt-3"},De=["src"],Ue={class:"flex justify-end"},ze={key:0,class:"h-5 w-5"},Ge={key:2,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50"},Oe={class:"bg-white p-6 rounded-lg shadow-lg"},He={class:"flex justify-end mt-4"},We={__name:"Stepper",props:{activity:{type:Object,required:!1,default:()=>({})}},setup(_){const f=m(0),b=m(!1),R=m(!1),r=m(!1),j=m(!1),A=I("call"),u=I("auth"),v=I("store"),w=Q(),x=m({rating:null,comments:""});let g=_;const a=m({hours:0,minutes:0,progress:0,images:[]}),M=m(!1);m(!1);const n=m([{title:"Activity Approval",description:"Is your application to volunteer for the activity approved?",button:"Request for Approval",completed:!1},{title:"Get Started",description:"Click the button below once you are ready to start the activity",button:"Start Activity",completed:!1},{title:"Activity Report",description:"Click the button below once you have finished the activity & submit a small report",button:"Submit Report",completed:!1},{title:"Feedback & Karma Points",description:"Click the button to register the feedback & collect your karma points",button:"Submit Feedback",completed:!1}]),P=o=>C(this,null,function*(){if(o===0)if(yield A("mykartavya.controllers.api.act_now",{activity:w.params.name,volunteer:u.cookie.user_id}))g.activity.workflow_state="Applied",n.value[o].completed=!0,f.value++;else return;o===3&&(b.value=!0),o===2&&(r.value=!0)}),G=()=>C(this,null,function*(){r.value=!1,M.value=!0,g.activity.completion_wf_state=="Submitted"&&(n.value[2].completed=!0,f.value++);try{let o=yield A("mykartavya.controllers.api.submit_activity_report",{name:g.activity.name,data:{duration:a.value.hours*60*60+a.value.minutes*60,percent:a.value.progress-g.activity.com_percent,images:a.value.images}});o&&(a.value.progress=o.com_percent,H.success("Activity report submitted successfully"),M.value=!1,a.value={hours:0,minutes:0,progress:0},v.refresh_step=!0)}catch(o){M.value=!1,H.error("Something went wrong")}}),c=()=>C(this,null,function*(){(yield A("mykartavya.controllers.api.submit_feedback",{name:g.activity.name,volunteer:u.cookie.user_id,rating:x.value.rating,comments:x.value.comments})).rating&&(b.value=!1,R.value=!0,n.value[3].completed=!0)}),y=o=>{const t=o.target.files;for(let s of t){const d=new FileReader;d.onload=F=>{a.value.images.push(F.target.result)},d.readAsDataURL(s)}},B=m([{icon:"😞",label:.2},{icon:"😐",label:.4},{icon:"😊",label:.6},{icon:"🙂",label:.8},{icon:"🙂",label:1}]);return z(()=>g.activity,(o,t)=>{o.com_percent&&(a.value.progress=o.com_percent),o.is_assigned&&(o.workflow_state=="Applied"?(n.value[0].completed=!0,f.value++):o.workflow_state=="Approved"&&o.completion_wf_state=="Pending"?(n.value[0].completed=!0,n.value[1].completed=!0,f.value=2):o.workflow_state=="Approved"&&["Submitted","Approved"].includes(o.completion_wf_state)&&!(o.rating!=null&&o.rating!=0)?(n.value[0].completed=!0,o.completion_wf_state=="Submitted"?(n.value[1].completed=!0,f.value=2):(n.value[1].completed=!0,n.value[2].completed=!0,f.value=3)):o.rating!=null&&o.rating!=0&&o.completion_wf_state=="Approved"&&(n.value[0].completed=!0,n.value[1].completed=!0,n.value[2].completed=!0,n.value[3].completed=!0,f.value=4))},{immediate:!0,deep:!0}),z(()=>a.value.progress,(o,t)=>{g.activity.com_percent<=o||(a.value.progress=g.activity.com_percent)}),(o,t)=>(l(),i("div",null,[e("div",ce,[e("div",de,[e("div",ue,[t[11]||(t[11]=e("h2",{class:"text-heading4 font-medium"},"Timeline",-1)),e("button",{onClick:t[0]||(t[0]=s=>h(v).refresh_step=!0),class:"text-pink-500 flex items-center text-bodyh2 font-normal px-4 py-1 rounded-sm border"},[t[10]||(t[10]=O(" Refresh ")),S(h(ne),{class:"w-4 h-4 ml-1"})])]),e("div",me,[(l(!0),i(L,null,E(n.value,(s,d)=>(l(),i("div",{key:d,class:"mb-6 relative border-l"},[e("div",{class:$(["absolute -left-3 w-6 h-6 rounded-full flex items-center justify-center",s.completed?"bg-green-500 text-white":"bg-orange-500 text-white "])},[s.completed?(l(),U(h(re),{key:0,class:"w-4 h-4"})):(l(),i("img",pe))],2),e("div",{class:$(d>f.value?"blur-sm opacity-50 pointer-events-none ":"")},[e("p",ve," STEP "+p(d+1),1),e("h3",fe,p(s.title),1),e("p",be,p(s.description),1),!s.completed&&!(["Get Started","Activity Report"].includes(s.title)&&(_.activity.workflow_state=="Applied"||_.activity.completion_wf_state=="Submitted"))?(l(),i("button",{key:0,onClick:F=>P(d),class:$(["mt-2 h-[28px] w-[147px] rounded-sm text-caption font-medium text-white ml-2",(d===n.value.length-1,"bg-orange-500")])},p(s.button),11,ge)):k("",!0),!s.completed&&["Get Started"].includes(s.title)&&["Applied"].includes(_.activity.workflow_state)?(l(),i("button",{key:1,disabled:"",onClick:F=>P(d),class:$(["mt-2 h-[28px] cursor-not-allowed w-[147px] rounded-sm text-caption font-medium text-white ml-2",(d===n.value.length-1,"bg-orange-500")])},p(s.title=="Get Started"?"Pending by Admin":"Review under Admin"),11,ye)):k("",!0),!s.completed&&["Activity Report"].includes(s.title)&&["Approved"].includes(_.activity.workflow_state)&&_.activity.completion_wf_state=="Submitted"?(l(),i("button",{key:2,disabled:"",onClick:F=>P(d),class:$(["mt-2 h-[28px] cursor-not-allowed w-[147px] rounded-sm text-caption font-medium text-white ml-2",(d===n.value.length-1,"bg-orange-500")])},p(s.title=="Get Started"?"Pending by Admin":"Review under Admin"),11,he)):k("",!0)],2)]))),128))]),b.value?(l(),i("div",xe,[e("div",_e,[e("div",we,[t[12]||(t[12]=e("h2",{class:"text-lg font-semibold"},"Share Feedback",-1)),e("button",{onClick:t[1]||(t[1]=s=>{(b.value=!1)(n.value[3].completed=!1)}),class:"text-gray-500 hover:text-gray-700 text-xl"}," × ")]),e("div",ke,[t[13]||(t[13]=e("label",{class:"block font-medium mb-2 text-gray-700"},"How would you rate your experience with the activity?",-1)),e("div",Ae,[(l(!0),i(L,null,E(B.value,(s,d)=>(l(),i("button",{key:d,onClick:F=>x.value.rating=s.label,class:$(["text-3xl focus:outline-none transition duration-200",x.value.rating===s.label?"text-orange-500":"text-gray-400 opacity-30"])},p(s.icon),11,Ce))),128))]),t[14]||(t[14]=e("label",{class:"block font-medium mb-2 text-gray-700"},"Comments (Optional)",-1)),T(e("textarea",{"onUpdate:modelValue":t[2]||(t[2]=s=>x.value.comments=s),class:"w-full border rounded p-2 h-20 resize-none"},null,512),[[D,x.value.comments]])]),e("div",{class:"p-4"},[e("button",{onClick:c,class:"w-full bg-orange-500 text-white py-2 rounded font-semibold hover:bg-orange-600"}," SUBMIT FEEDBACK ")])])])):k("",!0),r.value?(l(),i("div",Se,[e("div",$e,[e("div",je,[t[15]||(t[15]=e("h2",{class:"text-lg font-semibold"},"Activity Completion",-1)),e("button",{onClick:t[3]||(t[3]=s=>r.value=!1),class:"text-gray-500 hover:text-gray-700"}," × ")]),e("div",Me,[t[18]||(t[18]=e("label",{class:"block font-medium mb-1"},"How much time you donated while working on the activity?",-1)),e("div",Re,[e("div",Be,[t[16]||(t[16]=e("label",{for:"",class:"text-base font-normal"},"Hours",-1)),T(e("input",{type:"number","onUpdate:modelValue":t[4]||(t[4]=s=>a.value.hours=s),class:"w-24 border rounded px-2 h-8",onInput:t[5]||(t[5]=s=>a.value.hours=Math.max(0,a.value.hours))},null,544),[[D,a.value.hours]])]),e("div",Ie,[t[17]||(t[17]=e("label",{for:"",class:"text-base font-normal"},"Minutes",-1)),T(e("input",{type:"number","onUpdate:modelValue":t[6]||(t[6]=s=>a.value.minutes=s),onInput:t[7]||(t[7]=s=>a.value.minutes=Math.max(0,a.value.minutes)),class:"w-24 border rounded px-2 h-8"},null,544),[[D,a.value.minutes]])])])]),e("div",Le,[t[19]||(t[19]=e("label",{class:"block text-lg font-normal mb-1"},"How much percent work has completed?",-1)),e("div",Ee,[T(e("input",{type:"range",min:"0",max:"100","onUpdate:modelValue":t[8]||(t[8]=s=>a.value.progress=s),class:"w-full h-[6px] accent-green-500"},null,512),[[D,a.value.progress]]),e("span",Pe,p(a.value.progress)+"%",1)])]),e("div",Fe,[t[21]||(t[21]=e("label",{class:"block font-medium mb-2"},"Upload Media",-1)),e("div",Ne,[e("input",{type:"file",multiple:"",onChange:y,class:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"},null,32),t[20]||(t[20]=Z('<div class="flex flex-col items-center text-gray-500" data-v-861edcd2><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-10 h-10" data-v-861edcd2><path stroke-linecap="round" stroke-linejoin="round" d="M12 16.5V3m0 0l-3.5 3.5M12 3l3.5 3.5" data-v-861edcd2></path><path stroke-linecap="round" stroke-linejoin="round" d="M6 14.25v4.5a1.5 1.5 0 001.5 1.5h9a1.5 1.5 0 001.5-1.5v-4.5" data-v-861edcd2></path></svg><p class="mt-2" data-v-861edcd2> Drag &amp; drop files or <span class="text-orange-500 cursor-pointer" data-v-861edcd2>Browse</span></p><p class="text-sm" data-v-861edcd2>Supported formats: JPEG, PNG</p></div>',1))]),e("div",Te,[(l(!0),i(L,null,E(a.value.images,(s,d)=>(l(),i("img",{key:d,src:s,class:"w-16 h-16 rounded object-cover"},null,8,De))),128))])]),e("div",Ue,[e("button",{onClick:G,class:"bg-orange-500 flex items-center justify-center text-white h-[38px] text-base w-48 rounded-sm text-center font-medium hover:bg-orange-600"},[t[23]||(t[23]=e("p",null," MARK AS COMPLETE",-1)),M.value?(l(),i("div",ze,t[22]||(t[22]=[e("div",{class:"animate-spin h-full w-full rounded-full border-[2px] flex justify-center items-center border-dotted border-[#fff]"},[e("div",{class:"w-3 h-3 rounded-full border-dashed border-[1px] border-[#fff]"})],-1)]))):k("",!0)])])])])):k("",!0),j.value?(l(),i("div",Ge,[e("div",Oe,[t[24]||(t[24]=e("h3",{class:"text-lg font-semibold mb-4"}," Submit Your Activity Report ",-1)),t[25]||(t[25]=O(" feedbackPointsPopup ")),t[26]||(t[26]=e("p",{class:"text-gray-600"}," Please upload a summary of your activity. ",-1)),t[27]||(t[27]=e("textarea",{class:"border rounded w-full p-2 mt-2",rows:"4",placeholder:"Write your report here..."},null,-1)),e("div",He,[e("button",{onClick:t[9]||(t[9]=(...s)=>o.submitFeedback&&o.submitFeedback(...s)),class:"px-4 py-2 bg-orange-500 text-white rounded"}," Submit ")])])])):k("",!0)])])]))}},Qe=W(We,[["__scopeId","data-v-861edcd2"]]),Ye={class:"h-screen w-full"},Ze={key:0,class:"w-full relative h-[456px] md:h-[456px] back-img flex items-center mt-10"},qe=["src"],Xe={class:"absolute top-20 left-5 sm:left-10 max-w-sm w-[448px] h-[312px] bg-white shadow-lg rounded-lg p-4 border border-gray-200 flex flex-col gap-4 justify-center"},Ke={class:"border-b pb-2"},Ve={class:"text-heading3 font-normal font-poppins mt-1"},Je={class:"flex gap-1",style:{color:"#666666"}},et={class:"flex items-center text-bodyh2 font-normal mr-4",style:{color:"#0b0b0b"}},tt={class:"flex items-center text-gray-600 text-bodyh2 font-normal justify-between border-b pb-2"},st={class:"flex justify-center gap-1",style:{color:"#0b0b0b"}},ot={class:"flex items-center gap-2 justify-center",style:{color:"#0b0b0b"}},lt={class:"text-bodyh2 font-normal"},at={class:"flex space-x-2 border-b pb-2"},it=["src"],rt={key:1,class:"w-8 h-8 flex items-center justify-center bg-gray-50"},nt={class:""},ct={class:"w-full bg-gray-200 rounded-full h-[5px]"},dt={class:"text-caption font-normal mt-1",style:{color:"#0b0b0b"}},ut={class:"w-full bg-gray-700"},mt={class:"p-6 md:p-10 bg-gray-100"},pt={class:"grid gap-6 lg:grid-cols-3"},vt={class:"lg:col-span-2 flex flex-col justify-between items-start"},ft=["innerHTML"],bt={class:"flex items-center gap-[12px] flex-col justify-self-start mt-[220px]"},gt={class:"text-gray-700 font-medium flex items-center space-x-2"},yt={class:"flex items-center gap-3 justify-start w-[230px]"},ht=["aria-label"],xt={class:"mt-10"},_t={class:"flex justify-between"},wt={class:"flex items-center"},kt={key:0,class:"flex items-center gap-4"},At={key:1,class:"w-full h-[330px]"},Ct=320,St={__name:"Empower",setup(_){const f=[{name:"Facebook",svg:ee},{name:"X",svg:te},{name:"LinkedIn",svg:se},{name:"WhatsApp",svg:oe}],b=I("call"),R=I("store"),r=m([]),j=Q(),A=I("formatDate"),u=m(null),v=m(!0),w=m(!1),x=()=>C(this,null,function*(){try{const c=yield b("mykartavya.controllers.api.activity_details",{name:j.params.name});c&&(r.value=c)}catch(c){console.error("Error fetching activity data:",c)}}),g=m([]),a=()=>C(this,null,function*(){try{const c=yield b("mykartavya.controllers.api.related_opportunities",{name:j.params.name,sdgs:r.value.sdgs});c&&(g.value=c)}catch(c){console.error("Error fetching activity data:",c)}});q(()=>C(this,null,function*(){yield x(),yield a()})),z(()=>R.refresh_step,c=>{c&&(x(),R.refresh_step=!1)},{immediate:!0,deep:!0}),z(()=>j.params.name,(c,y)=>C(this,null,function*(){c!=y&&(yield x(),yield a())}),{immediate:!0,deep:!0});const M=Ct,n=()=>{u.value&&u.value.scrollTo({left:Math.max(0,u.value.scrollLeft-M),behavior:"smooth"})},P=()=>{if(u.value){const c=u.value.scrollWidth-u.value.clientWidth;u.value.scrollTo({left:Math.min(c,u.value.scrollLeft+M),behavior:"smooth"})}},G=()=>{if(!u.value)return;const{scrollLeft:c,scrollWidth:y,clientWidth:B}=u.value;v.value=c<=0,w.value=c+B>=y};return X(()=>{u.value&&u.value.addEventListener("scroll",G)}),window.addEventListener("resize",()=>{}),(c,y)=>{var B,o,t;return l(),i("div",Ye,[e("section",null,[r.value?(l(),i("div",Ze,[e("img",{src:r.value.activity_image,class:"w-full h-full",alt:""},null,8,qe),e("div",Xe,[e("div",Ke,[e("h2",Ve,p(r.value.title),1),y[0]||(y[0]=e("span",{class:"text-secondary font-medium text-caption"},"Online",-1))]),e("div",Je,[S(h(N),{name:"calendar",class:"size-4 text-[#666666]"}),e("span",et,p(h(A)(r.value.start_date))+" - "+p(h(A)(r.value.end_date)),1)]),e("div",tt,[e("span",st,[S(h(N),{name:"clock",class:"size-4 text-[#666666]"}),O(" "+p(r.value.hours)+" hr ",1)]),e("span",ot,[S(h(N),{name:"database",class:"size-4 text-secondary"}),e("span",lt,p(r.value.karma_points),1)])]),e("div",at,[r.value.sdgs?(l(!0),i(L,{key:0},E(JSON.parse(r.value.sdgs),s=>{var d;return l(),i("div",null,[s.image?(l(),i("img",{key:0,src:s.image,class:"w-8 h-8"},null,8,it)):(l(),i("span",rt,p((d=s.sdgs_name)==null?void 0:d.charAt(0)),1))])}),256)):k("",!0)]),e("div",nt,[e("div",ct,[e("div",{class:"bg-green-500 h-[5px] rounded-full",style:K(`width:${(B=r.value.com_percent)!=null?B:0}%`)},null,4)]),e("p",dt,p((o=r.value.com_percent)!=null?o:0)+" % completed ",1)])])])):k("",!0)]),e("section",ut,[e("div",mt,[e("div",pt,[e("div",vt,[e("div",{innerHTML:r.value.activity_description},null,8,ft),e("div",bt,[e("span",gt,[S(h(J),{class:"w-4 h-4 text-[#666666]"}),y[1]||(y[1]=e("span",{class:"text-bodyh1 font-medium font-poppins",style:{color:"#0b0b0b"}},"Share activity with others",-1))]),e("div",yt,[(l(),i(L,null,E(f,s=>e("button",{key:s.name,"aria-label":s.name,class:"p-1.5 bg-white rounded-full hover:bg-gray-300"},[(l(),U(V(s.svg),{class:"w-5 h-5 text-gray-600"}))],8,ht)),64))])])]),e("div",null,[(l(),U(Qe,{activity:r.value,key:r.value.activity},null,8,["activity"]))])]),e("div",xt,[e("div",_t,[y[2]||(y[2]=e("h2",{class:"text-heading4 font-medium font-poppins",style:{color:"#0b0b0b"}}," Related Opportunities ",-1)),e("div",wt,[S(h(N),{onClick:n,class:$(["size-5 cursor-pointer",v.value?"text-gray-500 disabled":"text-gray-700"]),name:"chevron-left",disabled:v.value},null,8,["class","disabled"]),S(h(N),{onClick:P,class:$(["size-5 cursor-pointer",w.value?"text-gray-500 disabled":"text-gray-700"]),name:"chevron-right",disabled:w.value},null,8,["class","disabled"])])]),e("div",{ref_key:"scrollContainer",ref:u,class:"py-4 w-full overflow-x-scroll"},[((t=g.value)==null?void 0:t.length)>0?(l(),i("div",kt,[(l(!0),i(L,null,E(g.value,(s,d)=>(l(),U(ae,{key:d,item:s,class:"w-[320px] min-w-[320px] max-w-[320px]"},null,8,["item"]))),128))])):(l(),i("div",At,[S(le)]))],512)])])])])}}},It=W(St,[["__scopeId","data-v-22523349"]]);export{It as default};
