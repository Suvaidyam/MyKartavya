var C=(w,f,b)=>new Promise((I,i)=>{var j=v=>{try{d(b.next(v))}catch(_){i(_)}},A=v=>{try{d(b.throw(v))}catch(_){i(_)}},d=v=>v.done?I(v.value):Promise.resolve(v.value).then(j,A);d((b=b.apply(w,f)).next())});import{j as Q,r as m,l as O,c as a,d as e,m as k,u as h,i as L,f as H,e as S,F as E,h as P,n as $,p as G,t as p,s as U,v as z,g as q,x as Y,b as o,o as X,k as K,_ as N,A as V,B as J}from"./index-B0zrK9ZO.js";import{l as W}from"./index-B_4M3vrg.js";import{c as Z,S as ee,F as te,T as se,L as le,M as oe}from"./twitter-C5hGKDGD.js";import{N as ae,C as ie}from"./NotFound-RR2wLL95.js";const re="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAByUDbMAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAD4SURBVHgBvZThEYIwDIWDxwBsICOwgSuwAXUCzwl0AzqCToIbyAZ0A9ggpmd6xFpr+0Pf3bsmtP1o2gLAP4SILflArjmvyCeyghxZAHnCVQN55ti2VSrIrqDHuPookMuaME93WfZG8Gp2jhpyFYItkKYreS9yE4JtIQFUFIWidhQv372MoLq7hP258NgG15N16iTM79S8uSkgq1nClOzA5z2rGPgNZKX8UrXonBwwAXQOHcBNxDV5INvVNS6GsIwLSg8AISB8BgFE7tkYAMZABsTK3sQbrzEujZkfu/xLDP7hhOaVoYd0yxeacOQyNec2bm1ZlBv4tR6cZ+qoej++mwAAAABJRU5ErkJggg==";/**
 * @license lucide-vue-next v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=Z("CheckIcon",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-vue-next v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=Z("RefreshCwIcon",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),de={class:"bg-white rounded-lg"},ue={class:"bg-white p-6 rounded-lg w-full relative"},me={class:"flex justify-between items-center mb-4"},pe={class:"relative border-gray-300 pl-6"},ve={key:1,src:re,alt:"",class:"w-4 h-4"},fe={class:"text-sm font-semibold text-gray-900 m-4"},be={class:"text-lg font-semibold m-4"},ge={class:"text-gray-600 text-sm ml-4 mt-0"},ye=["onClick"],he=["onClick"],xe=["onClick"],we={key:0,class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50"},_e={class:"bg-white rounded-lg shadow-lg w-full max-w-md"},ke={class:"flex justify-between items-center border-b p-4"},Ae={class:"p-4"},Ce={class:"flex justify-center gap-6 my-3"},Se=["onClick"],$e={key:1,class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50"},je={class:"bg-white rounded-lg shadow-lg p-6 w-[500px]"},Me={class:"flex justify-between items-center border-b pb-2 mb-4"},Ie={class:"mb-4"},Re={class:"flex gap-2"},Be={class:"flex gap-2 items-center"},Le={class:"flex gap-2 items-center"},Ee={class:"mb-4"},Pe={class:"flex items-center gap-2"},Fe={class:"h-8 w-16 flex items-center justify-center border rounded-sm text-base font-normal text-center"},Ne={class:"mb-4"},Te={class:"border-dashed border-2 border-gray-300 p-6 rounded-lg text-center relative"},De={class:"flex gap-2 mt-3"},Ue=["src"],ze={class:"flex justify-end"},Ge={key:0,class:"h-5 w-5"},Oe={key:2,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50"},He={class:"bg-white p-6 rounded-lg shadow-lg"},We={class:"flex justify-end mt-4"},Qe={__name:"Stepper",props:{activity:{type:Object,required:!1,default:()=>({})}},setup(w){const f=m(0),b=m(!1),I=m(!1),i=m(!1),j=m(!1),A=L("call"),d=L("auth"),v=L("store"),_=Y(),x=m({rating:null,comments:""});let g=w;const r=m({hours:0,minutes:0,progress:0}),M=m([]),R=m(!1);m(!1);const n=m([{title:"Activity Approval",description:"Is your application to volunteer for the activity approved?",button:"Request for Approval",completed:!1},{title:"Get Started",description:"Click the button below once you are ready to start the activity",button:"Start Activity",completed:!1},{title:"Activity Report",description:"Click the button below once you have finished the activity & submit a small report",button:"Submit Report",completed:!1},{title:"Feedback & Karma Points",description:"Click the button to register the feedback & collect your karma points",button:"Submit Feedback",completed:!1}]),F=l=>C(this,null,function*(){if(l===0)if(yield A("mykartavya.controllers.api.act_now",{activity:_.params.name,volunteer:d.cookie.user_id}))g.activity.workflow_state="Applied",n.value[l].completed=!0,f.value++;else return;l===3&&(b.value=!0),l===2&&(i.value=!0)}),c=()=>C(this,null,function*(){i.value=!1,R.value=!0,g.activity.completion_wf_state=="Submitted"&&(n.value[2].completed=!0,f.value++);try{let l=yield A("mykartavya.controllers.api.submit_activity_report",{name:g.activity.name,data:{duration:r.value.hours*60*60+r.value.minutes*60,percent:r.value.progress-g.activity.com_percent,images:M.value}});l&&(r.value.progress=l.com_percent,W.success("Activity report submitted successfully"),R.value=!1,r.value={hours:0,minutes:0,progress:0},v.refresh_step=!0)}catch(l){R.value=!1,W.error("Something went wrong")}}),y=()=>C(this,null,function*(){(yield A("mykartavya.controllers.api.submit_feedback",{name:g.activity.name,volunteer:d.cookie.user_id,rating:x.value.rating,comments:x.value.comments})).rating&&(b.value=!1,I.value=!0,n.value[3].completed=!0)}),B=l=>{const t=l.target.files;if(t.length)for(let s of t){const u=new FileReader;u.onload=D=>{console.log(s,"file"),M.value.push({file:s,preview:u.result}),console.log(M.value,"uploadedImages")},u.readAsDataURL(s)}},T=m([{icon:"ðŸ˜ž",label:.2},{icon:"ðŸ˜",label:.4},{icon:"ðŸ˜Š",label:.6},{icon:"ðŸ™‚",label:.8},{icon:"ðŸ™‚",label:1}]);return O(()=>g.activity,(l,t)=>{l.com_percent&&(r.value.progress=l.com_percent),l.is_assigned&&(l.workflow_state=="Applied"?(n.value[0].completed=!0,f.value++):l.workflow_state=="Approved"&&l.completion_wf_state=="Pending"?(n.value[0].completed=!0,n.value[1].completed=!0,f.value=2):l.workflow_state=="Approved"&&["Submitted","Approved"].includes(l.completion_wf_state)&&!(l.rating!=null&&l.rating!=0)?(n.value[0].completed=!0,l.completion_wf_state=="Submitted"?(n.value[1].completed=!0,f.value=2):(n.value[1].completed=!0,n.value[2].completed=!0,f.value=3)):l.rating!=null&&l.rating!=0&&l.completion_wf_state=="Approved"&&(n.value[0].completed=!0,n.value[1].completed=!0,n.value[2].completed=!0,n.value[3].completed=!0,f.value=4))},{immediate:!0,deep:!0}),O(()=>r.value.progress,(l,t)=>{g.activity.com_percent<=l||(r.value.progress=g.activity.com_percent)}),(l,t)=>(o(),a("div",null,[e("div",de,[e("div",ue,[e("div",me,[t[11]||(t[11]=e("h2",{class:"text-heading4 font-medium"},"Timeline",-1)),e("button",{onClick:t[0]||(t[0]=s=>h(v).refresh_step=!0),class:"text-pink-500 flex items-center text-bodyh2 font-normal px-4 py-1 rounded-sm border"},[t[10]||(t[10]=H(" Refresh ")),S(h(ce),{class:"w-4 h-4 ml-1"})])]),e("div",pe,[(o(!0),a(E,null,P(n.value,(s,u)=>(o(),a("div",{key:u,class:"mb-6 relative border-l"},[e("div",{class:$(["absolute -left-3 w-6 h-6 rounded-full flex items-center justify-center",s.completed?"bg-green-500 text-white":"bg-orange-500 text-white "])},[s.completed?(o(),G(h(ne),{key:0,class:"w-4 h-4"})):(o(),a("img",ve))],2),e("div",{class:$(u>f.value?"blur-sm opacity-50 pointer-events-none ":"")},[e("p",fe," STEP "+p(u+1),1),e("h3",be,p(s.title),1),e("p",ge,p(s.description),1),!s.completed&&!(["Get Started","Activity Report"].includes(s.title)&&(w.activity.workflow_state=="Applied"||w.activity.completion_wf_state=="Submitted"))?(o(),a("button",{key:0,onClick:D=>F(u),class:$(["mt-2 h-[28px] w-[147px] rounded-sm text-caption font-medium text-white ml-2",(u===n.value.length-1,"bg-orange-500")])},p(s.button),11,ye)):k("",!0),!s.completed&&["Get Started"].includes(s.title)&&["Applied"].includes(w.activity.workflow_state)?(o(),a("button",{key:1,disabled:"",onClick:D=>F(u),class:$(["mt-2 h-[28px] cursor-not-allowed w-[147px] rounded-sm text-caption font-medium text-white ml-2",(u===n.value.length-1,"bg-orange-500")])},p(s.title=="Get Started"?"Pending by Admin":"Review under Admin"),11,he)):k("",!0),!s.completed&&["Activity Report"].includes(s.title)&&["Approved"].includes(w.activity.workflow_state)&&w.activity.completion_wf_state=="Submitted"?(o(),a("button",{key:2,disabled:"",onClick:D=>F(u),class:$(["mt-2 h-[28px] cursor-not-allowed w-[147px] rounded-sm text-caption font-medium text-white ml-2",(u===n.value.length-1,"bg-orange-500")])},p(s.title=="Get Started"?"Pending by Admin":"Review under Admin"),11,xe)):k("",!0)],2)]))),128))]),b.value?(o(),a("div",we,[e("div",_e,[e("div",ke,[t[12]||(t[12]=e("h2",{class:"text-lg font-semibold"},"Share Feedback",-1)),e("button",{onClick:t[1]||(t[1]=s=>{(b.value=!1)(n.value[3].completed=!1)}),class:"text-gray-500 hover:text-gray-700 text-xl"}," Ã— ")]),e("div",Ae,[t[13]||(t[13]=e("label",{class:"block font-medium mb-2 text-gray-700"},"How would you rate your experience with the activity?",-1)),e("div",Ce,[(o(!0),a(E,null,P(T.value,(s,u)=>(o(),a("button",{key:u,onClick:D=>x.value.rating=s.label,class:$(["text-3xl focus:outline-none transition duration-200",x.value.rating===s.label?"text-orange-500":"text-gray-400 opacity-30"])},p(s.icon),11,Se))),128))]),t[14]||(t[14]=e("label",{class:"block font-medium mb-2 text-gray-700"},"Comments (Optional)",-1)),U(e("textarea",{"onUpdate:modelValue":t[2]||(t[2]=s=>x.value.comments=s),class:"w-full border rounded p-2 h-20 resize-none"},null,512),[[z,x.value.comments]])]),e("div",{class:"p-4"},[e("button",{onClick:y,class:"w-full bg-orange-500 text-white py-2 rounded font-semibold hover:bg-orange-600"}," SUBMIT FEEDBACK ")])])])):k("",!0),i.value?(o(),a("div",$e,[e("div",je,[e("div",Me,[t[15]||(t[15]=e("h2",{class:"text-lg font-semibold"},"Activity Completion",-1)),e("button",{onClick:t[3]||(t[3]=s=>i.value=!1),class:"text-gray-500 hover:text-gray-700"}," Ã— ")]),e("div",Ie,[t[18]||(t[18]=e("label",{class:"block font-medium mb-1"},"How much time you donated while working on the activity?",-1)),e("div",Re,[e("div",Be,[t[16]||(t[16]=e("label",{for:"",class:"text-base font-normal"},"Hours",-1)),U(e("input",{type:"number","onUpdate:modelValue":t[4]||(t[4]=s=>r.value.hours=s),class:"w-24 border rounded px-2 h-8",onInput:t[5]||(t[5]=s=>r.value.hours=Math.max(0,r.value.hours))},null,544),[[z,r.value.hours]])]),e("div",Le,[t[17]||(t[17]=e("label",{for:"",class:"text-base font-normal"},"Minutes",-1)),U(e("input",{type:"number","onUpdate:modelValue":t[6]||(t[6]=s=>r.value.minutes=s),onInput:t[7]||(t[7]=s=>r.value.minutes=Math.max(0,r.value.minutes)),class:"w-24 border rounded px-2 h-8"},null,544),[[z,r.value.minutes]])])])]),e("div",Ee,[t[19]||(t[19]=e("label",{class:"block text-lg font-normal mb-1"},"How much percent work has completed?",-1)),e("div",Pe,[U(e("input",{type:"range",min:"0",max:"100","onUpdate:modelValue":t[8]||(t[8]=s=>r.value.progress=s),class:"w-full h-[6px] accent-green-500"},null,512),[[z,r.value.progress]]),e("span",Fe,p(r.value.progress)+"%",1)])]),e("div",Ne,[t[21]||(t[21]=e("label",{class:"block font-medium mb-2"},"Upload Media",-1)),e("div",Te,[e("input",{type:"file",multiple:"",onChange:B,class:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"},null,32),t[20]||(t[20]=q('<div class="flex flex-col items-center text-gray-500" data-v-d3457622><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-10 h-10" data-v-d3457622><path stroke-linecap="round" stroke-linejoin="round" d="M12 16.5V3m0 0l-3.5 3.5M12 3l3.5 3.5" data-v-d3457622></path><path stroke-linecap="round" stroke-linejoin="round" d="M6 14.25v4.5a1.5 1.5 0 001.5 1.5h9a1.5 1.5 0 001.5-1.5v-4.5" data-v-d3457622></path></svg><p class="mt-2" data-v-d3457622> Drag &amp; drop files or <span class="text-orange-500 cursor-pointer" data-v-d3457622>Browse</span></p><p class="text-sm" data-v-d3457622>Supported formats: JPEG, PNG</p></div>',1))]),e("div",De,[(o(!0),a(E,null,P(M.value,(s,u)=>(o(),a("img",{key:u,src:s.preview,alt:"img",class:"w-16 h-16 rounded object-cover"},null,8,Ue))),128))])]),e("div",ze,[e("button",{onClick:c,class:"bg-orange-500 flex items-center justify-center text-white h-[38px] text-base w-48 rounded-sm text-center font-medium hover:bg-orange-600"},[t[23]||(t[23]=e("p",null," MARK AS COMPLETE",-1)),R.value?(o(),a("div",Ge,t[22]||(t[22]=[e("div",{class:"animate-spin h-full w-full rounded-full border-[2px] flex justify-center items-center border-dotted border-[#fff]"},[e("div",{class:"w-3 h-3 rounded-full border-dashed border-[1px] border-[#fff]"})],-1)]))):k("",!0)])])])])):k("",!0),j.value?(o(),a("div",Oe,[e("div",He,[t[24]||(t[24]=e("h3",{class:"text-lg font-semibold mb-4"}," Submit Your Activity Report ",-1)),t[25]||(t[25]=H(" feedbackPointsPopup ")),t[26]||(t[26]=e("p",{class:"text-gray-600"}," Please upload a summary of your activity. ",-1)),t[27]||(t[27]=e("textarea",{class:"border rounded w-full p-2 mt-2",rows:"4",placeholder:"Write your report here..."},null,-1)),e("div",We,[e("button",{onClick:t[9]||(t[9]=(...s)=>l.submitFeedback&&l.submitFeedback(...s)),class:"px-4 py-2 bg-orange-500 text-white rounded"}," Submit ")])])])):k("",!0)])])]))}},Ye=Q(Qe,[["__scopeId","data-v-d3457622"]]),Ze={class:"h-screen w-full"},qe={key:0,class:"w-full relative h-[456px] md:h-[456px] back-img flex items-center mt-10"},Xe=["src"],Ke={class:"absolute top-20 left-5 sm:left-10 max-w-sm w-[448px] h-[312px] bg-white shadow-lg rounded-lg p-4 border border-gray-200 flex flex-col gap-4 justify-center"},Ve={class:"border-b pb-2"},Je={class:"text-heading3 font-normal font-poppins mt-1"},et={class:"flex gap-1",style:{color:"#666666"}},tt={class:"flex items-center text-bodyh2 font-normal mr-4",style:{color:"#0b0b0b"}},st={class:"flex items-center text-gray-600 text-bodyh2 font-normal justify-between border-b pb-2"},lt={class:"flex justify-center gap-1",style:{color:"#0b0b0b"}},ot={class:"flex items-center gap-2 justify-center",style:{color:"#0b0b0b"}},at={class:"text-bodyh2 font-normal"},it={class:"flex space-x-2 border-b pb-2"},rt=["src"],nt={key:1,class:"w-8 h-8 flex items-center justify-center bg-gray-50"},ct={class:""},dt={class:"w-full bg-gray-200 rounded-full h-[5px]"},ut={class:"text-caption font-normal mt-1",style:{color:"#0b0b0b"}},mt={class:"w-full bg-gray-700"},pt={class:"p-6 md:p-10 bg-gray-100"},vt={class:"grid gap-6 lg:grid-cols-3"},ft={class:"lg:col-span-2 flex flex-col justify-between items-start"},bt=["innerHTML"],gt={class:"flex items-center gap-[12px] flex-col justify-self-start mt-[220px]"},yt={class:"text-gray-700 font-medium flex items-center space-x-2"},ht={class:"flex items-center gap-3 justify-start w-[230px]"},xt=["aria-label"],wt={class:"mt-10"},_t={class:"flex justify-between"},kt={class:"flex items-center"},At={key:0,class:"flex items-center gap-4"},Ct={key:1,class:"w-full h-[330px]"},St=320,$t={__name:"Empower",setup(w){const f=[{name:"Facebook",svg:te},{name:"X",svg:se},{name:"LinkedIn",svg:le},{name:"WhatsApp",svg:oe}],b=L("call"),I=L("store"),i=m([]),j=Y(),A=L("formatDate"),d=m(null),v=m(!0),_=m(!1),x=()=>C(this,null,function*(){try{const c=yield b("mykartavya.controllers.api.activity_details",{name:j.params.name});c&&(i.value=c)}catch(c){console.error("Error fetching activity data:",c)}}),g=m([]),r=()=>C(this,null,function*(){try{const c=yield b("mykartavya.controllers.api.related_opportunities",{name:j.params.name,sdgs:i.value.sdgs});c&&(g.value=c)}catch(c){console.error("Error fetching activity data:",c)}});X(()=>C(this,null,function*(){yield x(),yield r()})),O(()=>I.refresh_step,c=>{c&&(x(),I.refresh_step=!1)},{immediate:!0,deep:!0}),O(()=>j.params.name,(c,y)=>C(this,null,function*(){c!=y&&(yield x(),yield r())}),{immediate:!0,deep:!0});const M=St,R=()=>{d.value&&d.value.scrollTo({left:Math.max(0,d.value.scrollLeft-M),behavior:"smooth"})},n=()=>{if(d.value){const c=d.value.scrollWidth-d.value.clientWidth;d.value.scrollTo({left:Math.min(c,d.value.scrollLeft+M),behavior:"smooth"})}},F=()=>{if(!d.value)return;const{scrollLeft:c,scrollWidth:y,clientWidth:B}=d.value;v.value=c<=0,_.value=c+B>=y};return K(()=>{d.value&&d.value.addEventListener("scroll",F)}),window.addEventListener("resize",()=>{}),(c,y)=>{var B,T,l;return o(),a("div",Ze,[e("section",null,[i.value?(o(),a("div",qe,[e("img",{src:i.value.activity_image,class:"w-full h-full",alt:""},null,8,Xe),e("div",Ke,[e("div",Ve,[e("h2",Je,p(i.value.title),1),y[0]||(y[0]=e("span",{class:"text-secondary font-medium text-caption"},"Online",-1))]),e("div",et,[S(h(N),{name:"calendar",class:"size-4 text-[#666666]"}),e("span",tt,p(h(A)(i.value.start_date))+" - "+p(h(A)(i.value.end_date)),1)]),e("div",st,[e("span",lt,[S(h(N),{name:"clock",class:"size-4 text-[#666666]"}),H(" "+p(i.value.hours)+" hr ",1)]),e("span",ot,[S(h(N),{name:"database",class:"size-4 text-secondary"}),e("span",at,p(i.value.karma_points),1)])]),e("div",it,[i.value.sdgs?(o(!0),a(E,{key:0},P(JSON.parse(i.value.sdgs),t=>{var s;return o(),a("div",null,[t.image?(o(),a("img",{key:0,src:t.image,class:"w-8 h-8"},null,8,rt)):(o(),a("span",nt,p((s=t.sdgs_name)==null?void 0:s.charAt(0)),1))])}),256)):k("",!0)]),e("div",ct,[e("div",dt,[e("div",{class:"bg-green-500 h-[5px] rounded-full",style:V(`width:${(B=i.value.com_percent)!=null?B:0}%`)},null,4)]),e("p",ut,p((T=i.value.com_percent)!=null?T:0)+" % completed ",1)])])])):k("",!0)]),e("section",mt,[e("div",pt,[e("div",vt,[e("div",ft,[e("div",{innerHTML:i.value.activity_description},null,8,bt),e("div",gt,[e("span",yt,[S(h(ee),{class:"w-4 h-4 text-[#666666]"}),y[1]||(y[1]=e("span",{class:"text-bodyh1 font-medium font-poppins",style:{color:"#0b0b0b"}},"Share activity with others",-1))]),e("div",ht,[(o(),a(E,null,P(f,t=>e("button",{key:t.name,"aria-label":t.name,class:"p-1.5 bg-white rounded-full hover:bg-gray-300"},[(o(),G(J(t.svg),{class:"w-5 h-5 text-gray-600"}))],8,xt)),64))])])]),e("div",null,[(o(),G(Ye,{activity:i.value,key:i.value.activity},null,8,["activity"]))])]),e("div",wt,[e("div",_t,[y[2]||(y[2]=e("h2",{class:"text-heading4 font-medium font-poppins",style:{color:"#0b0b0b"}}," Related Opportunities ",-1)),e("div",kt,[S(h(N),{onClick:R,class:$(["size-5 cursor-pointer",v.value?"text-gray-500 disabled":"text-gray-700"]),name:"chevron-left",disabled:v.value},null,8,["class","disabled"]),S(h(N),{onClick:n,class:$(["size-5 cursor-pointer",_.value?"text-gray-500 disabled":"text-gray-700"]),name:"chevron-right",disabled:_.value},null,8,["class","disabled"])])]),e("div",{ref_key:"scrollContainer",ref:d,class:"py-4 w-full overflow-x-scroll"},[((l=g.value)==null?void 0:l.length)>0?(o(),a("div",At,[(o(!0),a(E,null,P(g.value,(t,s)=>(o(),G(ie,{key:s,item:t,class:"w-[320px] min-w-[320px] max-w-[320px]"},null,8,["item"]))),128))])):(o(),a("div",Ct,[S(ae)]))],512)])])])])}}},Lt=Q($t,[["__scopeId","data-v-22523349"]]);export{Lt as default};
