var c=(X,b,y)=>new Promise((i,r)=>{var t=p=>{try{x(y.next(p))}catch(v){r(v)}},w=p=>{try{x(y.throw(p))}catch(v){r(v)}},x=p=>p.done?i(p.value):Promise.resolve(p.value).then(t,w);x((y=y.apply(X,b)).next())});import{_ as F,r as f,o as S,c as m,a as e,n as R,z as M,m as D,t as _,s as n,f as s,v as u,ad as h,F as P,h as V,i as I,y as $,j as g}from"./index-BZ_dGV7y.js";import{l as d}from"./index-CW2CBr58.js";/* empty css              */const L={class:"max-w-[1920px] mx-auto px-10 pt-[82px] pb-4 bg-gray-50"},T={class:"bg-white rounded-lg shadow mt-4"},Y={class:"p-6"},j={key:0,class:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded relative",role:"alert"},z={class:"block sm:inline"},A={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},H={class:"md:col-span-2"},G=["value"],J=["value"],K=["value"],O={class:"mt-6"},Q=["disabled"],W={__name:"Company",setup(X){const b=I("call"),y=$(),i=f(!1),r=f(null),t=f({registration_type:"Self Registration",registration_date:"",company_name:"",first_name:"",last_name:"",email:"",designation:"",phone:"",mobile_number:"",address:"",country:"India",state:"",city:"",pincode:"",number_of_employees:"",clear_vision:"Yes",volunteering_csr_activities:"",employee_engagement:""}),w=()=>{r.value=null;const a=["company_name","registration_date","first_name","last_name","email","designation","mobile_number","address","country","state","city","pincode","number_of_employees","clear_vision","volunteering_csr_activities","employee_engagement"];for(const k of a)if(!t.value[k])return r.value=`Please fill in ${k.replace(/_/g," ")}.`,d.error(r.value,{position:"top-right",autoClose:3e3,hideProgressBar:!1}),!1;if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t.value.email))return r.value="Please enter a valid email address.",d.error(r.value,{position:"top-right",autoClose:3e3,hideProgressBar:!1}),!1;const l=/^\d{10}$/;if(!l.test(t.value.mobile_number))return r.value="Mobile number must be exactly 10 digits.",d.error(r.value,{position:"top-right",autoClose:3e3,hideProgressBar:!1}),!1;if(t.value.phone&&!l.test(t.value.phone))return r.value="Phone number must be exactly 10 digits.",d.error(r.value,{position:"top-right",autoClose:3e3,hideProgressBar:!1}),!1;if(!/^\d{6}$/.test(t.value.pincode))return r.value="Pincode must be exactly 6 digits.",d.error(r.value,{position:"top-right",autoClose:3e3,hideProgressBar:!1}),!1;if(parseInt(t.value.number_of_employees)<1)return r.value="Number of employees must be at least 1.",d.error(r.value,{position:"top-right",autoClose:3e3,hideProgressBar:!1}),!1;const E=["volunteering_csr_activities","employee_engagement"];for(const k of E){const C=parseFloat(t.value[k]);if(isNaN(C)||C<0||C>100)return r.value=`${k.replace(/_/g," ")} must be between 0 and 100.`,d.error(r.value,{position:"top-right",autoClose:3e3,hideProgressBar:!1}),!1}return!0},x=()=>c(this,null,function*(){try{if(!w())return;i.value=!0;const a=yield b("mykartavya.mykartavya.api.register_company",{registration_type:t.value.registration_type,registration_date:t.value.registration_date,company_name:t.value.company_name,first_name:t.value.first_name,last_name:t.value.last_name,email:t.value.email,designation:t.value.designation,phone:t.value.phone,mobile_number:t.value.mobile_number,address:t.value.address,country:t.value.country,state:t.value.state,city:t.value.city,pincode:t.value.pincode,number_of_employees:t.value.number_of_employees,clear_vision:t.value.clear_vision,volunteering_csr_activities:t.value.volunteering_csr_activities,employee_engagement:t.value.employee_engagement});if(a.status==="error")throw new Error(a.message);d.success("Company Registration Successful! Please check your email for login credentials.",{position:"top-right",autoClose:5e3,hideProgressBar:!1}),setTimeout(()=>{y.push("/")},2e3)}catch(a){console.error("Error submitting form:",a),d.error(a.message||"Failed to register company. Please try again.",{position:"top-right",autoClose:5e3,hideProgressBar:!1})}finally{i.value=!1}}),p=f([]),v=f([]),q=f([]),U=()=>c(this,null,function*(){try{i.value=!0;const a=yield b("mykartavya.controllers.api.country_data");p.value=a||[]}catch(a){console.error("Error fetching countries:",a),d.error("Failed to load countries. Please try again.",{position:"top-right",autoClose:3e3,hideProgressBar:!1})}finally{i.value=!1}}),N=()=>c(this,null,function*(){try{if(!t.value.country)return;i.value=!0;const a=yield b("mykartavya.controllers.api.state_data",{country:t.value.country});v.value=a||[],t.value.state="",t.value.city=""}catch(a){console.error("Error fetching states:",a),d.error("Failed to load states. Please try again.",{position:"top-right",autoClose:3e3,hideProgressBar:!1})}finally{i.value=!1}}),B=()=>c(this,null,function*(){try{if(!t.value.state)return;i.value=!0;const a=yield b("mykartavya.controllers.api.city_data",{state:t.value.state});q.value=a||[],t.value.city=""}catch(a){console.error("Error fetching cities:",a),d.error("Failed to load cities. Please try again.",{position:"top-right",autoClose:3e3,hideProgressBar:!1})}finally{i.value=!1}});return S(()=>c(this,null,function*(){yield U(),t.value.country&&(yield N())})),(a,o)=>(g(),m("div",L,[e("div",T,[e("div",Y,[o[38]||(o[38]=e("h2",{class:"text-xl font-semibold text-gray-700 mb-4"},"Company Registration",-1)),e("form",{onSubmit:M(x,["prevent"]),class:R(["space-y-8",{loading:i.value}])},[r.value?(g(),m("div",j,[e("span",z,_(r.value),1)])):D("",!0),e("div",A,[e("div",null,[o[17]||(o[17]=e("label",{class:"block text-bodyh1 font-normal text-gray-700 mb-1"},[s(" Company Name "),e("span",{class:"text-red-500 pt-2"},"*")],-1)),n(e("input",{"onUpdate:modelValue":o[0]||(o[0]=l=>t.value.company_name=l),type:"text",placeholder:"Enter Company Name",required:"",class:"block w-full border border-gray-300 text-bodyh2 rounded py-2 px-3 focus:outline-none focus:ring focus:ring-orange-200"},null,512),[[u,t.value.company_name]])]),e("div",null,[o[18]||(o[18]=e("label",{class:"block text-bodyh1 font-normal text-gray-700 mb-1"},[s(" Registration Date "),e("span",{class:"text-red-500 pt-2"},"*")],-1)),n(e("input",{"onUpdate:modelValue":o[1]||(o[1]=l=>t.value.registration_date=l),type:"date",required:"",class:"block w-full border border-gray-300 text-bodyh2 rounded py-2 px-3 focus:outline-none focus:ring focus:ring-orange-200"},null,512),[[u,t.value.registration_date]])]),e("div",null,[o[19]||(o[19]=e("label",{class:"block text-bodyh1 font-normal text-gray-700 mb-1"},[s(" Email "),e("span",{class:"text-red-500 pt-2"},"*")],-1)),n(e("input",{"onUpdate:modelValue":o[2]||(o[2]=l=>t.value.email=l),type:"email",placeholder:"company@example.com",required:"",class:"block w-full border border-gray-300 text-bodyh2 rounded py-2 px-3 focus:outline-none focus:ring focus:ring-orange-200"},null,512),[[u,t.value.email]])]),e("div",null,[o[20]||(o[20]=e("label",{class:"block text-bodyh1 font-normal text-gray-700 mb-1"},[s(" First Name "),e("span",{class:"text-red-500 pt-2"},"*")],-1)),n(e("input",{"onUpdate:modelValue":o[3]||(o[3]=l=>t.value.first_name=l),type:"text",placeholder:"First Name",required:"",class:"block w-full border border-gray-300 text-bodyh2 rounded py-2 px-3 focus:outline-none focus:ring focus:ring-orange-200"},null,512),[[u,t.value.first_name]])]),e("div",null,[o[21]||(o[21]=e("label",{class:"block text-bodyh1 font-normal text-gray-700 mb-1"},[s(" Last Name "),e("span",{class:"text-red-500 pt-2"},"*")],-1)),n(e("input",{"onUpdate:modelValue":o[4]||(o[4]=l=>t.value.last_name=l),type:"text",placeholder:"Last Name",required:"",class:"block w-full border border-gray-300 text-bodyh2 rounded py-2 px-3 focus:outline-none focus:ring focus:ring-orange-200"},null,512),[[u,t.value.last_name]])]),e("div",null,[o[22]||(o[22]=e("label",{class:"block text-bodyh1 font-normal text-gray-700 mb-1"},[s(" Designation "),e("span",{class:"text-red-500 pt-2"},"*")],-1)),n(e("input",{"onUpdate:modelValue":o[5]||(o[5]=l=>t.value.designation=l),type:"text",placeholder:"e.g., Director, Manager",required:"",class:"block w-full border border-gray-300 text-bodyh2 rounded py-2 px-3 focus:outline-none focus:ring focus:ring-orange-200"},null,512),[[u,t.value.designation]])]),e("div",null,[o[23]||(o[23]=e("label",{class:"block text-bodyh1 font-normal text-gray-700 mb-1"},[s(" Mobile Number "),e("span",{class:"text-red-500 pt-2"},"*")],-1)),n(e("input",{"onUpdate:modelValue":o[6]||(o[6]=l=>t.value.mobile_number=l),type:"tel",placeholder:"+91 XXXXX XXXXX",required:"",class:"block w-full border border-gray-300 text-bodyh2 rounded py-2 px-3 focus:outline-none focus:ring focus:ring-orange-200"},null,512),[[u,t.value.mobile_number]])]),e("div",null,[o[24]||(o[24]=e("label",{class:"block text-bodyh1 font-normal text-gray-700 mb-1"}," Phone ",-1)),n(e("input",{"onUpdate:modelValue":o[7]||(o[7]=l=>t.value.phone=l),type:"tel",placeholder:"+91 XXXXX XXXXX",class:"block w-full border border-gray-300 text-bodyh2 rounded py-2 px-3 focus:outline-none focus:ring focus:ring-orange-200"},null,512),[[u,t.value.phone]])]),e("div",H,[o[25]||(o[25]=e("label",{class:"block text-bodyh1 font-normal text-gray-700 mb-1"},[s(" India Headquarters Address "),e("span",{class:"text-red-500 pt-2"},"*")],-1)),n(e("textarea",{"onUpdate:modelValue":o[8]||(o[8]=l=>t.value.address=l),rows:"3",placeholder:"Enter complete address with landmarks",required:"",class:"block w-full border border-gray-300 text-bodyh2 rounded py-2 px-3 focus:outline-none focus:ring focus:ring-orange-200"},null,512),[[u,t.value.address]])]),e("div",null,[o[27]||(o[27]=e("label",{class:"block text-bodyh1 font-normal text-gray-700 mb-1"},[s(" Country "),e("span",{class:"text-red-500 pt-2"},"*")],-1)),n(e("select",{"onUpdate:modelValue":o[9]||(o[9]=l=>t.value.country=l),onChange:N,required:"",class:"block w-full border border-gray-300 text-bodyh2 rounded py-2 px-3 focus:outline-none focus:ring focus:ring-orange-200"},[o[26]||(o[26]=e("option",{value:"",disabled:""},"Select Country",-1)),(g(!0),m(P,null,V(p.value,l=>(g(),m("option",{key:l.name,value:l.name},_(l.label||l.name),9,G))),128))],544),[[h,t.value.country]])]),e("div",null,[o[29]||(o[29]=e("label",{class:"block text-bodyh1 font-normal text-gray-700 mb-1"},[s(" State "),e("span",{class:"text-red-500 pt-2"},"*")],-1)),n(e("select",{"onUpdate:modelValue":o[10]||(o[10]=l=>t.value.state=l),onChange:B,required:"",class:"block w-full border border-gray-300 text-bodyh2 rounded py-2 px-3 focus:outline-none focus:ring focus:ring-orange-200"},[o[28]||(o[28]=e("option",{value:"",disabled:""},"Select State",-1)),(g(!0),m(P,null,V(v.value,l=>(g(),m("option",{key:l.name,value:l.name},_(l.state_name||l.name),9,J))),128))],544),[[h,t.value.state]])]),e("div",null,[o[31]||(o[31]=e("label",{class:"block text-bodyh1 font-normal text-gray-700 mb-1"},[s(" City "),e("span",{class:"text-red-500 pt-2"},"*")],-1)),n(e("select",{"onUpdate:modelValue":o[11]||(o[11]=l=>t.value.city=l),required:"",class:"block w-full border border-gray-300 text-bodyh2 rounded py-2 px-3 focus:outline-none focus:ring focus:ring-orange-200"},[o[30]||(o[30]=e("option",{value:"",disabled:""},"Select City",-1)),(g(!0),m(P,null,V(q.value,l=>(g(),m("option",{key:l.name,value:l.name},_(l.district_name||l.name),9,K))),128))],512),[[h,t.value.city]])]),e("div",null,[o[32]||(o[32]=e("label",{class:"block text-bodyh1 font-normal text-gray-700 mb-1"},[s(" Pincode "),e("span",{class:"text-red-500 pt-2"},"*")],-1)),n(e("input",{"onUpdate:modelValue":o[12]||(o[12]=l=>t.value.pincode=l),type:"text",placeholder:"Enter PIN code",required:"",class:"block w-full border border-gray-300 text-bodyh2 rounded py-2 px-3 focus:outline-none focus:ring focus:ring-orange-200"},null,512),[[u,t.value.pincode]])]),e("div",null,[o[33]||(o[33]=e("label",{class:"block text-bodyh1 font-normal text-gray-700 mb-1"},[s(" Number of Employees "),e("span",{class:"text-red-500 pt-2"},"*")],-1)),n(e("input",{"onUpdate:modelValue":o[13]||(o[13]=l=>t.value.number_of_employees=l),type:"number",min:"1",required:"",class:"block w-full border border-gray-300 text-bodyh2 rounded py-2 px-3 focus:outline-none focus:ring focus:ring-orange-200"},null,512),[[u,t.value.number_of_employees]])]),e("div",null,[o[35]||(o[35]=e("label",{class:"block text-bodyh1 font-normal text-gray-700 mb-1"},[s(" Clear Vision "),e("span",{class:"text-red-500 pt-2"},"*")],-1)),n(e("select",{"onUpdate:modelValue":o[14]||(o[14]=l=>t.value.clear_vision=l),required:"",class:"block w-full border border-gray-300 text-bodyh2 rounded py-2 px-3 focus:outline-none focus:ring focus:ring-orange-200"},o[34]||(o[34]=[e("option",{value:"Yes"},"Yes",-1),e("option",{value:"No"},"No",-1)]),512),[[h,t.value.clear_vision]])]),e("div",null,[o[36]||(o[36]=e("label",{class:"block text-bodyh1 font-normal text-gray-700 mb-1"},[s(" Volunteering CSR Activities Cost (%) "),e("span",{class:"text-red-500 pt-2"},"*")],-1)),n(e("input",{"onUpdate:modelValue":o[15]||(o[15]=l=>t.value.volunteering_csr_activities=l),type:"number",min:"0",max:"100",required:"",class:"block w-full border border-gray-300 text-bodyh2 rounded py-2 px-3 focus:outline-none focus:ring focus:ring-orange-200"},null,512),[[u,t.value.volunteering_csr_activities]])]),e("div",null,[o[37]||(o[37]=e("label",{class:"block text-bodyh1 font-normal text-gray-700 mb-1"},[s(" Employee Engagement Coverage (%) "),e("span",{class:"text-red-500 pt-2"},"*")],-1)),n(e("input",{"onUpdate:modelValue":o[16]||(o[16]=l=>t.value.employee_engagement=l),type:"number",min:"0",max:"100",required:"",class:"block w-full border border-gray-300 text-bodyh2 rounded py-2 px-3 focus:outline-none focus:ring focus:ring-orange-200"},null,512),[[u,t.value.employee_engagement]])])]),e("div",O,[e("button",{type:"submit",class:"bg-orange-500 text-white font-semibold py-2 px-4 rounded-sm hover:bg-orange-600 transition",disabled:i.value},_(i.value?"Registering...":"Register Company"),9,Q)])],34)])])]))}},le=F(W,[["__scopeId","data-v-608b0b6a"]]);export{le as default};
