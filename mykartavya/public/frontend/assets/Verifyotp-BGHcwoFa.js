var f=(y,c,a)=>new Promise((u,l)=>{var n=r=>{try{p(a.next(r))}catch(d){l(d)}},i=r=>{try{p(a.throw(r))}catch(d){l(d)}},p=r=>r.done?u(r.value):Promise.resolve(r.value).then(n,i);p((a=a.apply(y,c)).next())});import{r as m,s as T,c as x,d as t,g as P,e as g,f as h,t as C,a as _,w as F,y as b,i as V,x as I,b as v}from"./index-C5OKIlK7.js";import{_ as j,a as B,b as N}from"./Frame (1)-BNHRP8Uf.js";import{l as o}from"./index-BhK-qLUS.js";const R={class:"pt-[62px] flex flex-col items-center min-h-screen bg-secondary",style:{background:"#F5F5F5"}},q={class:"flex flex-col items-center text-center w-full px-4 min-h-[calc(100vh-64px)] justify-center"},E={class:"bg-white p-6 mt-[36px] rounded-sm w-[443px] max-w-full"},J={class:"text-gray-600 text-center mt-1 text-[12px] font-normal"},S={class:"text-orange-500 font-semibold"},Y={class:"flex justify-center space-x-2 mt-4"},A={style:{display:"flex","flex-direction":"row"}},D={key:0,class:"h-5 w-5"},H={key:1},K={class:"text-center text-[14px] text-gray-600 mt-4"},G={__name:"Verifyotp",setup(y){const c=V("call"),a=I(),u=T(),l=m(!1),n=m(u.query.email||""),i=m(""),p=()=>f(this,null,function*(){if(!n.value){o.error("Please enter an email");return}try{(yield c("mykartavya.controllers.email.send_otp",{email:n.value})).status==="success"?o.success("OTP sent successfully"):o.error("Failed to send OTP")}catch(s){o.error("Failed to send OTP")}}),r=()=>f(this,null,function*(){if(i.value.length!==6){o.error("Please enter a 6-digit OTP");return}if(!n.value){a.push("/login");return}if(u.query.full_name){const s=yield c("mykartavya.controllers.email.register_verify_otp",{email:n.value,otp:i.value,full_name:u.query.full_name});s.status==="success"?(o.success("OTP verified successfully"),a.push("/updateprofile"),window.location.reload()):o.error(s.message)}else try{l.value=!0;const s=yield c("mykartavya.controllers.email.verify_otp",{email:n.value,otp:i.value});l.value=!1,s.status==="success"?(o.success("OTP verified successfully"),window.location.reload()):o.error("Invalid OTP, please try again")}catch(s){l.value=!1,console.error("Error verifying OTP:",s),o.error("Failed to verify OTP")}}),d=()=>{p()};return(s,e)=>{const w=_("v-otp-input"),O=_("router-link");return v(),x("div",R,[t("main",q,[e[5]||(e[5]=P('<h1 class="text-[28px] md:text-[33px] font-normal font-poppins">Your Journey of Kindness Starts Here</h1><div class="text-center mt-2"><div class="flex flex-wrap justify-center gap-2 md:gap-4"><button class="border px-4 h-8 items-center bg-white rounded-full text-black border-orange-500 flex gap-1"><img src="'+j+'" alt="Track Icon" class="w-4"><p class="text-[14px] font-normal">Track Your Impact</p></button><button class="border px-4 h-8 items-center bg-white rounded-full text-black border-orange-500 flex gap-1"><img src="'+B+'" alt="Join Icon" class="w-4"><p class="text-[14px] font-normal">Join Activities Anywhere</p></button><button class="border px-4 h-8 items-center bg-white rounded-full text-black flex gap-1" style="border-color:#F185BB;"><img src="'+N+'" alt="Connect Icon" class="w-4"><p class="text-[14px] font-normal">Connect with a Community</p></button></div></div>',2)),t("div",E,[e[4]||(e[4]=t("h2",{class:"text-[20px] font-medium font-poppins text-gray-900 text-center"},"OTP Verification",-1)),t("p",J,[e[1]||(e[1]=h(" We've shared a 6-digit OTP on ")),t("span",S,C(n.value||"sample@gmail.com"),1)]),t("div",Y,[t("div",A,[g(w,{ref:"otpInput","input-classes":"otp-input",conditionalClass:["one","two","three","four","five","six"],separator:"-","num-inputs":6,value:i.value,"onUpdate:value":e[0]||(e[0]=k=>i.value=k),"should-auto-focus":!0,"should-focus-order":!0,onOnChange:s.handleOnChange,"input-type":"number",onOnComplete:s.handleOnComplete,placeholder:["*","*","*","*","*","*"]},null,8,["value","onOnChange","onOnComplete"])])]),g(O,{to:"/mykarma"},{default:F(()=>[t("button",{onClick:b(r,["prevent"]),class:"w-full flex items-center justify-center h-10 bg-orange-500 text-white py-2 text-[12px] mt-6 rounded-sm hover:bg-orange-600"},[l.value?(v(),x("div",D,e[2]||(e[2]=[t("div",{class:"animate-spin h-full w-full rounded-full border-[2px] flex justify-center items-center border-dotted border-[#fff]"},[t("div",{class:"w-3 h-3 rounded-full border-dashed border-[1px] border-[#fff]"})],-1)]))):(v(),x("p",H,"VERIFY"))])]),_:1}),t("p",K,[e[3]||(e[3]=h(" Didnâ€™t receive? ")),t("a",{href:"#",onClick:b(d,["prevent"]),class:"text-orange-500 font-normal text-[14px]"},"Resend OTP")])])])])}}};export{G as default};
