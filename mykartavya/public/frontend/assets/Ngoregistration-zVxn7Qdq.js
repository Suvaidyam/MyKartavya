var B=Object.defineProperty;var P=Object.getOwnPropertySymbols;var A=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable;var U=(b,n,s)=>n in b?B(b,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):b[n]=s,F=(b,n)=>{for(var s in n||(n={}))A.call(n,s)&&U(b,s,n[s]);if(P)for(var s of P(n))D.call(n,s)&&U(b,s,n[s]);return b};var y=(b,n,s)=>new Promise((l,d)=>{var p=g=>{try{m(s.next(g))}catch(h){d(h)}},w=g=>{try{m(s.throw(g))}catch(h){d(h)}},m=g=>g.done?l(g.value):Promise.resolve(g.value).then(p,w);m((s=s.apply(b,n)).next())});import{j as M,r as v,l as O,o as L,c,d as o,n as H,z as I,m as T,t as x,s as r,f as i,v as u,ad as k,F as X,h as C,i as W,y as $,b as f}from"./index-CeIEzR2z.js";import{l as _}from"./index-tfe0ER04.js";/* empty css              */const j={class:"max-w-[1920px] mx-auto px-10 pt-[82px] pb-4 bg-gray-50"},z={class:"bg-white rounded-lg shadow mt-4"},Y={class:"p-6"},J={key:0,class:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded relative",role:"alert"},K={class:"block sm:inline"},Q={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Z=["value"],ee=["value"],oe=["value"],te=["value"],le={class:"md:col-span-2"},ae={class:"md:col-span-2"},re={class:"flex items-center px-4 py-3 bg-white rounded-lg shadow-sm border-2 border-dashed border-gray-300 cursor-pointer hover:bg-gray-50 transition"},ne={class:"mt-6"},se=["disabled"],ie={__name:"Ngoregistration",setup(b){const n=W("call"),s=$(),l=v({registration_type:"Self Registration",ngo_name:"",website:"",official_contact_number:"",email:"",designation:"",state:"",city:"",description:"",license_type:"FCRA",contact_person_name:"",ngo_head_name:"",ngo_head_email:"",ngo_head_mobile:"",ngo_head_office_number:"",area_of_work:"",address:"",pincode:"",registered_with_bigtech:"No",ngo_logo:null,country:"India"}),d=v(!1),p=v(null),w=v([]),m=v([]),g=v([]),h=v(["Education","Skills","Environment","Financial Inclusion","Accessibility and Inclusion","Disaster Management","Healthcare"]),G=()=>y(this,null,function*(){try{d.value=!0;const a=yield n("mykartavya.controllers.api.country_data");w.value=a||[],console.log("Countries fetched:",w.value)}catch(a){console.error("Error fetching countries:",a),p.value="Failed to load countries. Please try again."}finally{d.value=!1}}),V=()=>y(this,null,function*(){try{if(!l.value.country)return;d.value=!0;const a=yield n("mykartavya.controllers.api.state_data",{country:l.value.country});m.value=a||[],l.value.state="",l.value.city="",console.log("States fetched:",m.value)}catch(a){console.error("Error fetching states:",a),p.value="Failed to load states. Please try again."}finally{d.value=!1}}),S=()=>y(this,null,function*(){try{if(!l.value.state)return;d.value=!0;const a=yield n("mykartavya.controllers.api.city_data",{state:l.value.state});g.value=a||[],l.value.city="",console.log("Cities fetched:",g.value)}catch(a){console.error("Error fetching cities:",a),p.value="Failed to load cities. Please try again."}finally{d.value=!1}});O(()=>l.value.country,a=>{a&&V()}),O(()=>l.value.state,a=>{a&&S()}),L(()=>y(this,null,function*(){yield G(),l.value.country&&(yield V())}));const q=a=>y(this,null,function*(){const e=a.target.files[0];if(e)try{const t=new FormData;t.append("file",e);const N=yield n("upload_file",{file:t,is_private:0,doctype:"NGOs",fieldname:"ngo_logo"});l.value.ngo_logo=N.file_url,_.success("Logo uploaded successfully!",{position:"top-right",autoClose:3e3,hideProgressBar:!1})}catch(t){console.error("Error uploading file:",t),_.error("Failed to upload logo. Please try again.",{position:"top-right",autoClose:3e3,hideProgressBar:!1})}}),E=()=>{const a=["ngo_name","email","official_contact_number","designation","country","state","city","description","contact_person_name","ngo_head_name","ngo_head_email","ngo_head_mobile","area_of_work","address","pincode"];for(const N of a)if(!l.value[N])return p.value=`Please fill in ${N.replace(/_/g," ")}.`,!1;const e=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;if(!e.test(l.value.email)||!e.test(l.value.ngo_head_email))return p.value="Please enter valid email addresses.",!1;const t=/^\d{10}$/;return!t.test(l.value.official_contact_number)||!t.test(l.value.ngo_head_mobile)||l.value.ngo_head_office_number&&!t.test(l.value.ngo_head_office_number)?(p.value="Please enter valid 10-digit phone numbers.",!1):/^\d{6}$/.test(l.value.pincode)?!0:(p.value="Please enter a valid 6-digit pincode.",!1)},R=()=>y(this,null,function*(){try{if(p.value=null,!E())return;d.value=!0;const a=yield n("mykartavya.mykartavya.api.register_ngo",F({},l.value));a.status==="success"?(_.success("NGO Registration Successful! Please check your email for login credentials.",{position:"top-right",autoClose:5e3,hideProgressBar:!1}),setTimeout(()=>{s.push("/")},2e3)):_.error(a.message||"Failed to register NGO. Please try again.",{position:"top-right",autoClose:5e3,hideProgressBar:!1})}catch(a){console.error("Error submitting form:",a),_.error(a.message||"Failed to register NGO. Please try again.",{position:"top-right",autoClose:5e3,hideProgressBar:!1})}finally{d.value=!1}});return(a,e)=>(f(),c("div",j,[o("div",z,[o("div",Y,[e[47]||(e[47]=o("h2",{class:"text-xl font-semibold text-gray-700 mb-4"},"NGO Registration",-1)),o("form",{onSubmit:I(R,["prevent"]),class:H(["space-y-8",{loading:d.value}])},[p.value?(f(),c("div",J,[o("span",K,x(p.value),1)])):T("",!0),o("div",Q,[o("div",null,[e[19]||(e[19]=o("label",{class:"block text-bodyh1 font-normal text-gray-700 mb-1"},[i(" NGO Name "),o("span",{class:"text-red-500 pt-2"},"*")],-1)),r(o("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.value.ngo_name=t),type:"text",placeholder:"Enter NGO Name",required:"",class:"block w-full border border-gray-300 text-bodyh2 rounded py-2 px-3 focus:outline-none focus:ring focus:ring-orange-200"},null,512),[[u,l.value.ngo_name]])]),o("div",null,[e[20]||(e[20]=o("label",{class:"block text-bodyh1 font-normal text-gray-700 mb-1"}," Website ",-1)),r(o("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>l.value.website=t),type:"url",placeholder:"https://example.org",class:"block w-full border border-gray-300 text-bodyh2 rounded py-2 px-3 focus:outline-none focus:ring focus:ring-orange-200"},null,512),[[u,l.value.website]])]),o("div",null,[e[21]||(e[21]=o("label",{class:"block text-bodyh1 font-normal text-gray-700 mb-1"},[i(" Official Contact Number "),o("span",{class:"text-red-500 pt-2"},"*")],-1)),r(o("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>l.value.official_contact_number=t),type:"tel",placeholder:"+91 XXXXX XXXXX",required:"",class:"block w-full border border-gray-300 text-bodyh2 rounded py-2 px-3 focus:outline-none focus:ring focus:ring-orange-200"},null,512),[[u,l.value.official_contact_number]])]),o("div",null,[e[22]||(e[22]=o("label",{class:"block text-bodyh1 font-normal text-gray-700 mb-1"},[i(" Email "),o("span",{class:"text-red-500 pt-2"},"*")],-1)),r(o("input",{"onUpdate:modelValue":e[3]||(e[3]=t=>l.value.email=t),type:"email",placeholder:"ngo@example.com",required:"",class:"block w-full border border-gray-300 text-bodyh2 rounded py-2 px-3 focus:outline-none focus:ring focus:ring-orange-200"},null,512),[[u,l.value.email]])]),o("div",null,[e[23]||(e[23]=o("label",{class:"block text-bodyh1 font-normal text-gray-700 mb-1"},[i(" Designation "),o("span",{class:"text-red-500 pt-2"},"*")],-1)),r(o("input",{"onUpdate:modelValue":e[4]||(e[4]=t=>l.value.designation=t),type:"text",placeholder:"e.g., Director, Secretary",required:"",class:"block w-full border border-gray-300 text-bodyh2 rounded py-2 px-3 focus:outline-none focus:ring focus:ring-orange-200"},null,512),[[u,l.value.designation]])]),o("div",null,[e[25]||(e[25]=o("label",{class:"block text-bodyh1 font-normal text-gray-700 mb-1"},[i(" License Type "),o("span",{class:"text-red-500 pt-2"},"*")],-1)),r(o("select",{"onUpdate:modelValue":e[5]||(e[5]=t=>l.value.license_type=t),required:"",class:"block w-full border border-gray-300 text-bodyh2 rounded py-2 px-3 focus:outline-none focus:ring focus:ring-orange-200"},e[24]||(e[24]=[o("option",{value:"FCRA"},"FCRA",-1),o("option",{value:"12A"},"Non-FCRA",-1)]),512),[[k,l.value.license_type]])]),o("div",null,[e[27]||(e[27]=o("label",{class:"block text-bodyh1 font-normal text-gray-700 mb-1"},[i(" Country "),o("span",{class:"text-red-500 pt-2"},"*")],-1)),r(o("select",{"onUpdate:modelValue":e[6]||(e[6]=t=>l.value.country=t),class:"block w-full border border-gray-300 text-bodyh2 rounded py-2 px-3 focus:outline-none focus:ring focus:ring-orange-200"},[e[26]||(e[26]=o("option",{value:"",disabled:""},"Select Country",-1)),(f(!0),c(X,null,C(w.value,t=>(f(),c("option",{key:t.name,value:t.name},x(t.label||t.name),9,Z))),128))],512),[[k,l.value.country]])]),o("div",null,[e[29]||(e[29]=o("label",{class:"block text-bodyh1 font-normal text-gray-700 mb-1"},[i(" State "),o("span",{class:"text-red-500 pt-2"},"*")],-1)),r(o("select",{"onUpdate:modelValue":e[7]||(e[7]=t=>l.value.state=t),class:"block w-full border border-gray-300 text-bodyh2 rounded py-2 px-3 focus:outline-none focus:ring focus:ring-orange-200"},[e[28]||(e[28]=o("option",{value:"",disabled:""},"Select State",-1)),(f(!0),c(X,null,C(m.value,t=>(f(),c("option",{key:t.name,value:t.name},x(t.state_name||t.name),9,ee))),128))],512),[[k,l.value.state]])]),o("div",null,[e[31]||(e[31]=o("label",{class:"block text-bodyh1 font-normal text-gray-700 mb-1"},[i(" City "),o("span",{class:"text-red-500 pt-2"},"*")],-1)),r(o("select",{"onUpdate:modelValue":e[8]||(e[8]=t=>l.value.city=t),class:"block w-full border border-gray-300 text-bodyh2 rounded py-2 px-3 focus:outline-none focus:ring focus:ring-orange-200"},[e[30]||(e[30]=o("option",{value:"",disabled:""},"Select City",-1)),(f(!0),c(X,null,C(g.value,t=>(f(),c("option",{key:t.name,value:t.name},x(t.district_name||t.name),9,oe))),128))],512),[[k,l.value.city]])]),o("div",null,[e[33]||(e[33]=o("label",{class:"block text-bodyh1 font-normal text-gray-700 mb-1"},[i(" Area of Work "),o("span",{class:"text-red-500 pt-2"},"*")],-1)),r(o("select",{"onUpdate:modelValue":e[9]||(e[9]=t=>l.value.area_of_work=t),class:"block w-full border border-gray-300 text-bodyh2 rounded py-2 px-3 focus:outline-none focus:ring focus:ring-orange-200"},[e[32]||(e[32]=o("option",{value:"",disabled:""},"Select Area of Work",-1)),(f(!0),c(X,null,C(h.value,t=>(f(),c("option",{key:t,value:t},x(t),9,te))),128))],512),[[k,l.value.area_of_work]])]),o("div",null,[e[34]||(e[34]=o("label",{class:"block text-bodyh1 font-normal text-gray-700 mb-1"},[i(" Contact Person Name "),o("span",{class:"text-red-500 pt-2"},"*")],-1)),r(o("input",{"onUpdate:modelValue":e[10]||(e[10]=t=>l.value.contact_person_name=t),type:"text",placeholder:"Full Name",required:"",class:"block w-full border border-gray-300 text-bodyh2 rounded py-2 px-3 focus:outline-none focus:ring focus:ring-orange-200"},null,512),[[u,l.value.contact_person_name]])]),o("div",null,[e[35]||(e[35]=o("label",{class:"block text-bodyh1 font-normal text-gray-700 mb-1"},[i(" NGO Head Name "),o("span",{class:"text-red-500 pt-2"},"*")],-1)),r(o("input",{"onUpdate:modelValue":e[11]||(e[11]=t=>l.value.ngo_head_name=t),type:"text",placeholder:"Full Name",required:"",class:"block w-full border border-gray-300 text-bodyh2 rounded py-2 px-3 focus:outline-none focus:ring focus:ring-orange-200"},null,512),[[u,l.value.ngo_head_name]])]),o("div",null,[e[36]||(e[36]=o("label",{class:"block text-bodyh1 font-normal text-gray-700 mb-1"},[i(" NGO Head Email "),o("span",{class:"text-red-500 pt-2"},"*")],-1)),r(o("input",{"onUpdate:modelValue":e[12]||(e[12]=t=>l.value.ngo_head_email=t),type:"email",placeholder:"head@example.com",required:"",class:"block w-full border border-gray-300 text-bodyh2 rounded py-2 px-3 focus:outline-none focus:ring focus:ring-orange-200"},null,512),[[u,l.value.ngo_head_email]])]),o("div",null,[e[37]||(e[37]=o("label",{class:"block text-bodyh1 font-normal text-gray-700 mb-1"},[i(" NGO Head Mobile "),o("span",{class:"text-red-500 pt-2"},"*")],-1)),r(o("input",{"onUpdate:modelValue":e[13]||(e[13]=t=>l.value.ngo_head_mobile=t),type:"tel",placeholder:"+91 XXXXX XXXXX",required:"",class:"block w-full border border-gray-300 text-bodyh2 rounded py-2 px-3 focus:outline-none focus:ring focus:ring-orange-200"},null,512),[[u,l.value.ngo_head_mobile]])]),o("div",null,[e[38]||(e[38]=o("label",{class:"block text-bodyh1 font-normal text-gray-700 mb-1"}," NGO Head Office Number ",-1)),r(o("input",{"onUpdate:modelValue":e[14]||(e[14]=t=>l.value.ngo_head_office_number=t),type:"tel",placeholder:"+91 XXXXX XXXXX",class:"block w-full border border-gray-300 text-bodyh2 rounded py-2 px-3 focus:outline-none focus:ring focus:ring-orange-200"},null,512),[[u,l.value.ngo_head_office_number]])]),o("div",null,[e[39]||(e[39]=o("label",{class:"block text-bodyh1 font-normal text-gray-700 mb-1"},[i(" Postal Code "),o("span",{class:"text-red-500 pt-2"},"*")],-1)),r(o("input",{"onUpdate:modelValue":e[15]||(e[15]=t=>l.value.pincode=t),type:"text",placeholder:"Enter PIN code",required:"",class:"block w-full border border-gray-300 text-bodyh2 rounded py-2 px-3 focus:outline-none focus:ring focus:ring-orange-200"},null,512),[[u,l.value.pincode]])]),o("div",le,[e[40]||(e[40]=o("label",{class:"block text-bodyh1 font-normal text-gray-700 mb-1"},[i(" Address "),o("span",{class:"text-red-500 pt-2"},"*")],-1)),r(o("textarea",{"onUpdate:modelValue":e[16]||(e[16]=t=>l.value.address=t),rows:"3",placeholder:"Enter address with landmarks",required:"",class:"block w-full border border-gray-300 text-bodyh2 rounded py-2 px-3 focus:outline-none focus:ring focus:ring-orange-200"},null,512),[[u,l.value.address]])]),o("div",ae,[e[41]||(e[41]=o("label",{class:"block text-bodyh1 font-normal text-gray-700 mb-1"},[i(" Description "),o("span",{class:"text-red-500 pt-2"},"*")],-1)),r(o("textarea",{"onUpdate:modelValue":e[17]||(e[17]=t=>l.value.description=t),rows:"4",placeholder:"Describe your NGO's mission and activities",required:"",class:"block w-full border border-gray-300 text-bodyh2 rounded py-2 px-3 focus:outline-none focus:ring focus:ring-orange-200"},null,512),[[u,l.value.description]])]),o("div",null,[e[43]||(e[43]=o("label",{class:"block text-bodyh1 font-normal text-gray-700 mb-1"},[i(" Registered with BigTech "),o("span",{class:"text-red-500 pt-2"},"*")],-1)),r(o("select",{"onUpdate:modelValue":e[18]||(e[18]=t=>l.value.registered_with_bigtech=t),required:"",class:"block w-full border border-gray-300 text-bodyh2 rounded py-2 px-3 focus:outline-none focus:ring focus:ring-orange-200"},e[42]||(e[42]=[o("option",{value:"Yes"},"Yes",-1),o("option",{value:"No"},"No",-1)]),512),[[k,l.value.registered_with_bigtech]])]),o("div",null,[e[46]||(e[46]=o("label",{class:"block text-bodyh1 font-normal text-gray-700 mb-1"}," NGO Logo ",-1)),o("label",re,[e[44]||(e[44]=o("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-indigo-500 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})],-1)),e[45]||(e[45]=o("span",{class:"text-sm text-gray-600"},"Upload NGO Logo (PNG, JPG up to 2MB)",-1)),o("input",{type:"file",class:"hidden",onChange:q,accept:"image/*"},null,32)])])]),o("div",ne,[o("button",{type:"submit",class:"bg-orange-500 text-white font-semibold py-2 px-4 rounded-sm hover:bg-orange-600 transition",disabled:d.value},x(d.value?"Registering...":"Register NGO"),9,se)])],34)])])]))}},be=M(ie,[["__scopeId","data-v-beecf4e7"]]);export{be as default};
