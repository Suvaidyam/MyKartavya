var f=(g,u,i)=>new Promise((c,l)=>{var a=s=>{try{p(i.next(s))}catch(d){l(d)}},n=s=>{try{p(i.throw(s))}catch(d){l(d)}},p=s=>s.done?c(s.value):Promise.resolve(s.value).then(a,n);p((i=i.apply(g,u)).next())});import{r as m,y as T,c as x,a as t,e as B,b as h,f as y,t as F,x as H,d as _,w as V,A as b,i as j,z as I,j as v}from"./index-CPY4CDsw.js";import{_ as N,a as R,b as q}from"./Frame (1)-BNHRP8Uf.js";import{l as r}from"./index-CPJ_0Bn_.js";/* empty css              */const A={class:"pt-[62px] flex flex-col items-center min-h-screen bg-secondary",style:{background:"#F5F5F5"}},J={class:"flex flex-col items-center text-center w-full px-4 min-h-[calc(100vh-64px)] justify-center"},K={class:"bg-white p-6 mt-[36px] rounded-sm w-[443px] max-w-full"},S={class:"text-gray-600 text-center mt-1 text-[12px] font-normal"},Y={class:"text-orange-500 font-semibold"},D={class:"flex justify-center space-x-2 mt-4"},E={style:{display:"flex","flex-direction":"row"}},z={key:0,class:"h-5 w-5"},M={key:1},U={class:"text-center text-[14px] text-gray-600 mt-4"},Z={__name:"Verifyotp",setup(g){const u=j("call"),i=I(),c=T(),l=m(!1),a=m(c.query.email||""),n=m(""),p=()=>f(this,null,function*(){if(!a.value){r.error("Please enter an email");return}try{(yield u("mykartavya.controllers.email.send_otp",{email:a.value})).status==="success"?r.success("OTP sent successfully",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0}):r.error("Failed to send OTP",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})}catch(o){r.error("Failed to send OTP",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})}}),s=()=>f(this,null,function*(){if(n.value.length!==6){r.error("Please enter a 6-digit OTP",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0});return}if(!a.value){i.push("/login");return}if(c.query.full_name){const o=yield u("mykartavya.controllers.email.register_verify_otp",{email:a.value,otp:n.value,full_name:c.query.full_name});o.status==="success"?(r.success("OTP verified successfully"),window.location.reload()):r.error(o.message)}else try{l.value=!0;const o=yield u("mykartavya.controllers.email.verify_otp",{email:a.value,otp:n.value});l.value=!1,o.status==="success"?(r.success("OTP verified successfully",{position:"top-right",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0}),setTimeout(()=>{window.location.reload()},2e3)):r.error("Invalid OTP, please try again",{position:"top-right",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})}catch(o){l.value=!1,r.error("Failed to verify OTP",{position:"top-right",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})}}),d=()=>{p()},O=o=>{s()},w=o=>{n.value=o};return(o,e)=>{const C=_("v-otp-input"),k=_("router-link");return v(),x("div",A,[t("main",J,[e[5]||(e[5]=B('<h1 class="text-[28px] md:text-[33px] font-normal font-poppins">Your Journey of Kindness Starts Here</h1><div class="text-center mt-2"><div class="flex flex-wrap justify-center gap-2 md:gap-4"><button class="border px-4 h-8 items-center bg-white rounded-full text-black border-orange-500 flex gap-1"><img src="'+N+'" alt="Track Icon" class="w-4"><p class="text-[14px] font-normal">Track Your Impact</p></button><button class="border px-4 h-8 items-center bg-white rounded-full text-black border-orange-500 flex gap-1"><img src="'+R+'" alt="Join Icon" class="w-4"><p class="text-[14px] font-normal">Join Activities Anywhere</p></button><button class="border px-4 h-8 items-center bg-white rounded-full text-black flex gap-1" style="border-color:#F185BB;"><img src="'+q+'" alt="Connect Icon" class="w-4"><p class="text-[14px] font-normal">Connect with a Community</p></button></div></div>',2)),t("div",K,[e[4]||(e[4]=t("h2",{class:"text-[20px] font-medium font-poppins text-gray-900 text-center"},"OTP Verification",-1)),t("p",S,[e[1]||(e[1]=y(" We've shared a 6-digit OTP on ")),t("span",Y,F(a.value||"sample@gmail.com"),1)]),t("div",D,[t("div",E,[h(C,{ref:"otpInput","input-classes":"otp-input",conditionalClass:["one","two","three","four","five","six"],separator:"-","num-inputs":6,value:n.value,"onUpdate:value":e[0]||(e[0]=P=>n.value=P),"should-auto-focus":!0,"should-focus-order":!0,onOnChange:w,onKeyup:H(s,["enter"]),"input-type":"number",onOnComplete:O,placeholder:["*","*","*","*","*","*"]},null,8,["value"])])]),h(k,{to:"/mykarma"},{default:V(()=>[t("button",{onClick:b(s,["prevent"]),class:"w-full flex items-center justify-center h-10 bg-orange-500 text-white py-2 text-[12px] mt-6 rounded-sm hover:bg-orange-600"},[l.value?(v(),x("div",z,e[2]||(e[2]=[t("div",{class:"animate-spin h-full w-full rounded-full border-[2px] flex justify-center items-center border-dotted border-[#fff]"},[t("div",{class:"w-3 h-3 rounded-full border-dashed border-[1px] border-[#fff]"})],-1)]))):(v(),x("p",M,"VERIFY"))])]),_:1}),t("p",U,[e[3]||(e[3]=y(" Didn't receive? ")),t("a",{href:"#",onClick:b(d,["prevent"]),class:"text-orange-500 font-normal text-[14px]"},"Resend OTP")])])])])}}};export{Z as default};
