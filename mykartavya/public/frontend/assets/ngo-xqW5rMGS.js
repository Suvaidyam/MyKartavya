var _=(C,l,d)=>new Promise((p,a)=>{var u=r=>{try{m(d.next(r))}catch(i){a(i)}},y=r=>{try{m(d.throw(r))}catch(i){a(i)}},m=r=>r.done?p(r.value):Promise.resolve(r.value).then(u,y);m((d=d.apply(C,l)).next())});import{r as c,j as x,l as E,o as S,C as T,c as v,a as t,b as V,m as B,v as A,x as D,e as N,t as g,F as j,g as M,A as R,i as U,B as q,h as f}from"./index-Doh_VB9H.js";import{F as z}from"./Footer-BMWsor9k.js";import"./index-Bm2AZqrr.js";/* empty css              */const I={class:"min-h-screen bg-gray-50"},P={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},$={class:"pt-12 md:pt-20 pb-4 space-y-6"},H={class:"flex flex-wrap gap-4 items-center justify-center md:justify-start"},J={class:"flex items-center border rounded-lg px-3 bg-white shadow-sm hover:shadow-md transition-shadow w-full md:w-auto"},K={class:"pb-4 text-center md:text-left"},Q={class:"text-sm text-gray-600"},W={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 py-4"},X={class:"p-4 bg-gray-50 flex justify-center"},Y=["src"],Z={key:1,class:"h-16 w-16 bg-gray-200 rounded-full flex items-center justify-center"},ee={class:"p-4"},te={class:"mb-3 text-lg font-semibold tracking-tight text-gray-900 line-clamp-2"},se={class:"mb-6 text-[14px] text-gray-600 line-clamp-2"},ae=["onClick"],oe={key:0,class:"text-center py-12"},de={__name:"ngo",setup(C){const l=R(),d=q(),p=U("call");c(!1);const a=c({name:"",state:"",city:""}),u=c(""),y=c(""),m=c({state:!1,city:!1}),r=c({state:"",city:""}),i=c([]),w=c([]),h=c([]);x(()=>r.value.state?i.value.filter(e=>e.state_name.toLowerCase().includes(r.value.state.toLowerCase())):i.value),x(()=>r.value.city?w.value.filter(e=>e.district_name.toLowerCase().includes(r.value.city.toLowerCase())):w.value);const b=x(()=>h.value.filter(e=>{const s=!a.value.name||e.ngo_name&&e.ngo_name.toLowerCase().includes(a.value.name.toLowerCase())||e.name&&e.name.toLowerCase().includes(a.value.name.toLowerCase()),o=!a.value.state||e.state&&e.state.toLowerCase().includes(a.value.state.toLowerCase())||e.location&&e.location.toLowerCase().includes(a.value.state.toLowerCase())||e.address&&e.address.toLowerCase().includes(a.value.state.toLowerCase()),n=!a.value.city||e.city&&e.city.toLowerCase().includes(a.value.city.toLowerCase())||e.district&&e.district.toLowerCase().includes(a.value.city.toLowerCase())||e.location&&e.location.toLowerCase().includes(a.value.city.toLowerCase())||e.address&&e.address.toLowerCase().includes(a.value.city.toLowerCase());return s&&o&&n}));x(()=>a.value.name||u.value||y.value);function O(){a.value={name:"",state:"",city:""},u.value="",y.value="",w.value=[],r.value={state:"",city:""},m.value={state:!1,city:!1}}const G=()=>_(this,null,function*(){try{console.log("Fetching states...");const e=yield p("mykartavya.controllers.api.states_data");i.value=e||[],console.log("States fetched:",i.value.length)}catch(e){console.error("Error fetching states:",e),i.value=[]}});function L(){return _(this,null,function*(){var e,s,o;try{console.log("Fetching NGOs for state:",(e=l==null?void 0:l.params)==null?void 0:e.name);const n=yield p("mykartavya.controllers.state.get_ngos_by_state",{state_name:(s=l==null?void 0:l.params)==null?void 0:s.name});n&&(console.log("NGOs fetched successfully:",n.length),h.value=n,(o=l==null?void 0:l.params)!=null&&o.name&&(u.value=l.params.name,a.value.state=l.params.name))}catch(n){console.error("Error fetching NGOs:",n),h.value=[]}})}const F=e=>{d.push({name:"Ngodetails",params:{name:e.ngo_name||e.name}})};function k(e){const s=document.querySelectorAll(".relative");let o=!1;s.forEach(n=>{n.contains(e.target)&&(o=!0)}),o||(m.value={state:!1,city:!1})}return E(()=>l.params.name,e=>{e&&(u.value=e,a.value.state=e,L())}),S(()=>{L(),G(),document.addEventListener("click",k)}),T(()=>{document.removeEventListener("click",k)}),(e,s)=>(f(),v(j,null,[t("div",I,[s[7]||(s[7]=t("div",{class:"relative text-white px-4 md:px-8 lg:px-72 py-24 md:py-32 flex flex-col md:flex-row justify-between items-center mt-[50px] bg-cover bg-center bg-no-repeat",style:{"background-image":"url('https://prod-mkcmsapi.s3.ap-south-1.amazonaws.com/cms/images/Media-20200813160839/1366-300.png')"}},[t("div",{class:"container text-center md:text-left mb-6 md:mb-0"},[t("h1",{class:"text-3xl md:text-4xl lg:text-5xl font-bold mb-3"},"NGOs"),t("div",{class:"flex items-center justify-center md:justify-start space-x-2 text-sm"})])],-1)),t("div",P,[t("div",$,[t("div",H,[s[3]||(s[3]=t("label",{class:"font-semibold text-gray-700"},"Search by:",-1)),t("div",J,[A(t("input",{"onUpdate:modelValue":s[0]||(s[0]=o=>a.value.name=o),type:"text",placeholder:"NGO Name",class:"border-none inputs border-white outline-none bg-transparent text-sm flex-1 min-w-[150px] py-2"},null,512),[[D,a.value.name]]),s[1]||(s[1]=t("i",{class:"fas fa-search text-gray-500 ml-2"},null,-1))]),t("button",{onClick:O,class:"w-full md:w-auto px-4 py-2 border border-gray-300 rounded-lg text-sm bg-white hover:bg-gray-50 transition-colors shadow-sm hover:shadow-md"},s[2]||(s[2]=[t("i",{class:"fas fa-times mr-1"},null,-1),N(" Clear ")]))])]),t("div",K,[t("p",Q," Showing "+g(b.value.length)+" of "+g(h.value.length)+" NGOs ",1)]),t("div",W,[(f(!0),v(j,null,M(b.value,o=>(f(),v("div",{key:o.ngo_name||o.name,class:"bg-white border border-gray-200 rounded-lg shadow-sm hover:shadow-md transition-shadow overflow-hidden"},[t("div",X,[o.ngo_logo?(f(),v("img",{key:0,src:o.ngo_logo,alt:"NGO Logo",class:"h-16 w-16 object-contain rounded-full border-2 border-white shadow-sm"},null,8,Y)):(f(),v("div",Z,s[4]||(s[4]=[t("i",{class:"fas fa-building text-gray-400 text-xl"},null,-1)])))]),t("div",ee,[t("h5",te,g(o.ngo_name||o.name),1),t("p",se,[s[5]||(s[5]=t("span",{class:"inline-block mr-1"},"ðŸ“",-1)),N(" "+g(o.location||o.address||"Address not available"),1)]),t("button",{onClick:n=>F(o),class:"w-full px-4 py-2 text-white bg-[#fe5726] rounded-lg hover:bg-red-600 transition-colors shadow-sm hover:shadow-md"}," Read more ",8,ae)])]))),128))]),b.value.length===0?(f(),v("div",oe,s[6]||(s[6]=[t("i",{class:"fas fa-search text-4xl text-gray-300 mb-4"},null,-1),t("h3",{class:"text-xl font-semibold text-gray-600 mb-2"},"No NGOs found",-1),t("p",{class:"text-gray-500"},"Try adjusting your search filters or clear all filters to see more results.",-1)]))):B("",!0)])]),V(z)],64))}};export{de as default};
