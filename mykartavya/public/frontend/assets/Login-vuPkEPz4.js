var d=(v,i,a)=>new Promise((c,t)=>{var l=s=>{try{u(a.next(s))}catch(n){t(n)}},f=s=>{try{u(a.throw(s))}catch(n){t(n)}},u=s=>s.done?c(s.value):Promise.resolve(s.value).then(l,f);u((a=a.apply(v,i)).next())});import{r as m,j as w,o as k,c as x,a as r,n as C,v as O,x as B,y as P,z as T,e as y,b as V,w as j,d as H,i as S,A as q,B as E,h as b}from"./index-DESabzjI.js";import{_ as N,a as $,b as A}from"./Frame (1)-BNHRP8Uf.js";import{l as p}from"./index-BR-UgXJz.js";/* empty css              */const K={class:"flex pt-[62px] flex-col items-center min-h-screen bg-secondary",style:{background:"#f5f5f5"}},R={class:"flex flex-col items-center text-center w-full px-4 min-h-[calc(100vh-64px)] justify-center"},U={class:"mt-8 bg-white p-6 rounded-sm w-full max-w-[443px] shadow-md"},z=["disabled"],D={key:0,class:"h-5 w-5"},J={key:1},L={class:"text-bodyh2 mt-4 text-gray-600"},Q={__name:"Login",setup(v){const i=S("call"),a=E(),c=q(),t=m(""),l=m(!1),f=m(""),u=m(""),s=w(()=>{const o=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return t.value.trim()!==""&&o.test(t.value)}),n=()=>d(this,null,function*(){if(t.value===""){p.error("Email is required",{autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0});return}let o="";c.query.full_name?o="register_send_otp":o="send_otp";try{l.value=!0;const e=yield i(`mykartavya.controllers.email.${o}`,{email:t.value});e.status==="success"?(l.value=!1,p.success("OTP sent successfully",{autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0}),setTimeout(()=>{a.push({name:"Verify",query:{email:t.value,returnUrl:c.query.returnUrl}})},2e3)):(l.value=!1,p.error(e.message,{autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0}))}catch(e){p.error("Something went wrong",{autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0})}}),h=()=>d(this,null,function*(){const o=yield i("mykartavya.controllers.api.get_login_details");f.value=o[0].google_login_url,u.value=o[0].office_365_login_url});return k(()=>d(this,null,function*(){console.log("Page has loaded"),yield h()})),(o,e)=>{const _=H("router-link");return b(),x("div",K,[r("main",R,[e[7]||(e[7]=C('<h1 class="text-[28px] md:text-heading2 font-medium font-poppins"> Your Journey of Kindness Starts Here </h1><div class="text-center mt-2"><div class="flex flex-wrap justify-center gap-2 md:gap-4"><button class="border px-4 h-8 items-center bg-white rounded-full text-black border-orange-500 flex gap-1"><img src="'+N+'" alt="" class="w-4"><p class="text-bodyh2 font-normal">Track Your Impact</p></button><button class="border px-4 h-8 items-center bg-white rounded-full text-black border-orange-500 flex gap-1"><img src="'+$+'" alt="" class="w-4"><p class="text-bodyh2 font-normal">Join Activities Anywhere</p></button><button class="border px-4 h-8 items-center bg-white rounded-full text-black flex gap-1" style="border-color:#f185bb;"><img src="'+A+'" alt="" class="w-4"><p class="text-bodyh2 font-normal">Connect with a Community</p></button></div></div>',2)),r("div",U,[e[6]||(e[6]=r("h2",{class:"text-[20px] font-medium mb-4"},"Login to your account",-1)),O(r("input",{type:"email","onUpdate:modelValue":e[0]||(e[0]=g=>t.value=g),placeholder:"sample@example.com",class:"w-full p-2 border rounded-sm mb-4 text-[14px]",style:{color:"#6e7073"},onKeyup:e[1]||(e[1]=P(g=>n(),["enter"]))},null,544),[[B,t.value]]),r("button",{disabled:l.value||!s.value,onClick:e[2]||(e[2]=g=>n()),class:"w-full flex items-center justify-center text-white py-2 rounded-sm text-bodyh2",style:T({background:s.value?"#ff5722":"#cccccc"})},[l.value?(b(),x("div",D,e[3]||(e[3]=[r("div",{class:"animate-spin h-full w-full rounded-full border-[2px] flex justify-center items-center border-dotted border-[#fff]"},[r("div",{class:"w-3 h-3 rounded-full border-dashed border-[1px] border-[#fff]"})],-1)]))):(b(),x("p",J,"GET OTP"))],12,z),r("p",L,[e[5]||(e[5]=y(" Don't have an account? ")),V(_,{to:"/register",class:"text-orange-500"},{default:j(()=>e[4]||(e[4]=[y("Sign up")])),_:1})])])])])}}};export{Q as default};
