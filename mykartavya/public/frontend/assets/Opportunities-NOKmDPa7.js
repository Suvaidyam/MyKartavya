var _t=Object.defineProperty,kt=Object.defineProperties;var $t=Object.getOwnPropertyDescriptors;var pt=Object.getOwnPropertySymbols;var Mt=Object.prototype.hasOwnProperty,Ft=Object.prototype.propertyIsEnumerable;var ft=(s,n,m)=>n in s?_t(s,n,{enumerable:!0,configurable:!0,writable:!0,value:m}):s[n]=m,ht=(s,n)=>{for(var m in n||(n={}))Mt.call(n,m)&&ft(s,m,n[m]);if(pt)for(var m of pt(n))Ft.call(n,m)&&ft(s,m,n[m]);return s},gt=(s,n)=>kt(s,$t(n));var R=(s,n,m)=>new Promise((g,c)=>{var z=M=>{try{u(m.next(M))}catch(k){c(k)}},C=M=>{try{u(m.throw(M))}catch(k){c(k)}},u=M=>M.done?g(M.value):Promise.resolve(M.value).then(z,C);u((m=m.apply(s,n)).next())});import{_ as lt,i as T,s as jt,d as At,c as a,j as e,m as w,b as y,a as t,u as h,g as Z,w as G,t as r,F as P,h as N,G as st,p as W,z as wt,f as it,n as U,r as A,l as at,v as Vt,x as St,A as xt,B as bt,H as Ht,o as yt,k as Ot,C as Bt,e as zt}from"./index-CM3c_2XO.js";import{_ as Ct,C as Et}from"./NotFound-RAP6SSNU.js";import{C as ot}from"./CardLoader-BQztOTju.js";import{R as Lt,C as It,_ as Rt,a as Zt}from"./refresh-cw-BC1OEpYl.js";import{l as q}from"./index-C-w9rs0x.js";/* empty css              */import{R as Tt}from"./ReqForApproval-7mdlHDHG.js";import{F as Pt,T as Nt,L as qt,M as Ut}from"./twitter-BQTYT_u1.js";import"./Dialog-CeFRykmO.js";const Dt={key:0,class:"absolute inset-0 bg-gray-900/70 flex items-center justify-center z-10"},Gt={class:"flex flex-col items-center gap-3 p-4"},Wt={class:"bg-white/10 p-3 rounded-full"},Jt={class:"w-full flex flex-col justify-between aspect-[16/9] rounded-lg relative overflow-hidden"},Yt=["src"],Kt={class:"bg-[#FF7C3A] activity-type absolute top-3 text-white font-semibold text-xs flex items-center pl-3 pr-5 h-7 shadow-sm"},Qt={class:"absolute right-3 top-3 bg-white/90 backdrop-blur-sm text-gray-800 text-xs px-3 h-7 rounded-full shadow-sm flex items-center gap-1.5"},Xt={class:"font-semibold text-xs"},te={class:"absolute bottom-3 flex items-center gap-2 px-3 overflow-auto"},ee={class:"flex-shrink-0"},se=["src"],oe={key:1,class:"w-8 h-8 flex items-center justify-center bg-gray-50 rounded-lg shadow-sm font-medium"},ae={class:"flex flex-col gap-2.5 pt-3 px-1"},ie={class:"text-bodyh1 font-semibold truncate text-gray-900"},le={class:"flex gap-2 items-center text-gray-600"},re={class:"text-xs font-medium"},ne={class:"flex gap-2 items-center justify-between"},ce={class:"flex gap-2 items-center text-gray-600"},de={class:"text-xs font-medium"},ue={class:"flex gap-2"},me={class:"mt-4 px-1"},ve={class:"w-full bg-gray-100 rounded-full h-1.5 overflow-hidden"},pe={class:"flex items-center justify-between pt-2"},fe={class:"text-xs font-medium text-gray-700"},he={class:"text-xs font-medium text-gray-700 flex items-center gap-1"},ge={key:0,class:"absolute inset-0 bg-gray-900/70 flex items-center justify-center z-10"},ye={class:"flex flex-col items-center gap-3 p-4"},Ce={class:"bg-white/10 p-3 rounded-full"},we={class:"w-full flex flex-col justify-between aspect-[16/9] rounded-lg relative overflow-hidden"},xe=["src"],be={class:"bg-[#FF7C3A] activity-type absolute top-3 text-white font-semibold text-xs flex items-center pl-3 pr-5 h-7 shadow-sm"},_e={key:0,class:"absolute right-3 top-3 bg-white/90 backdrop-blur-sm text-gray-800 text-xs px-3 h-7 rounded-full shadow-sm flex items-center gap-1.5"},ke={class:"font-semibold text-xs"},$e={class:"absolute bottom-3 flex items-center gap-2 px-3 overflow-auto"},Me={class:"flex-shrink-0"},Fe=["src"],je={key:1,class:"w-8 h-8 flex items-center justify-center bg-gray-50 rounded-lg shadow-sm font-medium"},Ae={class:"px-1"},Ve={class:"self-start truncate mt-3 text-base font-semibold tracking-normal text-gray-900"},Se={class:"mt-2 text-sm tracking-normal leading-5 text-justify text-gray-600 line-clamp-2"},He={class:"flex flex-col gap-3 justify-between mt-3"},Oe={class:"flex gap-1.5 items-center text-xs tracking-normal text-gray-600"},Be={class:"self-stretch my-auto font-medium"},ze={class:"flex gap-2 items-center text-gray-600"},Ee={class:"text-xs font-medium"},Le={class:"flex items-center justify-between"},Ie={key:0,class:"flex items-center -space-x-3"},Re=["src","alt"],Ze={key:1,class:"w-8 h-8 flex items-center justify-center rounded-full border-2 border-[#e86c13] text-sm"},Te={key:0,class:"pl-4 text-sm text-center"},Pe={key:1,class:"w-8 h-8"},Ne={class:"flex gap-1 items-center text-sm font-medium tracking-normal text-right text-[#FF5722] uppercase hover:text-orange-700"},qe={__name:"OpportunityCard",props:{type:{type:String,required:!1,default:"group"},item:{type:Object,required:!0},mode:{type:String,required:!1}},setup(s){const n=T("auth"),m=T("formatDate"),g=s,c=C=>{try{const u=JSON.parse(C);return Array.isArray(u)?u:[]}catch(u){return[]}},z=jt(()=>{if(g.item&&g.mode==="opportunity")return g.item.activity?`/opportunity/${g.item.name}/activity/${g.item.activity}`:`/opportunity/${g.item.name}`;if(n!=null&&n.isLoggedIn){if(g.item&&g.mode==="activity")return`/activity/${g.item.activity}`;console.log("Unknown type",g)}else if(g.mode==="activity")return`/kindness-volunteering/${g.item.activity}`});return(C,u)=>{const M=At("router-link");return s.type!="group"?(e(),a("div",{key:0,class:U(["card bg-white overflow-hidden relative",{"opacity-75":s.item.is_locked}])},[s.item.is_locked?(e(),a("div",Dt,[t("div",Gt,[t("div",Wt,[y(h(Z),{name:"lock",class:"size-6 text-white"})]),u[0]||(u[0]=t("span",{class:"text-white font-medium text-sm text-center"},"Complete previous activity to unlock",-1)),u[1]||(u[1]=t("span",{class:"text-white/80 text-xs text-center"},"This activity will be available after completing the prerequisite",-1))])])):w("",!0),y(M,{to:s.item.is_locked?"#":z.value,class:"block"},{default:G(()=>{var k,F,j,i,b,B,E;return[t("div",Jt,[t("img",{src:s.item.activity_image||"https://res.cloudinary.com/dyt5jqnax/image/upload/v1742968038/mykartavya-logo_jptv31.png",alt:"",class:"h-full w-full object-cover rounded-lg transition-transform duration-300 hover:scale-105"},null,8,Yt),t("div",Kt,r(s.item.types),1),t("div",Qt,[u[2]||(u[2]=t("svg",{width:"16",height:"14",viewBox:"0 0 16 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M15.5002 3.66602C15.5002 2.28518 12.8885 1.16602 9.66683 1.16602C6.44516 1.16602 3.8335 2.28518 3.8335 3.66602M15.5002 3.66602V6.99935C15.5002 7.84935 14.5118 8.59935 13.0002 9.05102C12.0552 9.33435 10.906 9.49935 9.66683 9.49935C8.42766 9.49935 7.2785 9.33352 6.3335 9.05102C4.82266 8.59935 3.8335 7.84935 3.8335 6.99935V3.66602M15.5002 3.66602C15.5002 4.51602 14.5118 5.26602 13.0002 5.71768C12.0552 6.00102 10.906 6.16602 9.66683 6.16602C8.42766 6.16602 7.2785 6.00018 6.3335 5.71768C4.82266 5.26602 3.8335 4.51602 3.8335 3.66602",stroke:"#FF5722","stroke-linecap":"round","stroke-linejoin":"round"}),t("path",{d:"M0.5 6.9994V10.3327C0.5 11.1827 1.48917 11.9327 3 12.3844C3.945 12.6677 5.09417 12.8327 6.33333 12.8327C7.5725 12.8327 8.72167 12.6669 9.66667 12.3844C11.1775 11.9327 12.1667 11.1827 12.1667 10.3327V9.4994M0.5 6.9994C0.5 6.0019 1.8625 5.14107 3.83333 4.74023M0.5 6.9994C0.5 7.8494 1.48917 8.5994 3 9.05107C3.945 9.3344 5.09417 9.4994 6.33333 9.4994C6.9125 9.4994 7.47167 9.46357 8 9.39607",stroke:"#FF5722","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),t("span",Xt,r((k=s.item.karma_points)==null?void 0:k.toLocaleString())+" Points",1)]),t("div",te,[s.item.sdgs?(e(!0),a(P,{key:0},N(JSON.parse(s.item.sdgs),p=>{var O;return e(),a("div",ee,[p.image?(e(),a("img",{key:0,src:p.image,class:"w-8 h-8 shadow-sm"},null,8,se)):(e(),a("span",oe,r((O=p.sdgs_name)==null?void 0:O.charAt(0)),1))])}),256)):w("",!0)])]),t("div",ae,[t("h3",ie,r(s.item.title),1),t("div",le,[u[3]||(u[3]=t("svg",{width:"16",height:"15",viewBox:"0 0 16 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M1.33331 7.00033C1.33331 4.48633 1.33331 3.22899 2.11465 2.44833C2.89598 1.66766 4.15265 1.66699 6.66665 1.66699H9.33331C11.8473 1.66699 13.1046 1.66699 13.8853 2.44833C14.666 3.22966 14.6666 4.48633 14.6666 7.00033V8.33366C14.6666 10.8477 14.6666 12.105 13.8853 12.8857C13.104 13.6663 11.8473 13.667 9.33331 13.667H6.66665C4.15265 13.667 2.89531 13.667 2.11465 12.8857C1.33398 12.1043 1.33331 10.8477 1.33331 8.33366V7.00033Z",stroke:"currentColor","stroke-width":"0.75"}),t("path",{d:"M4.66666 1.66699V0.666992M11.3333 1.66699V0.666992M1.66666 5.00033H14.3333",stroke:"currentColor","stroke-width":"0.75","stroke-linecap":"round"}),t("path",{d:"M12 10.3333C12 10.5101 11.9298 10.6797 11.8047 10.8047C11.6797 10.9298 11.5101 11 11.3333 11C11.1565 11 10.987 10.9298 10.8619 10.8047C10.7369 10.6797 10.6667 10.5101 10.6667 10.3333C10.6667 10.1565 10.7369 9.98695 10.8619 9.86193C10.987 9.7369 11.1565 9.66667 11.3333 9.66667C11.5101 9.66667 11.6797 9.7369 11.8047 9.86193C11.9298 9.98695 12 10.1565 12 10.3333ZM12 7.66667C12 7.84348 11.9298 8.01305 11.8047 8.13807C11.6797 8.2631 11.5101 8.33333 11.3333 8.33333C11.1565 8.33333 10.987 8.2631 10.8619 8.13807C10.7369 8.01305 10.6667 7.84348 10.6667 7.66667C10.6667 7.48986 10.7369 7.32029 10.8619 7.19526C10.987 7.07024 11.1565 7 11.3333 7C11.5101 7 11.6797 7.07024 11.8047 7.19526C11.9298 7.32029 12 7.48986 12 7.66667ZM8.66667 10.3333C8.66667 10.5101 8.59643 10.6797 8.4714 10.8047C8.34638 10.9298 8.17681 11 8 11C7.82319 11 7.65362 10.9298 7.5286 10.8047C7.40357 10.6797 7.33333 10.5101 7.33333 10.3333C7.33333 10.1565 7.40357 9.98695 7.5286 9.86193C7.65362 9.7369 7.82319 9.66667 8 9.66667C8.17681 9.66667 8.34638 9.7369 8.4714 9.86193C8.59643 9.98695 8.66667 10.1565 8.66667 10.3333ZM8.66667 7.66667C8.66667 7.84348 8.59643 8.01305 8.4714 8.13807C8.34638 8.2631 8.17681 8.33333 8 8.33333C7.82319 8.33333 7.65362 8.2631 7.5286 8.13807C7.40357 8.01305 7.33333 7.84348 7.33333 7.66667C7.33333 7.48986 7.40357 7.32029 7.5286 7.19526C7.65362 7.07024 7.82319 7 8 7C8.17681 7 8.34638 7.07024 8.4714 7.19526C8.59643 7.32029 8.66667 7.48986 8.66667 7.66667ZM5.33333 10.3333C5.33333 10.5101 5.2631 10.6797 5.13807 10.8047C5.01305 10.9298 4.84348 11 4.66667 11C4.48986 11 4.32029 10.9298 4.19526 10.8047C4.07024 10.6797 4 10.5101 4 10.3333C4 10.1565 4.07024 9.98695 4.19526 9.86193C4.32029 9.7369 4.48986 9.66667 4.66667 9.66667C4.84348 9.66667 5.01305 9.7369 5.13807 9.86193C5.2631 9.98695 5.33333 10.1565 5.33333 10.3333ZM5.33333 7.66667C5.33333 7.84348 5.2631 8.01305 5.13807 8.13807C5.01305 8.2631 4.84348 8.33333 4.66667 8.33333C4.48986 8.33333 4.32029 8.2631 4.19526 8.13807C4.07024 8.01305 4 7.84348 4 7.66667C4 7.48986 4.07024 7.32029 4.19526 7.19526C4.32029 7.07024 4.48986 7 4.66667 7C4.84348 7 5.01305 7.07024 5.13807 7.19526C5.2631 7.32029 5.33333 7.48986 5.33333 7.66667Z",fill:"currentColor"})],-1)),t("p",re,r(h(m)(s.item.start_date))+" - "+r(h(m)(s.item.end_date)),1)]),t("div",ne,[t("div",ce,[y(h(st),{text:"Activity Hours"},{default:G(()=>[y(h(Z),{name:"clock",class:"size-4"}),t("p",de,r(s.item.hours)+" hr",1)]),_:1})]),t("div",ue,[y(h(st),{text:"Review under proccess"},{default:G(()=>[s.item.completion_wf_state=="Submitted"?(e(),W(h(Z),{key:0,name:"clock",class:"size-4 text-yellow-500"})):w("",!0)]),_:1}),y(h(st),{text:"Completed"},{default:G(()=>[s.item.completion_wf_state=="Approved"?(e(),W(h(Z),{key:0,name:"check-circle",class:"size-4 text-green-500"})):w("",!0)]),_:1})])])]),t("div",me,[t("div",ve,[t("div",{class:"bg-[#4CAF50] h-full rounded-full transition-all duration-300",style:wt({width:`${(j=(F=s.item)==null?void 0:F.com_percent)!=null?j:0}%`})},null,4)]),t("div",pe,[t("p",fe,r((b=(i=s.item)==null?void 0:i.com_percent)!=null?b:0)+"% completed",1),t("p",he,[y(h(Z),{name:"clock",class:"size-3"}),it(" "+r((B=s.item)!=null&&B.donet_hours?(((E=s.item)==null?void 0:E.donet_hours)/60/60).toFixed(2):"0")+" hr ",1)])])])]}),_:1},8,["to"])],2)):(e(),a("article",{key:1,class:U(["flex flex-col card w-full py-2 overflow-hidden relative",{"opacity-75":s.item.is_locked}])},[s.item.is_locked?(e(),a("div",ge,[t("div",ye,[t("div",Ce,[y(h(Z),{name:"lock",class:"size-6 text-white"})]),u[4]||(u[4]=t("span",{class:"text-white font-medium text-sm text-center"},"Complete previous activity to unlock",-1)),u[5]||(u[5]=t("span",{class:"text-white/80 text-xs text-center"},"This activity will be available after completing the prerequisite",-1))])])):w("",!0),y(M,{to:s.item.is_locked?"#":z.value,class:"block"},{default:G(()=>{var k,F,j,i,b,B,E;return[t("div",we,[t("img",{src:s.item.activity_image||"https://res.cloudinary.com/dyt5jqnax/image/upload/v1742968038/mykartavya-logo_jptv31.png",alt:"",class:"h-full w-full object-cover rounded-lg transition-transform duration-300 hover:scale-105"},null,8,xe),t("div",be,r(s.item.types),1),s.item.karma_points?(e(),a("div",_e,[u[6]||(u[6]=t("svg",{width:"16",height:"14",viewBox:"0 0 16 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M15.5002 3.66602C15.5002 2.28518 12.8885 1.16602 9.66683 1.16602C6.44516 1.16602 3.8335 2.28518 3.8335 3.66602M15.5002 3.66602V6.99935C15.5002 7.84935 14.5118 8.59935 13.0002 9.05102C12.0552 9.33435 10.906 9.49935 9.66683 9.49935C8.42766 9.49935 7.2785 9.33352 6.3335 9.05102C4.82266 8.59935 3.8335 7.84935 3.8335 6.99935V3.66602M15.5002 3.66602C15.5002 4.51602 14.5118 5.26602 13.0002 5.71768C12.0552 6.00102 10.906 6.16602 9.66683 6.16602C8.42766 6.16602 7.2785 6.00018 6.3335 5.71768C4.82266 5.26602 3.8335 4.51602 3.8335 3.66602",stroke:"#FF5722","stroke-linecap":"round","stroke-linejoin":"round"}),t("path",{d:"M0.5 6.9994V10.3327C0.5 11.1827 1.48917 11.9327 3 12.3844C3.945 12.6677 5.09417 12.8327 6.33333 12.8327C7.5725 12.8327 8.72167 12.6669 9.66667 12.3844C11.1775 11.9327 12.1667 11.1827 12.1667 10.3327V9.4994M0.5 6.9994C0.5 6.0019 1.8625 5.14107 3.83333 4.74023M0.5 6.9994C0.5 7.8494 1.48917 8.5994 3 9.05107C3.945 9.3344 5.09417 9.4994 6.33333 9.4994C6.9125 9.4994 7.47167 9.46357 8 9.39607",stroke:"#FF5722","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),t("span",ke,r((k=s.item.karma_points)==null?void 0:k.toLocaleString())+" Points",1)])):w("",!0),t("div",$e,[s.item.sdgs?(e(!0),a(P,{key:0},N(JSON.parse(s.item.sdgs),p=>{var O;return e(),a("div",Me,[p!=null&&p.image?(e(),a("img",{key:0,src:p==null?void 0:p.image,class:"w-8 h-8 shadow-sm"},null,8,Fe)):(e(),a("span",je,r((O=p==null?void 0:p.sdgs_name)==null?void 0:O.charAt(0)),1))])}),256)):w("",!0)])]),t("div",Ae,[t("h3",Ve,r(s.item.activity_name),1),t("p",Se,r(s.item.opportunity_description),1),t("div",He,[t("div",Oe,[u[7]||(u[7]=t("svg",{width:"16",height:"15",viewBox:"0 0 16 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M1.33331 7.00033C1.33331 4.48633 1.33331 3.22899 2.11465 2.44833C2.89598 1.66766 4.15265 1.66699 6.66665 1.66699H9.33331C11.8473 1.66699 13.1046 1.66699 13.8853 2.44833C14.666 3.22966 14.6666 4.48633 14.6666 7.00033V8.33366C14.6666 10.8477 14.6666 12.105 13.8853 12.8857C13.104 13.6663 11.8473 13.667 9.33331 13.667H6.66665C4.15265 13.667 2.89531 13.667 2.11465 12.8857C1.33398 12.1043 1.33331 10.8477 1.33331 8.33366V7.00033Z",stroke:"currentColor","stroke-width":"0.75"}),t("path",{d:"M4.66666 1.66699V0.666992M11.3333 1.66699V0.666992M1.66666 5.00033H14.3333",stroke:"currentColor","stroke-width":"0.75","stroke-linecap":"round"}),t("path",{d:"M12 10.3333C12 10.5101 11.9298 10.6797 11.8047 10.8047C11.6797 10.9298 11.5101 11 11.3333 11C11.1565 11 10.987 10.9298 10.8619 10.8047C10.7369 10.6797 10.6667 10.5101 10.6667 10.3333C10.6667 10.1565 10.7369 9.98695 10.8619 9.86193C10.987 9.7369 11.1565 9.66667 11.3333 9.66667C11.5101 9.66667 11.6797 9.7369 11.8047 9.86193C11.9298 9.98695 12 10.1565 12 10.3333ZM12 7.66667C12 7.84348 11.9298 8.01305 11.8047 8.13807C11.6797 8.2631 11.5101 8.33333 11.3333 8.33333C11.1565 8.33333 10.987 8.2631 10.8619 8.13807C10.7369 8.01305 10.6667 7.84348 10.6667 7.66667C10.6667 7.48986 10.7369 7.32029 10.8619 7.19526C10.987 7.07024 11.1565 7 11.3333 7C11.5101 7 11.6797 7.07024 11.8047 7.19526C11.9298 7.32029 12 7.48986 12 7.66667ZM8.66667 10.3333C8.66667 10.5101 8.59643 10.6797 8.4714 10.8047C8.34638 10.9298 8.17681 11 8 11C7.82319 11 7.65362 10.9298 7.5286 10.8047C7.40357 10.6797 7.33333 10.5101 7.33333 10.3333C7.33333 10.1565 7.40357 9.98695 7.5286 9.86193C7.65362 9.7369 7.82319 9.66667 8 9.66667C8.17681 9.66667 8.34638 9.7369 8.4714 9.86193C8.59643 9.98695 8.66667 10.1565 8.66667 10.3333ZM8.66667 7.66667C8.66667 7.84348 8.59643 8.01305 8.4714 8.13807C8.34638 8.2631 8.17681 8.33333 8 8.33333C7.82319 8.33333 7.65362 8.2631 7.5286 8.13807C7.40357 8.01305 7.33333 7.84348 7.33333 7.66667C7.33333 7.48986 7.40357 7.32029 7.5286 7.19526C7.65362 7.07024 7.82319 7 8 7C8.17681 7 8.34638 7.07024 8.4714 7.19526C8.59643 7.32029 8.66667 7.48986 8.66667 7.66667ZM5.33333 10.3333C5.33333 10.5101 5.2631 10.6797 5.13807 10.8047C5.01305 10.9298 4.84348 11 4.66667 11C4.48986 11 4.32029 10.9298 4.19526 10.8047C4.07024 10.6797 4 10.5101 4 10.3333C4 10.1565 4.07024 9.98695 4.19526 9.86193C4.32029 9.7369 4.48986 9.66667 4.66667 9.66667C4.84348 9.66667 5.01305 9.7369 5.13807 9.86193C5.2631 9.98695 5.33333 10.1565 5.33333 10.3333ZM5.33333 7.66667C5.33333 7.84348 5.2631 8.01305 5.13807 8.13807C5.01305 8.2631 4.84348 8.33333 4.66667 8.33333C4.48986 8.33333 4.32029 8.2631 4.19526 8.13807C4.07024 8.01305 4 7.84348 4 7.66667C4 7.48986 4.07024 7.32029 4.19526 7.19526C4.32029 7.07024 4.48986 7 4.66667 7C4.84348 7 5.01305 7.07024 5.13807 7.19526C5.2631 7.32029 5.33333 7.48986 5.33333 7.66667Z",fill:"currentColor"})],-1)),t("time",Be,r(h(m)(s.item.start_date))+" - "+r(h(m)(s.item.end_date)),1)]),t("div",ze,[y(h(st),{text:"Hours"},{default:G(()=>[y(h(Z),{name:"clock",class:"size-4"}),t("p",Ee,r(s.item.hours)+" hr",1)]),_:1})]),t("div",Le,[c((F=s.item)==null?void 0:F.volunteers).length>0&&((i=c((j=s.item)==null?void 0:j.volunteers)[0])!=null&&i.full_name)?(e(),a("div",Ie,[(e(!0),a(P,null,N(c((b=s.item)==null?void 0:b.volunteers).slice(0,3),(p,O)=>{var D;return e(),a("div",{key:O},[p!=null&&p.user_image?(e(),a("img",{key:0,src:p.user_image,alt:"User "+(O+1),class:"w-8 h-8 rounded-full border-2 border-white"},null,8,Re)):(e(),a("div",Ze,r((D=p==null?void 0:p.full_name)==null?void 0:D.charAt(0)),1))])}),128)),c((B=s.item)==null?void 0:B.volunteers).length>3?(e(),a("p",Te," +"+r(c((E=s.item)==null?void 0:E.volunteers).length-3),1)):w("",!0)])):(e(),a("div",Pe)),t("div",Ne,[u[8]||(u[8]=t("p",null,"Act now",-1)),y(h(Z),{name:"arrow-up-right",class:"size-4"})])])])])]}),_:1},8,["to"])],2))}}},Ue=lt(qe,[["__scopeId","data-v-22d3cdcc"]]),De={class:"bg-white rounded-lg"},Ge={class:"bg-white p-6 rounded-lg w-full relative"},We={class:"flex justify-between items-center mb-4"},Je={class:"relative border-gray-300 pl-3"},Ye={key:1},Ke={key:0,class:"w-4 h-4 flex items-center justify-center"},Qe={key:1,class:"w-4 h-4 flex items-center justify-center"},Xe={key:2,class:"w-4 h-4 flex items-center justify-center"},t1=["onClick"],e1={class:"text-[19px] font-medium px-6 py-2"},s1={class:"text-gray-600 text-xs font-normal ml-6 mt-0"},o1={key:0},a1=["onClick"],i1={key:1,class:"mt-3 h-[28px] uppercase cursor-not-allowed px-3 rounded-sm text-caption font-medium text-white ml-6 bg-gray-400 button-animation"},l1={key:1},r1=["onClick"],n1={key:2},c1=["onClick"],d1={key:0,class:"fixed inset-0 flex items-center justify-center z-[100]"},u1={key:1,class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50"},m1={class:"bg-white rounded-lg shadow-lg w-full max-w-md"},v1={class:"flex justify-between items-center border-b p-4"},p1={class:"p-4"},f1={class:"flex justify-center gap-6 my-3"},h1=["onClick"],g1={key:2,class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50"},y1={class:"bg-white rounded-lg shadow-lg w-full max-w-md p-6 text-center"},C1={class:"mb-6"},w1={class:"text-gray-600"},x1={class:"flex justify-center"},b1=["disabled"],_1={key:0,class:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"},k1={__name:"OpprtunityStepper",props:{activity:{type:Object,required:!1,default:()=>({})}},setup(s){const n=A(0),m=A(!1),g=A(!1),c=A(!1),z=A(!1),C=T("call"),u=T("auth"),M=T("store");T("socket");const k=xt(),F=bt(),j=A({rating:null,comments:""}),i=s,b=A([{title:"Activity Approval",description:"Is your application to volunteer for the activity approved?",button:"Request for Approval",completed:!1},{title:"Get Started",description:"Click the button below once you are ready to start the activity",button:"Start Activity",completed:!1},{title:"Submit Feedback",description:"Click the button to register the feedback & collect your karma points",button:"Submit Feedback",completed:!1}]),B=S=>R(this,null,function*(){var l,d;if(S>n.value){c.value=!0;return}try{if(S==0){const x=((l=k==null?void 0:k.params)==null?void 0:l.activity)||((d=k==null?void 0:k.params)==null?void 0:d.name);if(!x){q.error("Activity ID not found",{autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0});return}const $=yield C("mykartavya.controllers.api.act_now_opp",{activity:x,volunteer:u.cookie.user_id});if(($==null?void 0:$.status)==200)i.activity.workflow_state="Applied",b.value[S].completed=!0,n.value++,q.success("Activity approval request submitted successfully",{autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0});else if(($==null?void 0:$.status)==201){z.value=!0;return}else{q.error(($==null?void 0:$.msg)||"Something went wrong",{autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0});return}}if(S==2){m.value=!0,b.value[S].completed=!0,n.value=Math.max(n.value,3);return}if(S==1)if(console.log(i.activity.completion_wf_state),i.activity.completion_wf_state=="Submitted")b.value[1].completed=!0,n.value=Math.max(n.value,2);else{q.error("You must complete the activity first!",{autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0});return}}catch(x){console.error(x),q.error("Something went wrong",{autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0})}}),E=()=>R(this,null,function*(){if(!j.value.rating){q.error("Please select a rating",{autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0});return}(yield C("mykartavya.controllers.api.submit_feedback",{name:i.activity.name,volunteer:u.cookie.user_id,rating:j.value.rating,comments:j.value.comments})).rating&&(m.value=!1,g.value=!0,b.value[2].completed=!0,i.activity.need_certificate!=="Yes"&&setTimeout(()=>{g.value=!1},3e3))}),p=A(!1),O=()=>R(this,null,function*(){p.value=!0,(yield C("mykartavya.controllers.api.view_certificate",{activity:i.activity.activity}))&&(p.value=!1,q.success("Certificate visible in your profile after few minutes",{autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0}),g.value=!1,setTimeout(()=>{F.push("/profile")},3e3))}),D=A([{icon:"ðŸ˜ž",label:.2},{icon:"ðŸ˜",label:.4},{icon:"ðŸ˜Š",label:.6},{icon:"ðŸ™‚",label:.8},{icon:"ðŸ˜€",label:1}]);return at(()=>g.value,S=>{S&&i.activity.need_certificate=="No"&&setTimeout(()=>{g.value=!1},3e3)}),at(()=>M.refresh_step,S=>R(this,null,function*(){if(S)try{i.activity.is_assigned&&Ht(()=>{i.activity.workflow_state==="Applied"&&(b.value[0].completed=!0,n.value=Math.max(n.value,1)),i.activity.workflow_state==="Approved"&&(b.value[0].completed=!0,i.activity.completion_wf_state==="Submitted"&&(b.value[1].completed=!0,n.value=Math.max(n.value,2)),i.activity.completion_wf_state==="Approved"&&(b.value[2].completed=!0,n.value=3,m.value=!0,g.value=!0))})}finally{M.refresh_step=!1}}),{immediate:!0}),(S,l)=>(e(),a("div",null,[t("div",De,[t("div",Ge,[t("div",We,[l[6]||(l[6]=t("h2",{class:"text-heading4 font-medium"},"Timeline",-1)),t("button",{onClick:l[0]||(l[0]=d=>h(M).refresh_step=!0),class:"text-pink-500 flex items-center text-base font-normal w-[107px] justify-center h-8 rounded-sm border refresh-button"},[l[5]||(l[5]=it(" Refresh ")),y(h(Lt),{class:"w-4 h-4 ml-1"})])]),t("div",Je,[(e(!0),a(P,null,N(b.value,(d,x)=>(e(),a("div",{key:x,class:"mb-6 relative"},[t("div",{class:U(["absolute left-0 top-0 h-full w-[1px]",[d.completed?"bg-[#22C55E]":"bg-[#E5E7EB]",!d.completed&&x>n.value?"blur-sm opacity-50":""]])},null,2),t("div",{class:U(["absolute -left-4 w-7 h-7 min-w-7 max-h-7 rounded-full flex items-center justify-center",[d.completed?"border-green-500 bg-white border-2 text-green-600":"bg-[#FF5722] text-white",!d.completed&&x>n.value?"blur-sm opacity-50":""]])},[d.completed?(e(),W(h(It),{key:0,class:"w-4 h-4"})):(e(),a("div",Ye,[d.title=="Activity Approval"?(e(),a("div",Ke,l[7]||(l[7]=[t("img",{src:Rt,alt:"",class:"w-4 h-4"},null,-1)]))):w("",!0),d.title=="Get Started"?(e(),a("div",Qe,l[8]||(l[8]=[t("svg",{width:"19",height:"19",viewBox:"0 0 19 19",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M12.4688 10.292C12.4688 10.1345 12.4062 9.9835 12.2948 9.87215C12.1835 9.7608 12.0325 9.69824 11.875 9.69824H7.125C6.96753 9.69824 6.81651 9.7608 6.70516 9.87215C6.59381 9.9835 6.53125 10.1345 6.53125 10.292C6.53125 10.4495 6.59381 10.6005 6.70516 10.7118C6.81651 10.8232 6.96753 10.8857 7.125 10.8857H11.875C12.0325 10.8857 12.1835 10.8232 12.2948 10.7118C12.4062 10.6005 12.4688 10.4495 12.4688 10.292ZM12.4688 13.4587C12.4688 13.3012 12.4062 13.1502 12.2948 13.0388C12.1835 12.9275 12.0325 12.8649 11.875 12.8649H7.125C6.96753 12.8649 6.81651 12.9275 6.70516 13.0388C6.59381 13.1502 6.53125 13.3012 6.53125 13.4587C6.53125 13.6161 6.59381 13.7672 6.70516 13.8785C6.81651 13.9899 6.96753 14.0524 7.125 14.0524H11.875C12.0325 14.0524 12.1835 13.9899 12.2948 13.8785C12.4062 13.7672 12.4688 13.6161 12.4688 13.4587Z",fill:"white"}),t("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M5.54183 1.78125C4.96443 1.78125 4.41068 2.01062 4.0024 2.4189C3.59412 2.82719 3.36475 3.38093 3.36475 3.95833V15.0417C3.36475 15.6191 3.59412 16.1728 4.0024 16.5811C4.41068 16.9894 4.96443 17.2188 5.54183 17.2188H13.4585C14.0359 17.2188 14.5896 16.9894 14.9979 16.5811C15.4062 16.1728 15.6356 15.6191 15.6356 15.0417V6.308C15.6356 6.00637 15.5374 5.71346 15.3553 5.47279L12.9819 2.33146C12.8528 2.16055 12.6858 2.02192 12.494 1.92645C12.3022 1.83098 12.091 1.78128 11.8767 1.78125H5.54183ZM4.55225 3.95833C4.55225 3.41208 4.99558 2.96875 5.54183 2.96875H11.2814V6.44971C11.2814 6.77746 11.5474 7.04346 11.8752 7.04346H14.4481V15.0417C14.4481 15.5879 14.0047 16.0312 13.4585 16.0312H5.54183C4.99558 16.0312 4.55225 15.5879 4.55225 15.0417V3.95833Z",fill:"white"})],-1)]))):w("",!0),d.title=="Submit Feedback"?(e(),a("div",Xe,l[9]||(l[9]=[t("svg",{width:"19",height:"19",viewBox:"0 0 19 19",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M12.4688 10.292C12.4688 10.1345 12.4062 9.9835 12.2948 9.87215C12.1835 9.7608 12.0325 9.69824 11.875 9.69824H7.125C6.96753 9.69824 6.81651 9.7608 6.70516 9.87215C6.59381 9.9835 6.53125 10.1345 6.53125 10.292C6.53125 10.4495 6.59381 10.6005 6.70516 10.7118C6.81651 10.8232 6.96753 10.8857 7.125 10.8857H11.875C12.0325 10.8857 12.1835 10.8232 12.2948 10.7118C12.4062 10.6005 12.4688 10.4495 12.4688 10.292ZM12.4688 13.4587C12.4688 13.3012 12.4062 13.1502 12.2948 13.0388C12.1835 12.9275 12.0325 12.8649 11.875 12.8649H7.125C6.96753 12.8649 6.81651 12.9275 6.70516 13.0388C6.59381 13.1502 6.53125 13.3012 6.53125 13.4587C6.53125 13.6161 6.59381 13.7672 6.70516 13.8785C6.81651 13.9899 6.96753 14.0524 7.125 14.0524H11.875C12.0325 14.0524 12.1835 13.9899 12.2948 13.8785C12.4062 13.7672 12.4688 13.6161 12.4688 13.4587Z",fill:"white"}),t("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M5.54183 1.78125C4.96443 1.78125 4.41068 2.01062 4.0024 2.4189C3.59412 2.82719 3.36475 3.38093 3.36475 3.95833V15.0417C3.36475 15.6191 3.59412 16.1728 4.0024 16.5811C4.41068 16.9894 4.96443 17.2188 5.54183 17.2188H13.4585C14.0359 17.2188 14.5896 16.9894 14.9979 16.5811C15.4062 16.1728 15.6356 15.6191 15.6356 15.0417V6.308C15.6356 6.00637 15.5374 5.71346 15.3553 5.47279L12.9819 2.33146C12.8528 2.16055 12.6858 2.02192 12.494 1.92645C12.3022 1.83098 12.091 1.78128 11.8767 1.78125H5.54183ZM4.55225 3.95833C4.55225 3.41208 4.99558 2.96875 5.54183 2.96875H11.2814V6.44971C11.2814 6.77746 11.5474 7.04346 11.8752 7.04346H14.4481V15.0417C14.4481 15.5879 14.0047 16.0312 13.4585 16.0312H5.54183C4.99558 16.0312 4.55225 15.5879 4.55225 15.0417V3.95833Z",fill:"white"})],-1)]))):w("",!0)]))],2),t("div",{class:U([d.completed?"relative":x>n.value?"blur-sm opacity-50 pointer-events-auto relative":"relative"]),onClick:$=>!d.completed&&x>n.value&&(c.value=!0)},[t("p",{class:U(["text-[10px] font-normal px-6",d.completed?"text-[#FF5722]":"text-[#999999]"])}," STEP "+r(x+1),3),t("h3",e1,r(d.title),1),t("p",s1,r(d.description),1),x==0?(e(),a("div",o1,[!d.completed&&i.activity.workflow_state!=="Applied"&&i.activity.workflow_state!=="Approved"?(e(),a("button",{key:0,onClick:$=>B(x),class:"mt-3 h-[28px] px-3 uppercase rounded-sm text-caption font-medium text-white ml-6 bg-[#FF5722] button-animation"},r(d.button),9,a1)):i.activity.workflow_state=="Applied"?(e(),a("button",i1," Pending by Admin ")):w("",!0)])):w("",!0),x==1?(e(),a("div",l1,[!d.completed&&s.activity.workflow_state=="Approved"?(e(),a("button",{key:0,onClick:$=>B(x),class:"mt-3 h-[28px] px-3 uppercase rounded-sm text-caption font-medium text-white ml-6 bg-[#FF5722] button-animation"},r(d.button),9,r1)):w("",!0)])):w("",!0),x==2?(e(),a("div",n1,[!d.completed&&s.activity.workflow_state=="Approved"&&s.activity.completion_wf_state=="Submitted"?(e(),a("button",{key:0,onClick:$=>B(x),class:"mt-3 h-[28px] px-3 uppercase rounded-sm text-caption font-medium text-white ml-6 bg-[#FF5722] button-animation"},r(d.button),9,c1)):w("",!0)])):w("",!0)],10,t1)]))),128))]),c.value?(e(),a("div",d1,[t("div",{class:"fixed inset-0 bg-black/50",onClick:l[1]||(l[1]=d=>c.value=!1)}),l[10]||(l[10]=t("div",{class:"bg-white rounded-lg p-4 relative z-[101] flex items-center gap-3 shadow-lg max-w-md mx-4"},[t("img",{src:"",alt:"chat star",class:"w-6 h-6"}),t("p",{class:"text-base text-[#111111] font-normal"},"Finish the current step to move forward!")],-1))])):w("",!0),m.value?(e(),a("div",u1,[t("div",m1,[t("div",v1,[l[11]||(l[11]=t("h2",{class:"text-lg font-semibold"},"Share Feedback",-1)),t("button",{onClick:l[2]||(l[2]=d=>m.value=!1),class:"text-gray-500 hover:text-gray-700 text-xl button-animation"}," Ã— ")]),t("div",p1,[l[12]||(l[12]=t("label",{class:"block font-normal text-lg mb-2 text-[#0B0B0B]"},"How would you rate your experience with the activity?",-1)),t("div",f1,[(e(!0),a(P,null,N(D.value,(d,x)=>(e(),a("button",{key:x,onClick:$=>j.value.rating=d.label,class:U(["text-3xl focus:outline-none transition duration-200",j.value.rating==d.label?"text-orange-500":"text-gray-400 opacity-30"])},r(d.icon),11,h1))),128))]),l[13]||(l[13]=t("label",{class:"block font-normal text-lg mb-2 text-[#0B0B0B]"},"Comments (Optional)",-1)),Vt(t("textarea",{"onUpdate:modelValue":l[3]||(l[3]=d=>j.value.comments=d),class:"w-full border rounded p-2 h-20 resize-none"},null,512),[[St,j.value.comments]])]),t("div",{class:"p-4"},[t("button",{onClick:E,class:"w-full bg-[#FF5722] text-white py-2 rounded font-semibold hover:bg-orange-600 button-animation"}," SUBMIT FEEDBACK ")])])])):w("",!0),g.value?(e(),a("div",g1,[t("div",y1,[t("div",C1,[l[14]||(l[14]=t("div",{class:"w-48 h-36 mx-auto text-[#FF5722]"},[t("img",{src:Zt,alt:"karma points"})],-1)),l[15]||(l[15]=t("h2",{class:"text-2xl font-semibold mb-2"},"Congratulations!",-1)),t("p",w1,"You've earned "+r(s.activity.karma_points)+" karma points",1)]),t("div",x1,[s.activity.need_certificate=="Yes"?(e(),a("button",{key:0,onClick:O,class:"bg-[#FF5722] text-white py-2 px-6 rounded font-semibold hover:bg-orange-600 flex items-center gap-2 button-animation",disabled:p.value},[p.value?(e(),a("span",_1)):w("",!0),it(" "+r(p.value?"GENERATING...":"VIEW CERTIFICATE"),1)],8,b1)):w("",!0)])])])):w("",!0),y(Tt,{modelValue:z.value,"onUpdate:modelValue":l[4]||(l[4]=d=>z.value=d)},null,8,["modelValue"])])])]))}},$1=lt(k1,[["__scopeId","data-v-6df9bcf4"]]),M1={class:"min-h-screen bg-gray-100"},F1={key:0,class:"w-full bg-orange-100"},j1={class:"max-w-[1920px] mx-auto px-4 sm:px-6 lg:px-8 py-8 mt-10"},A1={class:"grid grid-cols-1 lg:grid-cols-12 gap-8"},V1={class:"lg:col-span-4"},S1={class:"bg-white rounded-md overflow-hidden"},H1={class:"relative h-64 overflow-hidden"},O1=["src"],B1={class:"absolute bottom-0 left-0 p-4"},z1={class:"text-2xl font-bold text-white"},E1={class:"inline-block bg-orange-500 text-white px-2 py-1 rounded text-sm mt-2"},L1={class:"p-6"},I1={class:"flex items-center justify-between mb-4"},R1={class:"flex items-center gap-2"},Z1={class:"text-gray-700"},T1={class:"flex items-center gap-2"},P1={class:"text-gray-700"},N1={class:"flex items-center gap-2 mb-6"},q1={class:"text-gray-700"},U1={class:"mb-6"},D1={class:"w-full bg-gray-200 rounded-full h-2"},G1={class:"flex items-center justify-between mt-2 text-sm text-gray-600"},W1={class:"mb-6"},J1={class:"flex flex-wrap gap-2"},Y1=["src"],K1={key:1,class:"text-sm text-gray-700"},Q1={class:""},X1={class:"bg-white rounded-md mt-6 p-6 h-[600px] flex flex-col sticky top-20"},ts={class:"flex-1 overflow-y-auto pr-2 custom-scrollbar"},es={class:"prose prose-sm max-w-none"},ss=["innerHTML"],os={class:"mt-4 pt-4 border-t border-gray-200"},as={class:"flex items-center gap-3"},is={class:"lg:col-span-8"},ls={key:0,class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-2 pt-1 gap-4"},rs={key:1},ns={key:0,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"},cs={key:1,class:"w-full h-[300px]"},ds={class:"mt-12"},us={class:"flex items-center justify-between mb-6"},ms={class:"flex items-center gap-2"},vs=["disabled"],ps=["disabled"],fs={key:0,class:"flex gap-4 pb-4 overflow-x-auto scrollbar-hide"},hs={key:1,class:"w-full h-[300px]"},gs=450,ys={__name:"Opportunities",setup(s){const n=bt(),m=T("call"),g=A([]),c=xt(),z=T("formatDate"),C=A(null),u=A(!0),M=A(!1),k=A(!1),F=A([]),j=A([]),i=A({}),b=A(!0),B=T("store"),E=()=>R(this,null,function*(){var v,o;try{let f=(v=g==null?void 0:g.value)==null?void 0:v.sdgs;typeof f=="string"&&(f=JSON.parse(f));let L={sdgs:f==null?void 0:f.map(V=>V.sdgs_name)};const H=yield m("mykartavya.controllers.api.related_opportunities",{filter:L});H&&H.length>0&&((o=c==null?void 0:c.params)!=null&&o.name?(j.value=H.filter(V=>{var I;return V.name!==((I=c==null?void 0:c.params)==null?void 0:I.name)}),i.value=H.find(V=>{var I;return V.name===((I=c==null?void 0:c.params)==null?void 0:I.name)})):(j.value=H,i.value=H[0]))}catch(f){console.error("Error fetching activity data:",f)}}),p=()=>R(this,null,function*(){var v;try{const o=yield m("mykartavya.controllers.api.sva_user_data");o&&o.length>0&&(k.value=((v=o[0])==null?void 0:v.workflow_state)==="Approved")}catch(o){console.error("Error checking user approval status:",o)}}),O=()=>R(this,null,function*(){var v,o;try{if(!((v=c==null?void 0:c.params)!=null&&v.name)){F.value=[];return}const f=yield m("mykartavya.controllers.api.get_opportunity_activity",{opportunity:(o=c==null?void 0:c.params)==null?void 0:o.name}).catch(L=>(console.error("API Error:",L),null));if(console.log(f,"response"),!f){console.warn("No response from get_opportunity_activity API"),F.value=[];return}if(Array.isArray(f)){const L=f==null?void 0:f.map(H=>{var V;return gt(ht({},H),{activity:H==null?void 0:H.name,name:(V=c==null?void 0:c.params)==null?void 0:V.name})});F.value=L}else console.warn("Invalid response format from get_opportunity_activity API"),F.value=[]}catch(f){console.error("Error in opportunitiesActivity:",f),F.value=[]}}),D=v=>{v.name!==c.params.name&&n.push(`/opportunities/${v.name}`)};yt(()=>R(this,null,function*(){b.value=!0;try{if(yield p(),yield E(),c.params.name)try{yield O()}catch(v){console.warn("Failed to load activities on mount:",v),F.value=[]}}catch(v){console.error("Error in onMounted:",v)}finally{b.value=!1}})),at(()=>c.params.name,v=>R(this,null,function*(){if(v){b.value=!0;try{yield E();try{yield O()}catch(o){console.warn("Failed to load activities:",o),F.value=[]}}catch(o){console.error("Error updating opportunity:",o)}finally{b.value=!1}}else F.value=[]}),{immediate:!1}),at(()=>B.refresh_step,v=>{v&&(E(),B.refresh_step=!1)},{immediate:!0,deep:!0});const S=gs,l=()=>{C.value&&C.value.scrollTo({left:Math.max(0,C.value.scrollLeft-S),behavior:"smooth"})},d=()=>{if(C.value){const v=C.value.scrollWidth-C.value.clientWidth;C.value.scrollTo({left:Math.min(v,C.value.scrollLeft+S),behavior:"smooth"})}},x=()=>{if(!C.value)return;const{scrollLeft:v,scrollWidth:o,clientWidth:f}=C.value;u.value=v<=0;const L=o>f;M.value=!L||v+f>=o};Ot(()=>{C.value&&(C.value.addEventListener("scroll",x),x())}),yt(()=>{const v=new ResizeObserver(()=>{x()});C.value&&v.observe(C.value),Bt(()=>{v.disconnect()})}),window.addEventListener("resize",()=>{});const $=v=>{var Y,K;const o=encodeURIComponent(window.location.href),f=encodeURIComponent(((Y=i.value)==null?void 0:Y.activity_name)||""),H=((K=i.value)!=null&&K.sdgs?JSON.parse(i.value.sdgs):[]).map(et=>{var Q;return(Q=et.sdgs_name)==null?void 0:Q.replace(/\s+/g,"")}).join(",");let V="";switch(v){case"facebook":V=`https://www.facebook.com/sharer/sharer.php?u=${o}&quote=${f}`;break;case"twitter":V=`https://twitter.com/intent/tweet?url=${o}&text=${encodeURIComponent(`Check out ${f}`)}&hashtags=${H}`;break;case"linkedin":V=`https://www.linkedin.com/sharing/share-offsite/?url=${o}`;break;case"whatsapp":V=`https://wa.me/?text=${encodeURIComponent(`${f}
${window.location.href}`)}`;break}const I=600,J=400,X=(window.innerWidth-I)/2,tt=(window.innerHeight-J)/2;window.open(V,"social-share",`width=${I},height=${J},left=${X},top=${tt}`)};return(v,o)=>{var f,L,H,V,I,J,X,tt,Y,K,et,Q,rt,nt,ct,dt,ut,mt;return e(),a("div",M1,[k.value?w("",!0):(e(),a("div",F1,o[6]||(o[6]=[zt('<div class="max-w-[1920px] mx-auto py-3 px-4 sm:px-6 lg:px-8" data-v-ee1a6a71><div class="flex items-center justify-between flex-wrap" data-v-ee1a6a71><div class="w-0 flex-1 flex items-center" data-v-ee1a6a71><span class="flex p-2 rounded-lg bg-white/20" data-v-ee1a6a71><svg class="h-6 w-6 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-ee1a6a71><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" data-v-ee1a6a71></path></svg></span><p class="ml-3 font-medium text-white" data-v-ee1a6a71><span class="md:hidden" data-v-ee1a6a71>Your account is pending approval</span><span class="hidden md:inline" data-v-ee1a6a71>Your account is currently pending approval. Some features may be limited until your account is approved.</span></p></div><div class="order-3 mt-2 flex-shrink-0 w-full sm:order-2 sm:mt-0 sm:w-auto" data-v-ee1a6a71><a href="/profile" class="flex items-center justify-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-yellow-600 bg-white hover:bg-white/90 transition-all duration-300" data-v-ee1a6a71> View Profile </a></div></div></div>',1)]))),t("div",j1,[t("div",A1,[t("div",V1,[t("div",S1,[t("div",H1,[t("img",{src:(f=i.value)==null?void 0:f.activity_image,class:"w-full h-full object-cover",alt:"Opportunity Image"},null,8,O1),o[7]||(o[7]=t("div",{class:"absolute inset-0 bg-gradient-to-t from-black/70 to-transparent"},null,-1)),t("div",B1,[t("h1",z1,r((L=i.value)==null?void 0:L.activity_name),1),t("span",E1,r((H=i.value)==null?void 0:H.types),1)])]),t("div",L1,[t("div",I1,[t("div",R1,[o[8]||(o[8]=t("svg",{class:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),t("span",Z1,r(h(z)((V=i.value)==null?void 0:V.start_date))+" - "+r(h(z)((I=i.value)==null?void 0:I.end_date)),1)]),t("div",T1,[o[9]||(o[9]=t("svg",{class:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),t("span",P1,r((X=(J=i.value)==null?void 0:J.hours)!=null?X:"0")+" hr",1)])]),t("div",N1,[o[10]||(o[10]=t("svg",{class:"w-5 h-5 text-orange-500",viewBox:"0 0 16 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M15.5002 3.66602C15.5002 2.28518 12.8885 1.16602 9.66683 1.16602C6.44516 1.16602 3.8335 2.28518 3.8335 3.66602M15.5002 3.66602V6.99935C15.5002 7.84935 14.5118 8.59935 13.0002 9.05102C12.0552 9.33435 10.906 9.49935 9.66683 9.49935C8.42766 9.49935 7.2785 9.33352 6.3335 9.05102C4.82266 8.59935 3.8335 7.84935 3.8335 6.99935V3.66602M15.5002 3.66602C15.5002 4.51602 14.5118 5.26602 13.0002 5.71768C12.0552 6.00102 10.906 6.16602 9.66683 6.16602C8.42766 6.16602 7.2785 6.00018 6.3335 5.71768C4.82266 5.26602 3.8335 4.51602 3.8335 3.66602",stroke:"#FF5722","stroke-linecap":"round","stroke-linejoin":"round"}),t("path",{d:"M0.5 6.9994V10.3327C0.5 11.1827 1.48917 11.9327 3 12.3844C3.945 12.6677 5.09417 12.8327 6.33333 12.8327C7.5725 12.8327 8.72167 12.6669 9.66667 12.3844C11.1775 11.9327 12.1667 11.1827 12.1667 10.3327V9.4994M0.5 6.9994C0.5 6.0019 1.8625 5.14107 3.83333 4.74023M0.5 6.9994C0.5 7.8494 1.48917 8.5994 3 9.05107C3.945 9.3344 5.09417 9.4994 6.33333 9.4994C6.9125 9.4994 7.47167 9.46357 8 9.39607",stroke:"#FF5722","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),t("span",q1,r((Y=(tt=i.value)==null?void 0:tt.karma_points)==null?void 0:Y.toLocaleString())+" Points",1)]),t("div",U1,[t("div",D1,[t("div",{class:"bg-green-500 h-2 rounded-full",style:wt(`width: ${(et=(K=i.value)==null?void 0:K.com_percent)!=null?et:0}%`)},null,4)]),t("div",G1,[t("span",null,r(((Q=i.value)==null?void 0:Q.com_percent)!=null?i.value.com_percent:0)+"% completed",1),t("span",null,r(((rt=i.value)==null?void 0:rt.donet_hours)!=null?(i.value.donet_hours/60/60).toFixed(2):"0")+" hr",1)])]),t("div",W1,[o[11]||(o[11]=t("h3",{class:"text-lg font-medium text-gray-800 mb-3"},"SDG Goals",-1)),t("div",J1,[(nt=i.value)!=null&&nt.sdgs?(e(!0),a(P,{key:0},N(JSON.parse(i.value.sdgs),(_,vt)=>(e(),a("div",{key:vt,class:"bg-gray-100 p-2 rounded-lg flex items-center gap-2 hover:bg-gray-200 transition-all duration-300"},[_!=null&&_.image?(e(),a("img",{key:0,src:_.image,alt:"SDG Icon",class:"w-6 h-6"},null,8,Y1)):(e(),a("span",K1,r(_==null?void 0:_.sdgs_name),1))]))),128)):w("",!0)])]),o[12]||(o[12]=t("div",{class:"border"},null,-1)),t("div",Q1,[(e(),W($1,{activity:i.value,key:(ct=i.value)==null?void 0:ct.activity},null,8,["activity"]))])])]),t("div",X1,[o[14]||(o[14]=t("h2",{class:"text-lg font-medium mb-4"},"Volunteer Role",-1)),t("div",ts,[t("div",es,[t("p",{class:"text-gray-600 whitespace-pre-wrap",innerHTML:(dt=i.value)==null?void 0:dt.activity_description},null,8,ss)])]),t("div",os,[o[13]||(o[13]=t("h3",{class:"text-sm font-medium text-gray-700 mb-3"},"Share this opportunity",-1)),t("div",as,[t("button",{onClick:o[0]||(o[0]=_=>$("facebook")),class:"p-2 rounded-full border border-gray-300 text-gray-500 hover:bg-gray-50 transition-all duration-300"},[y(h(Pt),{class:"w-5 h-5"})]),t("button",{onClick:o[1]||(o[1]=_=>$("twitter")),class:"p-2 rounded-full border border-gray-300 text-gray-500 hover:bg-gray-50 transition-all duration-300"},[y(h(Nt),{class:"w-5 h-5"})]),t("button",{onClick:o[2]||(o[2]=_=>$("linkedin")),class:"p-2 rounded-full border border-gray-300 text-gray-500 hover:bg-gray-50 transition-all duration-300"},[y(h(qt),{class:"w-5 h-5"})]),t("button",{onClick:o[3]||(o[3]=_=>$("whatsapp")),class:"p-2 rounded-full border border-gray-300 text-gray-500 hover:bg-gray-50 transition-all duration-300"},[y(h(Ut),{class:"w-5 h-5"})])])])])]),t("div",is,[o[16]||(o[16]=t("h2",{class:"text-lg font-medium mb-6"},"Activities",-1)),b.value?(e(),a("div",ls,[y(ot),y(ot),y(ot),y(ot)])):(e(),a("div",rs,[((ut=F.value)==null?void 0:ut.length)>0?(e(),a("div",ns,[(e(!0),a(P,null,N(F.value,_=>(e(),W(Ue,{key:_.name,item:_,mode:"opportunity"},null,8,["item"]))),128))])):(e(),a("div",cs,[y(Ct)]))])),t("div",ds,[t("div",us,[o[15]||(o[15]=t("h2",{class:"text-lg font-medium"},"Related Opportunities",-1)),t("div",ms,[t("button",{onClick:o[4]||(o[4]=_=>!u.value&&l),disabled:u.value,class:"p-3 rounded-xl hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300"},[y(h(Z),{name:"chevron-left",class:"w-6 h-6"})],8,vs),t("button",{onClick:o[5]||(o[5]=_=>!M.value&&d),disabled:M.value,class:"p-3 rounded-xl hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300"},[y(h(Z),{name:"chevron-right",class:"w-6 h-6"})],8,ps)])]),t("div",{ref_key:"scrollContainer",ref:C,class:"relative"},[((mt=j.value)==null?void 0:mt.length)>0?(e(),a("div",fs,[(e(!0),a(P,null,N(j.value,_=>(e(),W(Et,{key:_.name,item:_,mode:"opportunity",onClick:vt=>D(_),class:"w-[280px] min-w-[280px] max-w-[280px] lg:w-[450px] lg:min-w-[450px] lg:max-w-[450px] transform hover:scale-105 transition-all duration-300 cursor-pointer"},null,8,["item","onClick"]))),128))])):(e(),a("div",hs,[y(Ct)]))],512)])])])])])}}},As=lt(ys,[["__scopeId","data-v-ee1a6a71"]]);export{As as default};
