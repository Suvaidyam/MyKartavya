var b=(B,j,g)=>new Promise((h,u)=>{var k=r=>{try{x(g.next(r))}catch(w){u(w)}},a=r=>{try{x(g.throw(r))}catch(w){u(w)}},x=r=>r.done?h(r.value):Promise.resolve(r.value).then(k,a);x((g=g.apply(B,j)).next())});import{_ as pe,s as $,r as v,o as te,k as ge,C as he,c as i,m as S,a as e,e as ue,t as p,b as m,f as z,u as y,g as O,F as L,h as M,i as se,z as ve,A as me,j as o,p as A,E as xe}from"./index-Mo0Om2vA.js";import{_ as le,C as oe}from"./NotFound-jaNksTEu.js";import{C as F}from"./CardLoader-DB-7Dylf.js";import{F as we,T as fe,L as _e,M as be}from"./twitter-CMfQDqLY.js";const ye={class:"min-h-screen bg-gradient-to-br from-gray-50 via-gray-100 to-gray-200"},ke={key:0,class:"w-full bg-gradient-to-r from-yellow-400 to-yellow-500"},Ce={class:"max-w-[1920px] mx-auto"},$e={key:0,class:"relative overflow-hidden"},Le=["src"],Me={class:"absolute inset-0 z-20"},je={class:"max-w-[1920px] mx-auto px-4 sm:px-6 lg:px-8 h-full flex items-end"},Ue={class:"w-full pb-8 md:pb-16"},Ve={class:"grid grid-cols-1 lg:grid-cols-12 gap-6 lg:gap-8"},Re={class:"lg:col-span-8"},Se={class:"bg-white/10 backdrop-blur-lg rounded-2xl lg:rounded-3xl p-6 lg:p-8 border border-white/20 shadow-xl"},ze={class:"flex flex-wrap items-center gap-3 mb-4 lg:mb-6"},Oe={class:"px-4 lg:px-6 py-2 bg-white/20 rounded-full text-base lg:text-xl text-white font-medium"},Ae={class:"flex items-center gap-2 text-base lg:text-xl text-white"},Fe={class:"flex items-center gap-2 text-base lg:text-xl text-white"},Be={class:"text-3xl md:text-4xl lg:text-5xl font-bold text-white mb-4 lg:mb-6 leading-tight"},Ee={class:"flex flex-wrap items-center gap-3 mb-4 lg:mb-6"},Ie={class:"bg-white/20 p-1.5 lg:p-2 rounded-xl hover:bg-white/30 transition-all duration-300"},Te=["src"],Ne={key:1,class:"w-8 h-8 lg:w-10 lg:h-10 flex items-center justify-center bg-white/20 rounded-xl text-white text-base lg:text-xl"},We={class:"flex flex-col lg:flex-row items-start lg:items-center gap-4 lg:gap-6 text-base lg:text-xl text-white"},De={class:"flex items-center gap-2"},He={class:"w-full lg:flex-1"},Je={class:"w-full bg-white/30 rounded-full h-2 lg:h-3 overflow-hidden"},Pe={class:"flex items-center justify-between mt-2 text-sm lg:text-xl"},Ye={class:"lg:col-span-4"},qe={class:"bg-white/10 backdrop-blur-lg rounded-2xl lg:rounded-3xl p-6 lg:p-8 border border-white/20 shadow-xl"},Xe={class:"grid grid-cols-2 sm:grid-cols-4 gap-3"},Ge=["onClick"],Ke={class:"max-w-[1920px] mx-auto px-4 sm:px-6 lg:px-8 py-8 lg:py-16"},Qe={class:"grid grid-cols-1 lg:grid-cols-12 gap-6 lg:gap-8"},Ze={class:"lg:col-span-8"},et={class:"bg-white rounded-md lg:p-12 mb-8 lg:mb-12 min-h-[600px] lg:min-h-[800px]"},tt=["innerHTML"],st={class:"lg:col-span-4 bg-white h-[800px] rounded-md overflow-auto"},lt={class:"p-4 md:p-6 lg:p-10"},ot={class:"flex flex-col lg:flex-row gap-10"},at={class:"w-full lg:w-full"},nt={key:0,class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-1 pt-1 gap-4"},it={key:1,class:""},rt={key:0,class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-1 pt-1 items-center gap-4"},dt={key:1,class:"w-full h-[330px]"},ct={class:"mt-6 lg:mt-6"},pt={class:"flex items-center justify-between mb-8 lg:mb-6"},gt={class:"flex items-center gap-2 lg:gap-4"},ht=["disabled"],ut=["disabled"],vt={key:0,class:"flex gap-4 lg:gap-8 pb-4 overflow-x-auto scrollbar-hide"},mt={key:1,class:"w-full h-[300px] lg:h-[450px]"},xt=450,wt={__name:"Opportunities",setup(B){const j=[{name:"Facebook",svg:we,shareUrl:$(()=>{var s;return`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(window.location.href)}&quote=${encodeURIComponent((s=h.value)==null?void 0:s.title)}`})},{name:"X",svg:fe,shareUrl:$(()=>{var d,c;const s=`Check out ${(d=h.value)==null?void 0:d.title}`,t=(c=h.value)!=null&&c.sdgs?JSON.parse(h.value.sdgs).map(f=>{var _;return(_=f.sdgs_name)==null?void 0:_.replace(/\s+/g,"")}).join(","):"";return`https://twitter.com/intent/tweet?url=${encodeURIComponent(window.location.href)}&text=${encodeURIComponent(s)}&hashtags=${t}`})},{name:"LinkedIn",svg:_e,shareUrl:$(()=>`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(window.location.href)}`)},{name:"WhatsApp",svg:be,shareUrl:$(()=>{var t;const s=`${(t=h.value)==null?void 0:t.title}
${window.location.href}`;return`https://wa.me/?text=${encodeURIComponent(s)}`})}],g=se("call"),h=v([]),u=me(),k=se("formatDate"),a=v(null),x=v(!0),r=v(!1),w=v(!1),U=v([]),C=v([]),n=v({}),ae=()=>b(this,null,function*(){try{const s=yield g("mykartavya.controllers.api.related_opportunities",{sdgs:h.value.sdgs});s&&s.length>0&&(u.params.name?(C.value=s.filter(t=>t.name!==u.params.name),n.value=s.find(t=>t.name===u.params.name)):(C.value=s,n.value=s[0]))}catch(s){console.error("Error fetching activity data:",s)}}),ne=()=>b(this,null,function*(){var s;try{const t=yield g("mykartavya.controllers.api.sva_user_data");t&&t.length>0&&(w.value=((s=t[0])==null?void 0:s.workflow_state)==="Approved")}catch(t){console.error("Error checking user approval status:",t)}}),ie=()=>b(this,null,function*(){try{const s=yield g("mykartavya.controllers.api.get_opportunity_activity",{opportunity:u.params.name});s&&(s.map(t=>{t.activity=t.activity_name,t.name=u.params.name}),U.value=s)}catch(s){console.error("Error fetching activity data:",s)}});te(()=>b(this,null,function*(){yield ne(),yield ae(),yield ie()}));const E=xt,re=()=>{a.value&&a.value.scrollTo({left:Math.max(0,a.value.scrollLeft-E),behavior:"smooth"})},de=()=>{if(a.value){const s=a.value.scrollWidth-a.value.clientWidth;a.value.scrollTo({left:Math.min(s,a.value.scrollLeft+E),behavior:"smooth"})}},V=()=>{if(!a.value)return;const{scrollLeft:s,scrollWidth:t,clientWidth:d}=a.value;x.value=s<=0;const c=t>d;r.value=!c||s+d>=t};ge(()=>{a.value&&(a.value.addEventListener("scroll",V),V())}),te(()=>{const s=new ResizeObserver(()=>{V()});a.value&&s.observe(a.value),he(()=>{s.disconnect()})}),window.addEventListener("resize",()=>{});const ce=s=>{const c=(window.innerWidth-600)/2,f=(window.innerHeight-400)/2;window.open(s.shareUrl.value,"social-share",`width=600,height=400,left=${c},top=${f}`)};return(s,t)=>{var d,c,f,_,I,T,N,W,D,H,J,P,Y,q,X,G,K,Q,Z,ee;return o(),i("div",ye,[w.value?S("",!0):(o(),i("div",ke,t[2]||(t[2]=[ue('<div class="max-w-[1920px] mx-auto py-3 px-4 sm:px-6 lg:px-8" data-v-2632b19c><div class="flex items-center justify-between flex-wrap" data-v-2632b19c><div class="w-0 flex-1 flex items-center" data-v-2632b19c><span class="flex p-2 rounded-lg bg-white/20" data-v-2632b19c><svg class="h-6 w-6 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-2632b19c><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" data-v-2632b19c></path></svg></span><p class="ml-3 font-medium text-white" data-v-2632b19c><span class="md:hidden" data-v-2632b19c>Your account is pending approval</span><span class="hidden md:inline" data-v-2632b19c>Your account is currently pending approval. Some features may be limited until your account is approved.</span></p></div><div class="order-3 mt-2 flex-shrink-0 w-full sm:order-2 sm:mt-0 sm:w-auto" data-v-2632b19c><a href="/profile" class="flex items-center justify-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-yellow-600 bg-white hover:bg-white/90 transition-all duration-300" data-v-2632b19c> View Profile </a></div></div></div>',1)]))),e("div",Ce,[n.value?(o(),i("div",$e,[t[6]||(t[6]=e("div",{class:"absolute inset-0 bg-gradient-to-b from-black/80 via-black/60 to-transparent z-10"},null,-1)),e("img",{src:(d=n.value)==null?void 0:d.activity_image,class:"w-full h-[400px] md:h-[500px] lg:h-[600px] object-cover transform hover:scale-105 transition-transform duration-700",alt:""},null,8,Le),e("div",Me,[e("div",je,[e("div",Ue,[e("div",Ve,[e("div",Re,[e("div",Se,[e("div",ze,[e("span",Oe,p((c=n.value)==null?void 0:c.activity_type),1),e("span",Ae,[m(y(O),{name:"clock",class:"size-4 lg:size-6"}),z(" "+p((_=(f=n.value)==null?void 0:f.hours)!=null?_:"0")+" hr ",1)]),e("span",Fe,[t[3]||(t[3]=e("svg",{width:"20",height:"18",class:"lg:w-6 lg:h-6",viewBox:"0 0 16 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M15.5002 3.66602C15.5002 2.28518 12.8885 1.16602 9.66683 1.16602C6.44516 1.16602 3.8335 2.28518 3.8335 3.66602M15.5002 3.66602V6.99935C15.5002 7.84935 14.5118 8.59935 13.0002 9.05102C12.0552 9.33435 10.906 9.49935 9.66683 9.49935C8.42766 9.49935 7.2785 9.33352 6.3335 9.05102C4.82266 8.59935 3.8335 7.84935 3.8335 6.99935V3.66602M15.5002 3.66602C15.5002 4.51602 14.5118 5.26602 13.0002 5.71768C12.0552 6.00102 10.906 6.16602 9.66683 6.16602C8.42766 6.16602 7.2785 6.00018 6.3335 5.71768C4.82266 5.26602 3.8335 4.51602 3.8335 3.66602",stroke:"#FF5722","stroke-linecap":"round","stroke-linejoin":"round"}),e("path",{d:"M0.5 6.9994V10.3327C0.5 11.1827 1.48917 11.9327 3 12.3844C3.945 12.6677 5.09417 12.8327 6.33333 12.8327C7.5725 12.8327 8.72167 12.6669 9.66667 12.3844C11.1775 11.9327 12.1667 11.1827 12.1667 10.3327V9.4994M0.5 6.9994C0.5 6.0019 1.8625 5.14107 3.83333 4.74023M0.5 6.9994C0.5 7.8494 1.48917 8.5994 3 9.05107C3.945 9.3344 5.09417 9.4994 6.33333 9.4994C6.9125 9.4994 7.47167 9.46357 8 9.39607",stroke:"#FF5722","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),z(" "+p((T=(I=n.value)==null?void 0:I.karma_points)==null?void 0:T.toLocaleString())+" Points ",1)])]),e("h1",Be,p((N=n.value)==null?void 0:N.activity_name),1),e("div",Ee,[(W=n.value)!=null&&W.sdgs?(o(!0),i(L,{key:0},M(JSON.parse((D=n.value)==null?void 0:D.sdgs),l=>{var R;return o(),i("div",Ie,[l!=null&&l.image?(o(),i("img",{key:0,src:l.image,class:"w-8 h-8 lg:w-10 lg:h-10"},null,8,Te)):(o(),i("span",Ne,p((R=l==null?void 0:l.sdgs_name)==null?void 0:R.charAt(0)),1))])}),256)):S("",!0)]),e("div",We,[e("span",De,[t[4]||(t[4]=e("svg",{class:"w-5 h-5 lg:w-6 lg:h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),z(" "+p(y(k)((H=n.value)==null?void 0:H.start_date))+" - "+p(y(k)((J=n.value)==null?void 0:J.end_date)),1)]),e("div",He,[e("div",Je,[e("div",{class:"bg-gradient-to-r from-green-400 to-green-500 h-2 lg:h-3 rounded-full transition-all duration-500",style:ve(`width:${(Y=(P=n.value)==null?void 0:P.com_percent)!=null?Y:0}%`)},null,4)]),e("div",Pe,[e("span",null,p((X=(q=n.value)==null?void 0:q.com_percent)!=null?X:0)+"% completed",1),e("span",null,p((G=n.value)!=null&&G.donet_hours?(((K=n.value)==null?void 0:K.donet_hours)/60/60).toFixed(2):"0")+" hr",1)])])])])]),e("div",Ye,[e("div",qe,[t[5]||(t[5]=e("h3",{class:"text-xl lg:text-2xl font-semibold text-white mb-4 lg:mb-6"},"Share Opportunity",-1)),e("div",Xe,[(o(),i(L,null,M(j,l=>e("button",{key:l.name,onClick:R=>ce(l),class:"bg-white/20 hover:bg-white/30 text-white py-3 lg:py-4 px-4 lg:px-6 rounded-xl flex items-center justify-center gap-2 lg:gap-3 transition-all duration-300 hover:scale-105"},[(o(),A(xe(l.svg),{class:"w-5 h-5 lg:w-6 lg:h-6"}))],8,Ge)),64))])])])])])])])])):S("",!0),e("div",Ke,[e("div",Qe,[e("div",Ze,[e("div",et,[t[7]||(t[7]=e("h2",{class:"text-2xl lg:text-4xl font-bold mb-6 lg:mb-10 text-gray-800"},"About the Opportunity ",-1)),e("div",{class:"prose max-w-none text-base lg:text-xl leading-relaxed space-y-6 text-gray-600",innerHTML:(Q=n.value)==null?void 0:Q.activity_description},null,8,tt)])]),e("div",st,[e("div",lt,[e("div",ot,[e("div",at,[t[8]||(t[8]=e("h2",{class:"text-xl md:text-heading4 py-2 font-medium font-poppins",style:{color:"#0b0b0b"}}," Related Activity ",-1)),s.loader?(o(),i("div",nt,[m(F),m(F),m(F)])):(o(),i("div",it,[((Z=U.value)==null?void 0:Z.length)>0?(o(),i("div",rt,[(o(!0),i(L,null,M(U.value,l=>(o(),A(oe,{key:l.name,item:l,mode:"opportunity"},null,8,["item"]))),128))])):(o(),i("div",dt,[m(le)]))]))])])])])]),e("div",ct,[e("div",pt,[t[9]||(t[9]=e("h2",{class:"text-2xl lg:text-4xl font-bold text-gray-800"},"Related opportunities",-1)),e("div",gt,[e("button",{onClick:t[0]||(t[0]=l=>!x.value&&re),disabled:x.value,class:"p-3 lg:p-4 rounded-xl hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300"},[m(y(O),{name:"chevron-left",class:"w-6 h-6 lg:w-8 lg:h-8"})],8,ht),e("button",{onClick:t[1]||(t[1]=l=>!r.value&&de),disabled:r.value,class:"p-3 lg:p-4 rounded-xl hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300"},[m(y(O),{name:"chevron-right",class:"w-6 h-6 lg:w-8 lg:h-8"})],8,ut)])]),e("div",{ref_key:"scrollContainer",ref:a,class:"relative"},[((ee=C.value)==null?void 0:ee.length)>0?(o(),i("div",vt,[(o(!0),i(L,null,M(C.value,l=>(o(),A(oe,{key:l.name,item:l,mode:"opportunity",class:"w-[280px] min-w-[280px] max-w-[280px] lg:w-[450px] lg:min-w-[450px] lg:max-w-[450px] transform hover:scale-105 transition-all duration-300"},null,8,["item"]))),128))])):(o(),i("div",mt,[m(le)]))],512)])])])])}}},Ct=pe(wt,[["__scopeId","data-v-2632b19c"]]);export{Ct as default};
