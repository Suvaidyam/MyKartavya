var k=(L,o,p)=>new Promise((h,a)=>{var d=r=>{try{x(p.next(r))}catch(u){a(u)}},v=r=>{try{x(p.throw(r))}catch(u){a(u)}},x=r=>r.done?h(r.value):Promise.resolve(r.value).then(d,v);x((p=p.apply(L,o)).next())});import{r as m,s as _,k as V,o as B,C as $,c as i,a as s,b as D,l as y,v as M,x as R,e as g,t as f,F as G,g as U,A as q,i as z,B as I,h as c}from"./index-DLInYnl-.js";import{F as P}from"./Footer-rI3Bl4r4.js";import"./index-B8-VUbVz.js";/* empty css              */const H={class:"min-h-screen bg-gray-50"},J={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},K={class:"pt-12 md:pt-20 pb-4 space-y-6"},Q={class:"flex flex-wrap gap-4 items-center justify-center md:justify-start"},W={class:"flex items-center border rounded-lg px-3 bg-white shadow-sm hover:shadow-md transition-shadow w-full md:w-auto"},X={key:0,class:"flex flex-wrap gap-2 mt-4 justify-center md:justify-start"},Y={key:0,class:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-xs flex items-center"},Z={key:1,class:"px-3 py-1 bg-yellow-100 text-yellow-800 rounded-full text-xs flex items-center"},ee={key:2,class:"px-3 py-1 bg-purple-100 text-purple-800 rounded-full text-xs flex items-center"},te={class:"pb-4 text-center md:text-left"},se={class:"text-sm text-gray-600"},ae={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 py-4"},le={class:"p-4 bg-gray-50 flex justify-center"},oe=["src"],re={key:1,class:"h-16 w-16 bg-gray-200 rounded-full flex items-center justify-center"},ne={class:"p-4"},ie={class:"mb-3 text-lg font-semibold tracking-tight text-gray-900 line-clamp-2"},ce={class:"mb-6 text-[14px] text-gray-600 line-clamp-2"},de=["onClick"],ue={key:0,class:"text-center py-12"},ye={__name:"ngo",setup(L){const o=q(),p=I(),h=z("call");m(!1);const a=m({name:"",state:"",city:""}),d=m(""),v=m(""),x=m({state:!1,city:!1}),r=m({state:"",city:""}),u=m([]),w=m([]),b=m([]);_(()=>r.value.state?u.value.filter(e=>e.state_name.toLowerCase().includes(r.value.state.toLowerCase())):u.value),_(()=>r.value.city?w.value.filter(e=>e.district_name.toLowerCase().includes(r.value.city.toLowerCase())):w.value);const C=_(()=>b.value.filter(e=>{const t=!a.value.name||e.ngo_name&&e.ngo_name.toLowerCase().includes(a.value.name.toLowerCase())||e.name&&e.name.toLowerCase().includes(a.value.name.toLowerCase()),l=!a.value.state||e.state&&e.state.toLowerCase().includes(a.value.state.toLowerCase())||e.location&&e.location.toLowerCase().includes(a.value.state.toLowerCase())||e.address&&e.address.toLowerCase().includes(a.value.state.toLowerCase()),n=!a.value.city||e.city&&e.city.toLowerCase().includes(a.value.city.toLowerCase())||e.district&&e.district.toLowerCase().includes(a.value.city.toLowerCase())||e.location&&e.location.toLowerCase().includes(a.value.city.toLowerCase())||e.address&&e.address.toLowerCase().includes(a.value.city.toLowerCase());return t&&l&&n})),F=_(()=>a.value.name||d.value||v.value);function S(){d.value="",a.value.state="",N()}function N(){v.value="",a.value.city="",w.value=[]}function E(){a.value={name:"",state:"",city:""},d.value="",v.value="",w.value=[],r.value={state:"",city:""},x.value={state:!1,city:!1}}const A=()=>k(this,null,function*(){try{console.log("Fetching states...");const e=yield h("mykartavya.controllers.api.states_data");u.value=e||[],console.log("States fetched:",u.value.length)}catch(e){console.error("Error fetching states:",e),u.value=[]}});function j(){return k(this,null,function*(){var e,t,l;try{console.log("Fetching NGOs for state:",(e=o==null?void 0:o.params)==null?void 0:e.name);const n=yield h("mykartavya.controllers.state.get_ngos_by_state",{state_name:(t=o==null?void 0:o.params)==null?void 0:t.name});n&&(console.log("NGOs fetched successfully:",n.length),b.value=n,(l=o==null?void 0:o.params)!=null&&l.name&&(d.value=o.params.name,a.value.state=o.params.name))}catch(n){console.error("Error fetching NGOs:",n),b.value=[]}})}const T=e=>{p.push({name:"Ngodetails",params:{name:e.ngo_name||e.name}})};function O(e){const t=document.querySelectorAll(".relative");let l=!1;t.forEach(n=>{n.contains(e.target)&&(l=!0)}),l||(x.value={state:!1,city:!1})}return V(()=>o.params.name,e=>{e&&(d.value=e,a.value.state=e,j())}),B(()=>{j(),A(),document.addEventListener("click",O)}),$(()=>{document.removeEventListener("click",O)}),(e,t)=>(c(),i(G,null,[s("div",H,[t[11]||(t[11]=s("div",{class:"relative text-white px-4 md:px-8 lg:px-72 py-24 md:py-32 flex flex-col md:flex-row justify-between items-center mt-[50px] bg-cover bg-center bg-no-repeat",style:{"background-image":"url('https://prod-mkcmsapi.s3.ap-south-1.amazonaws.com/cms/images/Media-20200813160839/1366-300.png')"}},[s("div",{class:"container text-center md:text-left mb-6 md:mb-0"},[s("h1",{class:"text-3xl md:text-4xl lg:text-5xl font-bold mb-3"},"NGOs"),s("div",{class:"flex items-center justify-center md:justify-start space-x-2 text-sm"})])],-1)),s("div",J,[s("div",K,[s("div",Q,[t[6]||(t[6]=s("label",{class:"font-semibold text-gray-700"},"Search by:",-1)),s("div",W,[M(s("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>a.value.name=l),type:"text",placeholder:"NGO Name",class:"border-none inputs border-white outline-none bg-transparent text-sm flex-1 min-w-[150px] py-2"},null,512),[[R,a.value.name]]),t[4]||(t[4]=s("i",{class:"fas fa-search text-gray-500 ml-2"},null,-1))]),s("button",{onClick:E,class:"w-full md:w-auto px-4 py-2 border border-gray-300 rounded-lg text-sm bg-white hover:bg-gray-50 transition-colors shadow-sm hover:shadow-md"},t[5]||(t[5]=[s("i",{class:"fas fa-times mr-1"},null,-1),g(" Clear ")]))]),F.value?(c(),i("div",X,[t[7]||(t[7]=s("span",{class:"text-sm text-gray-600"},"Active filters:",-1)),a.value.name?(c(),i("span",Y,[g(" Name: "+f(a.value.name)+" ",1),s("i",{onClick:t[1]||(t[1]=l=>a.value.name=""),class:"fas fa-times ml-1 cursor-pointer hover:text-blue-600"})])):y("",!0),d.value?(c(),i("span",Z,[g(" State: "+f(d.value)+" ",1),s("i",{onClick:t[2]||(t[2]=l=>S()),class:"fas fa-times ml-1 cursor-pointer hover:text-yellow-600"})])):y("",!0),v.value?(c(),i("span",ee,[g(" City: "+f(v.value)+" ",1),s("i",{onClick:t[3]||(t[3]=l=>N()),class:"fas fa-times ml-1 cursor-pointer hover:text-purple-600"})])):y("",!0)])):y("",!0)]),s("div",te,[s("p",se," Showing "+f(C.value.length)+" of "+f(b.value.length)+" NGOs ",1)]),s("div",ae,[(c(!0),i(G,null,U(C.value,l=>(c(),i("div",{key:l.ngo_name||l.name,class:"bg-white border border-gray-200 rounded-lg shadow-sm hover:shadow-md transition-shadow overflow-hidden"},[s("div",le,[l.ngo_logo?(c(),i("img",{key:0,src:l.ngo_logo,alt:"NGO Logo",class:"h-16 w-16 object-contain rounded-full border-2 border-white shadow-sm"},null,8,oe)):(c(),i("div",re,t[8]||(t[8]=[s("i",{class:"fas fa-building text-gray-400 text-xl"},null,-1)])))]),s("div",ne,[s("h5",ie,f(l.ngo_name||l.name),1),s("p",ce,[t[9]||(t[9]=s("span",{class:"inline-block mr-1"},"📍",-1)),g(" "+f(l.location||l.address||"Address not available"),1)]),s("button",{onClick:n=>T(l),class:"w-full px-4 py-2 text-white bg-[#fe5726] rounded-lg hover:bg-red-600 transition-colors shadow-sm hover:shadow-md"}," Read more ",8,de)])]))),128))]),C.value.length===0?(c(),i("div",ue,t[10]||(t[10]=[s("i",{class:"fas fa-search text-4xl text-gray-300 mb-4"},null,-1),s("h3",{class:"text-xl font-semibold text-gray-600 mb-2"},"No NGOs found",-1),s("p",{class:"text-gray-500"},"Try adjusting your search filters or clear all filters to see more results.",-1)]))):y("",!0)])]),D(P)],64))}};export{ye as default};
